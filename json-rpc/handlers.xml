<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<web_service name="IBSng" type="JSON-RPC" port="1237">
  <common_params>
    <param name="auth_type" type="choice" optional="false" comment="">
      <choice value="ADMIN" comment="Admin" />
      <choice value="NORMAL_USER" comment="Internet user" />
      <choice value="VOIP_USER" comment="VoIP user" />
      <choice value="ANONYMOUS" comment="Anonymous" />
      <choice value="MAIL" comment="MailBox user" />
    </param>
    <param name="auth_name" type="str" optional="false" comment="username (or admin name)" />
    <param name="auth_pass" type="str" optional="false" comment="password" />
    <param name="auth_session" type="str" optional="true"
           comment="Session ID, if this is given and valid (previously returned by login.login), you can omit auth_type, auth_name and auth_pass" />
    <param name="auth_remoteaddr" type="str" optional="true"
           comment="Remote IP of user or admin, important for Audit Logs, CRM should pass this" />
    <param name="date_type" type="choice" optional="true" comment="Date type for output date or datetime params, default is 'gregorian'">
      <choice value="gregorian" comment="" />
      <choice value="jalali" comment="" />
      <choice value="relative" comment="" />
    </param>
  </common_params>
  <handler name="admin" comment="">
    <method name="addNewAdmin" auth_type="ADMIN" requires_perm="ADD NEW ADMIN" comment="">
      <input type="dict">
        <param name="admin_username" type="str" comment="" />
        <param name="admin_password" type="str" comment="" />
        <param name="admin_isp_name" type="str" comment="" />
        <param name="name" type="str" comment="" />
        <param name="email" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="admin_has_otp" type="bool" comment="" />
      </input>
      <output type="int" comment="Admin ID">
      </output>
    </method>
    <method name="getAdminInfo" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="admin_username" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="admin_id" type="int" comment="" />
        <param name="username" type="str" comment="" />
        <param name="name" type="str" comment="" />
        <param name="email" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="isp_name" type="str" comment="" />
        <param name="creator_admin_username" type="str" comment="" />
        <param name="locked" type="bool" comment="" />
        <param name="last_request_ip" type="str" comment="" />
        <param name="last_activity" type="int" comment="Epoch Time of admin's last activity" />
        <param name="online_status" type="bool" comment="true if online, false if offline" />
        <param name="admin_has_otp" type="bool" comment="" />
      </output>
    </method>
    <method name="changePassword" auth_type="ADMIN" requires_perm="CHANGE ADMIN PASSWORD" comment="No need to permission if admin_username is the same as requester admin">
      <input type="dict">
        <param name="admin_username" type="str" comment="" />
        <param name="new_password" type="str" comment="" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="getAllAdminUsernames" auth_type="ADMIN" requires_perm="SEE ADMIN INFO" comment="All ISPs">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="List of admin usernames">
      </output>
    </method>
    <method name="getAllAdminUsernames" auth_type="ADMIN" requires_perm="SEE ADMIN INFO" comment="Specific ISP">
      <input type="dict">
        <param name="isp_name" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="str" comment="List of admin usernames">
      </output>
    </method>
    <method name="getAllAdminInfos" auth_type="ADMIN" requires_perm="SEE ADMIN INFO"
        comment="only returns admins that requester admin has access to.
        Added in tag 320">
      <input type="dict">
        <param name="isp_name" type="str" comment="admins of specific ISP" oprtional="true"/>
      </input>
      <output type="list" length="-1" item_type="dict" comment="List of admin informations">
        <item type="dict" comment="admin info dict">
          <param name="admin_id" type="int" comment="" />
          <param name="username" type="str" comment="" />
          <param name="name" type="str" comment="" />
          <param name="email" type="str" comment="" />
          <param name="comment" type="str" comment="" />
          <param name="isp_name" type="str" comment="" />
          <param name="creator_admin_username" type="str" comment="" />
          <param name="locked" type="bool" comment="" />
          <param name="last_request_ip" type="str" comment="" />
          <param name="last_activity" type="int" comment="Epoch Time of admin's last activity" />
          <param name="online_status" type="bool" comment="true if online, false if offline" />
          <param name="admin_has_otp" type="bool" comment="" />
        </item>
      </output>
    </method>
    <method name="updateAdminInfo" auth_type="ADMIN" requires_perm="CHANGE ADMIN INFO" comment="">
      <input type="dict">
        <param name="admin_id" type="int" comment="" />
        <param name="admin_username" type="str" comment="" />
        <param name="admin_isp_name" type="str" comment="" />
        <param name="admin_locked" type="bool" comment="" />
        <param name="name" type="name" comment="" />
        <param name="email" type="name" comment="" />
        <param name="comment" type="name" comment="" />
        <param name="admin_has_otp" type="bool" comment="" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="deleteAdmin" auth_type="ADMIN" requires_perm="DELETE ADMIN" comment="">
      <input type="dict">
        <param name="admin_username" type="str" comment="" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="generateOTP" auth_type="ADMIN" requires_perm="CHANGE ADMIN PASSWORD" comment="">
      <input type="dict">
        <param name="pass_len" type="int" comment="" />
        <param name="pass_count" type="int" comment="" />
        <param name="admin_username" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="str" comment="List of passwords">
      </output>
    </method>
    <method name="searchOTPs" auth_type="ADMIN" requires_perm="SEARCH OTP ADMINS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="creation_date_from" type="str" optional="true" requires_param="creation_date_from_unit" />
          <param name="creation_date_from_unit" type="choice" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="creation_date_to" type="str" optional="true" requires_param="creation_date_to_unit" />
          <param name="creation_date_to_unit" type="choice" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="used_date_from" type="str" optional="true" requires_param="used_date_from_unit" />
          <param name="used_date_from_unit" type="choice" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="used_date_to" type="str" optional="true" requires_param="used_date_to_unit" />
          <param name="used_date_to_unit" type="choice" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="expired" type="choice" optional="true">
            <choice value="yes" />
            <choice value="no" />
          </param>
          <param name="available" type="choice" optional="true" comment="available means not expired">
            <choice value="yes" />
            <choice value="no" />
          </param>
        </param>
        <param name="_from" type="int" comment="page start index" />
        <param name="to" type="int" comment="page end index" />
        <param name="sort_by" type="choice" comment="">
          <choice value="otp_id" />
          <choice value="creation_date" />
          <choice value="used_date" />
        </param>
        <param name="desc" type="bool" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="Number of total rows" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="dict">
            <param name="otp_id" type="int" comment="" />
            <param name="admin_id" type="int" comment="" />
            <param name="admin_name" type="str" comment="" />
            <param name="password" type="str" comment="str" />
            <param name="expired" type="str" comment="yes or no" />
            <param name="used_date" type="str" comment="" />
            <param name="used_date_formatted" type="str" comment="" />
            <param name="creation_date" type="str" comment="" />
            <param name="creation_date_formatted" type="str" comment="" />
            <param name="remote_addr" type="str" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="expireAllAdminOTPs" auth_type="ADMIN" requires_perm="EXPIRE OTP ADMINS" comment="">
      <input type="dict">
      </input>
      <output type="null" comment="">
      </output>
    </method>
  </handler>
  <handler name="bw" comment="bandwidth limit, based on tag C_lan_acc_staging_327">
    <method name="addInterface" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="hostname" type="str" comment=""></param>
        <param name="interface_name" type="str" comment=""></param>
        <param name="comment" type="str" comment=""></param>
        <param name="host_type" type="choice" comment="">
          <choice type="str" value="Linux" />
          <choice type="str" value="Mikrotik" />
        </param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="addNode" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="hostname" type="str" comment=""></param>
        <param name="interface_name" type="str" comment=""></param>
        <param name="parent_id" type="int" comment=""></param>
        <param name="rate_kbits" type="int" comment="kilo bits"></param>
        <param name="ceil_kbits" type="int" comment="kilo bits"></param>
        <param name="priority" type="int" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="addLeaf" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="leaf_name" type="str" comment=""></param>
        <param name="parent_id" type="int" comment=""></param>
        <param name="default_rate_kbits" type="int" comment="kilo bits"></param>
        <param name="default_ceil_kbits" type="int" comment="kilo bits"></param>
        <param name="total_rate_kbits" type="int" comment="kilo bits"></param>
        <param name="total_ceil_kbits" type="int" comment="kilo bits"></param>
        <param name="default_priority" type="int" comment=""></param>
        <param name="total_priority" type="int" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="addLeafService" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="leaf_name" type="str" comment=""></param>
        <param name="dst_ip" type="str" comment=""></param>
        <param name="protocol" type="choice" comment="">
          <choice type="str" value="tcp" />
          <choice type="str" value="udp" />
          <choice type="str" value="icmp" />
          <choice type="str" value="ip" />
        </param>
        <param name="filter" type="str" comment="format: 'sport COMMA_SEPARATED_PORTS' or 'dport COMMA_SEPARATED_PORTS'"></param>
        <param name="rate_kbits" type="int" comment="kilo bit"></param>
        <param name="ceil_kbits" type="int" comment="kilo bit"></param>
        <param name="priority" type="int" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="getInterfaces" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
      </input>
      <output type="dict" dynamic_keys="true">
        <key type="str" comment="'hostname/interface_name'" />
        <value type="dict" comment="">
          <param name="interface_id" type="int" comment=""></param>
          <param name="interface_name" type="str" comment=""></param>
          <param name="hostname" type="str" comment=""></param>
          <param name="host_type" type="choice" comment="">
            <choice type="str" value="Linux" />
            <choice type="str" value="Mikrotik" />
          </param>
          <param name="comment" type="str" comment=""></param>
        </value>
      </output>
    </method>
    <method name="getNodeInfo" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="node_id" type="int" comment=""></param>
      </input>
      <output type="dict">
        <param name="interface_id" type="int" comment=""></param>
        <param name="interface_name" type="str" comment=""></param>
        <param name="hostname" type="str" comment=""></param>
        <param name="node_id" type="int" comment=""></param>
        <param name="rate_kbits" type="int" comment=""></param>
        <param name="ceil_kbits" type="int" comment=""></param>
        <param name="priority" type="int" comment=""></param>
        <param name="description" type="str" comment=""></param>
        <param name="pkts" type="float" comment=""></param>
        <param name="bytes" type="float" comment=""></param>
        <param name="rate" type="float" comment=""></param>
      </output>
    </method>
    <method name="getLeafInfo" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="leaf_name" type="str" comment=""></param>
      </input>
      <output type="dict">
        <param name="leaf_id" type="int" comment=""></param>
        <param name="leaf_name" type="str" comment=""></param>
        <param name="parent_id" type="int" comment=""></param>
        <param name="interface_id" type="int" comment=""></param>
        <param name="interface_name" type="str" comment=""></param>
        <param name="hostname" type="str" comment=""></param>
        <param name="total_rate_kbits" type="int" comment=""></param>
        <param name="total_ceil_kbits" type="int" comment=""></param>
        <param name="default_rate_kbits" type="int" comment=""></param>
        <param name="default_ceil_kbits" type="int" comment=""></param>
        <param name="default_priority" type="int" comment=""></param>
        <param name="total_priority" type="int" comment=""></param>
        <param name="services" type="list" length="-1" item_type="dict" comment="">
          <param name="leaf_service_id" type="int" comment=""></param>
          <param name="filter" type="str" comment=""></param>
          <param name="dst_ip" type="str" comment=""></param>
          <param name="protocol" type="choice" comment="">
            <choice type="str" value="tcp" />
            <choice type="str" value="udp" />
            <choice type="str" value="icmp" />
            <choice type="str" value="ip" />
          </param>
          <param name="rate_kbits" type="int" comment=""></param>
          <param name="ceil_kbits" type="int" comment=""></param>
          <param name="leaf_id" type="int" comment=""></param>
          <param name="leaf_name" type="str" comment=""></param>
          <param name="priority" type="int" comment=""></param>
        </param>
      </output>
    </method>
    <method name="getTree" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="hostname" type="str" comment=""></param>
        <param name="interface_name" type="str" comment=""></param>
      </input>
      <output type="list" length="3" comment="tree">
        <item index="0" type="int" comment="node_id"></item>
        <item index="1" type="list" length="-1" item_type="list" comment="child node subtrees">
          <item type="list" length="3" comment="node subtree, structure is the same as root (output tag)"></item>
        </item>
        <item index="2" type="list" length="-1" item_type="str" comment="list of child leaf names"></item>
      </output>
    </method>
    <method name="delLeafService" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="leaf_service_id" type="int" comment=""></param>
        <param name="leaf_name" type="str" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="delNode" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="node_id" type="int" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="getAllLeafNames" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of leaf names">
      </output>
    </method>
    <method name="delLeaf" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="leaf_name" type="str" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="delInterface" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="hostname" type="str" comment=""></param>
        <param name="interface_name" type="str" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="updateInterface" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="interface_id" type="int" comment=""></param>
        <param name="hostname" type="str" comment=""></param>
        <param name="interface_name" type="str" comment=""></param>
        <param name="comment" type="str" comment=""></param>
        <param name="host_type" type="choice" comment="">
          <choice type="str" value="Linux" />
          <choice type="str" value="Mikrotik" />
        </param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="updateNode" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="node_id" type="int" comment=""></param>
        <param name="rate_kbits" type="int" comment=""></param>
        <param name="ceil_kbits" type="int" comment=""></param>
        <param name="priority" type="int" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="updateLeaf" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="leaf_id" type="int" comment=""></param>
        <param name="leaf_name" type="str" comment=""></param>
        <param name="default_rate_kbits" type="int" comment="kilo bits"></param>
        <param name="default_ceil_kbits" type="int" comment="kilo bits"></param>
        <param name="total_rate_kbits" type="int" comment="kilo bits"></param>
        <param name="total_ceil_kbits" type="int" comment="kilo bits"></param>
        <param name="default_priority" type="int" comment=""></param>
        <param name="total_priority" type="int" comment=""></param>
      </input>
      <output type="dict">
      </output>
    </method>
    <method name="updateLeafService" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="leaf_name" type="str" comment=""></param>
        <param name="leaf_service_id" type="int" comment=""></param>
        <param name="dst_ip" type="str" comment=""></param>
        <param name="protocol" type="choice" comment="">
          <choice type="str" value="tcp" />
          <choice type="str" value="udp" />
          <choice type="str" value="icmp" />
          <choice type="str" value="ip" />
        </param>
        <param name="filter" type="str" comment=""></param>
        <param name="rate_kbits" type="int" comment=""></param>
        <param name="ceil_kbits" type="int" comment=""></param>
        <param name="priority" type="int" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="addBwStaticIP" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="ip_addr" type="str" comment=""></param>
        <param name="tx_leaf_name" type="str" comment=""></param>
        <param name="rx_leaf_name" type="str" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="updateBwStaticIP" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="static_ip_id" type="int" comment=""></param>
        <param name="ip_addr" type="str" comment=""></param>
        <param name="tx_leaf_name" type="str" comment=""></param>
        <param name="rx_leaf_name" type="str" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="delBwStaticIP" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="ip_addr" type="str" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="getAllBwStaticIPs" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of IPs">
      </output>
    </method>
    <method name="getBwStaticIPInfo" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
        <param name="ip_addr" type="str" comment=""></param>
      </input>
      <output type="dict">
        <param name="static_ip_id" type="int" comment=""></param>
        <param name="ip" type="str" comment=""></param>
        <param name="tx_leaf_id" type="int" comment=""></param>
        <param name="tx_leaf_name" type="str" comment=""></param>
        <param name="rx_leaf_id" type="int" comment=""></param>
        <param name="rx_leaf_name" type="str" comment=""></param>
      </output>
    </method>
    <method name="getActiveLeaves" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="list" comment="">
        <item type="list" length="3" comment="">
          <item index="0" type="str" comment="ip_addr"></item>
          <item index="1" type="str" comment="username"></item>
          <item index="2" type="list" length="2" comment="">
            <item index="0" type="dict" comment="send leaf info, same as bw.getLeafInfo output"></item>
            <item index="1" type="dict" comment="receive leaf info, , same as bw.getLeafInfo output"></item>
          </item>
        </item>
      </output>
    </method>
    <method name="getLeafCharges" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER"
      comment="return a list of charge names that given leaf is used in">
      <input type="dict">
        <param name="leaf_name" type="str" comment=""></param>
      </input>
      <output type="list" length="-1" item_type="str" comment="list of charge names"></output>
    </method>
    <method name="getRealHostInterfaces" auth_type="ADMIN" requires_perm="CHANGE BANDWIDTH MANAGER"
      comment="Returns a list of interfaces install on given hostname">
      <input type="dict">
        <param name="hostname" type="str" comment=""></param>
        <param name="host_type" type="choice" comment="">
          <choice type="str" value="Linux" />
          <choice type="str" value="Mikrotik" />
        </param>
      </input>
      <output type="list" length="-1" item_type="str" comment="list of interfaces">
      </output>
    </method>
  </handler>
  <handler name="isp" comment="">
    <method name="addNewISP" auth_type="ADMIN" requires_perm="MANIPULATE ISP" comment="">
      <input type="dict">
        <param name="isp_name" type="str" comment="" />
        <param name="parent_isp_name" type="str" comment="" />
        <param name="isp_has_deposit_limit" type="bool" comment="" />
        <param name="isp_deposit" type="float" comment="float" />
        <param name="isp_mapped_user_id" type="int" comment="or -1" />
        <param name="isp_auth_domain" type="str" comment="or ''" />
        <param name="isp_web_domain" type="str" comment="or ''" />
        <param name="isp_email" type="str" comment="" />
        <param name="prevent_neg_deposit_login" type="bool" comment="" />
        <param name="isp_comment" type="str" comment="or ''" />
        <param name="isp_failed_user_id" type="int" comment="or -1, removed in C_dev_326" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="updateISP" auth_type="ADMIN" requires_perm="MANIPULATE ISP" comment="">
      <input type="dict">
        <param name="isp_id" type="int" comment="" />
        <param name="isp_name" type="str" comment="" />
        <param name="parent_isp_name" type="str" comment="" />
        <param name="isp_has_deposit_limit" type="bool" comment="" />
        <param name="isp_mapped_user_id" type="int" comment="" />
        <param name="isp_auth_domain" type="str" comment="" />
        <param name="isp_web_domain" type="str" comment="" />
        <param name="isp_email" type="str" comment="" />
        <param name="prevent_neg_deposit_login" type="bool" comment="" />
        <param name="isp_comment" type="str" comment="" />
        <param name="isp_failed_user_id" type="int" comment="removed in C_dev_326" />
        <param name="isp_locked" type="bool" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getAllISPNames" auth_type="ADMIN" requires_perm=""
        comment="returns list of ISP names that the admin has access to">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of ISP names" />
    </method>
    <method name="listISPsWithIDs" auth_type="ADMIN" requires_perm=""
        comment="return a list of ISP IDs and names that the admin has access to.
        Added in tag 320">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="list">
        <item type="list" length="2" comment="isp_id and isp_name">
          <item index="0" type="int" comment="isp_id" />
          <item index="1" type="str" comment="isp_name" />
        </item>
      </output>
    </method>
    <method name="getAllISPInfos" auth_type="ADMIN" requires_perm=""
        comment="returns list of ISP informations that the admin has access to.
        Added in tag 320">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="dict" comment="">
        <item type="dict" comment="isp info dict">
          <param name="isp_id" type="int" comment="" />
          <param name="isp_name" type="str" comment="" />
          <param name="parent_isp_name" type="str" comment="" />
          <param name="isp_has_deposit_limit" type="bool" comment="" />
          <param name="isp_deposit" type="float" comment="" />
          <param name="isp_mapped_user_id" type="int" comment="" />
          <param name="isp_mapped_user_repr" type="str" comment="" />
          <param name="isp_mapped_user_credit" type="float" comment="" />
          <param name="isp_online_users_count" type="int" comment="added in C_dev_326" />
          <param name="isp_locked" type="bool" comment="" />
          <param name="isp_auth_domain" type="str" comment="" />
          <param name="isp_web_domain" type="str" comment="" />
          <param name="isp_email" type="str" comment="" />
          <param name="prevent_neg_deposit_login" type="bool" comment="" />
          <param name="isp_comment" type="str" comment="" />
          <param name="isp_failed_username" type="str" comment="removed in C_dev_326" />
          <param name="isp_failed_user_id" type="str" comment="removed in C_dev_326" />
        </item>
      </output>
    </method>
    <method name="getISPInfo" auth_type="ADMIN" requires_perm="SEE ISP INFO" comment="">
      <input type="dict" comment="pass isp_name or isp_id">
        <param name="isp_name" type="str" optional="true" comment="" />
        <param name="isp_id" type="int" optional="true" comment="added in C_312" />
      </input>
      <output type="dict" comment="">
        <param name="isp_id" type="int" comment="" />
        <param name="isp_name" type="str" comment="" />
        <param name="parent_isp_name" type="str" comment="" />
        <param name="isp_has_deposit_limit" type="bool" comment="" />
        <param name="isp_deposit" type="float" comment="" />
        <param name="isp_mapped_user_id" type="int" comment="" />
        <param name="isp_mapped_user_repr" type="str" comment="" />
        <param name="isp_mapped_user_credit" type="float" comment="" />
        <param name="isp_online_users_count" type="int" comment="added in C_dev_326" />
        <param name="isp_locked" type="bool" comment="" />
        <param name="isp_auth_domain" type="str" comment="" />
        <param name="isp_web_domain" type="str" comment="" />
        <param name="isp_email" type="str" comment="" />
        <param name="prevent_neg_deposit_login" type="bool" comment="" />
        <param name="isp_comment" type="str" comment="" />
        <param name="isp_failed_username" type="str" comment="removed in C_dev_326" />
        <param name="isp_failed_user_id" type="str" comment="removed in C_dev_326" />
      </output>
    </method>
    <method name="changeISPDeposit" auth_type="ADMIN" requires_perm="MANIPULATE ISP" comment="">
      <input type="dict">
        <param name="isp_name" type="str" comment="" />
        <param name="deposit_amount" type="float" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="deleteISP" auth_type="ADMIN" requires_perm="DELETE ISP" comment="">
      <input type="dict">
        <param name="isp_name" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getISPTree" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="isp_name" type="str" optional="true" comment="if this param is missing, we use admin's owner ISP" />
      </input>
      <output type="dict" comment="a nested dict {isp_name => sub_tree} which represents ISP tree" />
    </method>
    <method name="getAllISPMappedUserIDs" auth_type="ADMIN" requires_perm="GOD"
      comment="returns list of all Mapped User IDs used in each one of ISPs">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="int" comment="list of Mapped User IDs" />
    </method>
    <method name="getISPPageStyle" auth_type="ADMIN" requires_perm="SEE ISP INFO" comment="">
      <input type="dict">
        <param name="isp_id" type="int" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="isp_id" type="int" comment="" />
        <param name="header_logo_ext" type="str" comment="header logo file extension, for example 'gif'" />
        <param name="header_logo_contents" type="str" comment="base64-encoded data of header logo image" />
        <param name="header_bg_color" type="str" comment="header background color, in html color format, for example 'E0DEDE'" />
        <param name="header_text_color" type="str" comment="header text color, html color format, for example 'E0DEDE'" />
        <param name="footer_logo_ext" type="str" comment="footer logo file extension, for example 'gif'" />
        <param name="footer_logo_contents" type="str" comment="base64-encoded data of footer logo image" />
        <param name="footer_bg_color" type="str" comment="footer background color, in html color format, for example 'E0DEDE'" />
        <param name="footer_text_color" type="str" comment="footer text color, in html color format, for example 'E0DEDE'" />
        <param name="footer_msg" type="str" comment="base64-encoded string of footer message" />
      </output>
    </method>
    <method name="setISPPageStyle" auth_type="ADMIN" requires_perm="CHANGE ISP PAGE STYLE" comment="">
      <input type="dict">
        <param name="isp_id" type="int" comment="" />
        <param name="header_logo_ext" type="str" comment="header logo file extension, for example 'gif'" />
        <param name="header_logo_contents" type="str" comment="base64-encoded data of header logo image" />
        <param name="header_bg_color" type="str" comment="header background color, in html color format, for example 'E0DEDE'" />
        <param name="header_text_color" type="str" comment="header text color, html color format, for example 'E0DEDE'" />
        <param name="footer_logo_ext" type="str" comment="footer logo file extension, for example 'gif'" />
        <param name="footer_logo_contents" type="str" comment="base64-encoded data of footer logo image" />
        <param name="footer_bg_color" type="str" comment="footer background color, in html color format, for example 'E0DEDE'" />
        <param name="footer_text_color" type="str" comment="footer text color, in html color format, for example 'E0DEDE'" />
        <param name="footer_msg" type="str" comment="base64-encoded string of footer message" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="resetISPPageStyle" auth_type="ADMIN" requires_perm="CHANGE ISP PAGE STYLE" comment="">
      <input type="dict">
        <param name="isp_id" type="int" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getISPUsersCredit" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <param name="result" type="dict" dynamic_keys="true" comment="">
          <key type="str_int" comment="ISP ID (string for compatibility)" />
          <value type="float" comment="total credit of users" />
        </param>
      </output>
    </method>
  </handler>
  <handler name="perm" comment="Admin Permission">
    <method name="hasPerm" auth_type="ADMIN" requires_perm="SEE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="perm_name" type="str" comment="" />
        <param name="admin_username" type="str" comment="" />
      </input>
      <output type="bool" comment="true if admin has this permission, false otherwise" />
    </method>
    <method name="canDo" auth_type="ADMIN" requires_perm="SEE ADMIN PERMISSIONS"
      comment="return True if given 'admin_username' canDo given 'perm_name' with given 'params'">
      <input type="dict" comment="">
        <param name="perm_name" type="str" comment="" />
        <param name="admin_username" type="str" comment="" />
        <param name="params" type="list" length="-1" comment="" />
      </input>
      <output type="bool" comment="true if admin can do it, false otherwise" />
    </method>
    <method name="getPermsOfAdmin" auth_type="ADMIN" requires_perm="SEE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="admin_username" type="str" comment="" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="dict" comment="">
          <param name="affected_pages" type="list" item_type="str" comment="list of affected pages" />
          <param name="category" type="choice" comment="">
            <choice value="USER" comment="" />
            <choice value="ADMIN" comment="" />
            <choice value="RAS" comment="" />
            <choice value="CHARGE" comment="" />
            <choice value="GROUP" comment="" />
            <choice value="LOCATION" comment="" />
            <choice value="MISC" comment="" />
            <choice value="SETTING" comment="" />
            <choice value="REPORT" comment="" />
          </param>
          <param name="dependencies" type="list" item_type="str" comment="" />
          <param name="description" type="str" comment="" />
          <param name="name" type="str" comment="permission name" />
          <param name="should_inherit" type="bool" comment="" />
          <param name="tpl_name" type="str" comment="template file name" />
          <param name="value" type="dynamic" comment="type depends on {value_type}" />
          <param name="value_type" type="choice" comment="">
            <choice value="MULTIVALUE" comment="" />
            <choice value="COMPOUND" comment="" />
            <choice value="NOVALUE" comment="" />
          </param>
          <param name="value_candidates" type="list" optional="true" comment="" />
        </item>
      </output>
    </method>
    <method name="getAllPerms" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict" comment="">
      </input>
      <output type="list" length="-1" comment="">
        <item type="dict" comment="">
          <param name="affected_pages" type="list" item_type="str" comment="list of affected pages" />
          <param name="category" type="choice" comment="">
            <choice value="USER" comment="" />
            <choice value="ADMIN" comment="" />
            <choice value="RAS" comment="" />
            <choice value="CHARGE" comment="" />
            <choice value="GROUP" comment="" />
            <choice value="LOCATION" comment="" />
            <choice value="MISC" comment="" />
            <choice value="SETTING" comment="" />
            <choice value="REPORT" comment="" />
          </param>
          <param name="dependencies" type="list" item_type="str" comment="" />
          <param name="description" type="str" comment="" />
          <param name="name" type="str" comment="permission name" />
          <param name="should_inherit" type="bool" comment="" />
          <param name="tpl_name" type="str" comment="template file name" />
          <param name="value_type" type="choice" comment="">
            <choice value="MULTIVALUE" comment="" />
            <choice value="COMPOUND" comment="" />
            <choice value="NOVALUE" comment="" />
          </param>
          <param name="value_candidates" type="list" optional="true" comment="" />
        </item>
      </output>
    </method>
    <method name="getAdminPermVal" auth_type="ADMIN" requires_perm="SEE ADMIN PERMISSIONS"
      comment="returns value of permission {perm_name} for admin {admin_username}">
      <input type="dict" comment="">
        <param name="admin_username" type="str" comment="" />
        <param name="perm_name" type="str" comment="" />
      </input>
      <output type="dynamic" comment="type depends on {perm_name}" />
    </method>
    <method name="changePermission" auth_type="ADMIN" requires_perm="CHANGE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="admin_username" type="str" comment="" />
        <param name="perm_name" type="str" comment="" />
        <param name="perm_value" type="str" comment="" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="delPermission" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict" comment="">
        <param name="admin_username" type="str" comment="" />
        <param name="perm_name" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="delPermissionValue" auth_type="ADMIN" requires_perm="CHANGE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="admin_username" type="str" comment="" />
        <param name="perm_name" type="str" comment="" />
        <param name="perm_value" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="savePermsOfAdminToTemplate" auth_type="ADMIN" requires_perm="CHANGE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="admin_username" type="str" comment="" />
        <param name="perm_template_name" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getListOfPermTemplates" auth_type="ADMIN" requires_perm="CHANGE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of template names" />
    </method>
    <method name="getPermsOfTemplate" auth_type="ADMIN" requires_perm="CHANGE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="perm_template_name" type="str" comment="" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="dict" comment="">
          <param name="affected_pages" type="list" item_type="str" comment="list of affected pages" />
          <param name="category" type="choice" comment="">
            <choice value="USER" comment="" />
            <choice value="ADMIN" comment="" />
            <choice value="RAS" comment="" />
            <choice value="CHARGE" comment="" />
            <choice value="GROUP" comment="" />
            <choice value="LOCATION" comment="" />
            <choice value="MISC" comment="" />
            <choice value="SETTING" comment="" />
            <choice value="REPORT" comment="" />
          </param>
          <param name="dependencies" type="list" item_type="str" comment="" />
          <param name="description" type="str" comment="" />
          <param name="name" type="str" comment="permission name" />
          <param name="should_inherit" type="bool" comment="" />
          <param name="tpl_name" type="str" comment="template file name" />
          <param name="value_type" type="choice" comment="">
            <choice value="MULTIVALUE" comment="" />
            <choice value="COMPOUND" comment="" />
            <choice value="NOVALUE" comment="" />
          </param>
          <param name="value_candidates" type="list" optional="true" comment="" />
        </item>
      </output>
    </method>
    <method name="loadPermTemplateToAdmin" auth_type="ADMIN" requires_perm="CHANGE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="perm_template_name" type="str" comment="" />
        <param name="admin_username" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="deletePermTemplate" auth_type="ADMIN" requires_perm="CHANGE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="perm_template_name" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="loadPermsFromAnotherAdmin" auth_type="ADMIN" requires_perm="CHANGE ADMIN PERMISSIONS" comment="">
      <input type="dict" comment="">
        <param name="admin_username" type="str" comment="" />
        <param name="load_from_admin_username" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
  </handler>
  <handler name="charge" comment="">
    <method name="listCharges" auth_type="ADMIN" requires_perm="" comment="return list of accessible charge names">
      <input type="dict">
        <param name="isp_id" type="str" multi_str="true" comment="comma-seprated. list of isp ids" />
      </input>
      <output type="list" length="-1" item_type="str" comment="list of charge names">
      </output>
    </method>
    <method name="getChargeInfo" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="charge_name" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="charge_id" type="int" comment="" />
        <param name="charge_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="isp_id" type="int" comment="" />
        <param name="isp_name" type="str" comment="" />
        <param name="charge_rules" type="list" length="-1" comment="">
          <item type="dict">
            <param name="charge_rule_id" type="int" comment="" />
            <param name="charge_rule_description" type="str" comment="" />
            <param name="charge_rule_priority" type="int" comment="" />
            <param name="attrs" type="dict" comment="Charge Rule Attributes" />
          </item>
        </param>
      </output>
    </method>
    <method name="addNewCharge" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="">
      <input type="dict">
        <param name="charge_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="isp_name" type="str" comment="" />
      </input>
      <output type="int" comment="Charge ID">
      </output>
    </method>
    <method name="copyCharge" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="just one copy">
      <input type="dict">
        <param name="charge_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="int" comment="New Charge IDs">
      </output>
    </method>
    <method name="copyCharge" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="one or more copies">
      <input type="dict">
        <param name="charge_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="copy_count" type="int" comment="" />
      </input>
      <output type="list" length="-1" item_type="int" comment="New Charge IDs">
      </output>
    </method>
    <method name="updateCharge" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="">
      <input type="dict">
        <param name="charge_id" type="int" comment="" />
        <param name="charge_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="isp_name" type="str" comment="" />

      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="deleteCharge" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="">
      <input type="dict">
        <param name="charge_name" type="str" comment="" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="addNewChargeRule" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="">
      <input type="dict">
        <param name="charge_rule_description" type="str" comment="" />
        <param name="charge_rule_priority" type="int" comment="" />
        <param name="charge_name" type="str" comment="" />
      </input>
      <output type="int" comment="Charge Rule ID">
      </output>
    </method>
    <method name="updateChargeRule" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="">
      <input type="dict">
        <param name="charge_rule_id" type="int" comment="" />
        <param name="charge_rule_description" type="str" comment="" />
        <param name="charge_rule_priority" type="int" comment="" />
        <param name="charge_name" type="str" comment="str" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="deleteChargeRule" auth_type="ADMIN" requires_perm="CHANGE CHARGE" comment="">
      <input type="dict">
        <param name="charge_rule_id" type="int" comment="" />
        <param name="charge_name" type="str" comment="" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="updateChargeRuleAttrs" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="charge_rule_id" type="int" comment="" />
        <param name="charge_name" type="str" comment="" />
        <param name="update_attrs" type="dict" dynamic_keys="true" comment="" />
        <param name="delete_attrs" type="list" length="-1" item_type="str" comment="" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
  </handler>
  <handler name="extra_charge" comment="">
    <method name="getExtraChargeProfileNames" auth_type="ADMIN" requires_perm="SEE EXTRA CHARGE" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of profile names">
      </output>
    </method>
    <method name="addExtraChargeProfile" auth_type="ADMIN" requires_perm="CHANGE EXTRA CHARGE" comment="">
      <input type="dict">
        <param name="profile_name" type="str" />
        <param name="comment" type="str" />
        <param name="effective_hour" type="str" comment="format: HH:MM" />
        <param name="rules" type="list" item_type="dict">
          <item type="dict" comment="rule info dict">
            <param name="start_from" type="choice">
              <choice value="user_creation_date" />
              <choice value="user_real_first_login" />
              <choice value="package_first_login" />
              <choice value="user_expiration_date" />
              <choice value="child_user_activation_fee" />
              <choice value="child_user_creation_date" />
              <choice value="child_active_user_creation_date" />
            </param>
            <param name="description" type="str" />
            <param name="period" type="choice">
              <choice value="monthly" />
              <choice value="start_of_month" />
              <choice value="daily" />
              <choice value="none" />
            </param>
            <param name="period_value" type="choice">
              <choice value="gregorian" />
              <choice value="jalali" />
            </param>
            <param name="change_target" type="choice">
              <choice value="credit" />
              <choice value="deposit" />
              <choice value="night_free" />
            </param>
            <param name="change_action" type="choice">
              <choice value="SET" />
              <choice value="ADD" />
              <choice value="MULTIPLY" />
            </param>
            <param name="amount" type="float" />
            <param name="negate_credit" type="bool" />
            <param name="pay_back" type="bool" />
            <param name="ignore_first_time" type="bool" />
          </item>
        </param>
      </input>
      <output type="int" comment="extra_charge_profile_id" />
    </method>
    <method name="updateExtraChargeProfile" auth_type="ADMIN" requires_perm="CHANGE EXTRA CHARGE" comment="">
      <input type="dict">
        <param name="profile_id" type="int" />
        <param name="profile_name" type="str" />
        <param name="comment" type="str" />
        <param name="effective_hour" type="str" comment="format: HH:MM" />
        <param name="rules" type="list" item_type="dict">
          <item type="dict" comment="rule info dict">
            <param name="rule_id" type="int" default="-1" comment="leave -1 for new rules" />
            <param name="start_from" type="choice">
              <choice value="user_creation_date" />
              <choice value="user_real_first_login" />
              <choice value="package_first_login" />
              <choice value="user_expiration_date" />
              <choice value="child_user_activation_fee" />
              <choice value="child_user_creation_date" />
              <choice value="child_active_user_creation_date" />
            </param>
            <param name="description" type="str" />
            <param name="period" type="choice">
              <choice value="monthly" />
              <choice value="start_of_month" />
              <choice value="daily" />
              <choice value="none" />
            </param>
            <param name="period_value" type="choice">
              <choice value="gregorian" />
              <choice value="jalali" />
            </param>
            <param name="change_target" type="choice">
              <choice value="credit" />
              <choice value="deposit" />
              <choice value="night_free" />
            </param>
            <param name="change_action" type="choice">
              <choice value="SET" />
              <choice value="ADD" />
              <choice value="MULTIPLY" />
            </param>
            <param name="amount" type="float" />
            <param name="negate_credit" type="bool" />
            <param name="pay_back" type="bool" />
            <param name="ignore_first_time" type="bool" />
          </item>
        </param>
      </input>
      <output type="null" />
    </method>
    <method name="deleteExtraChargeProfile" auth_type="ADMIN" requires_perm="CHANGE EXTRA CHARGE" comment="">
      <input type="dict">
        <param name="profile_name" type="str" />
      </input>
      <output type="null"></output>
    </method>
    <method name="getExtraChargeProfiles" auth_type="ADMIN" requires_perm="SEE EXTRA CHARGE" comment="">
      <input type="dict">
      </input>
      <output type="list" item_type="dict">
        <item type="dict" item_type="profile info dict">
          <param name="profile_id" type="int" />
          <param name="profile_name" type="str" />
          <param name="comment" type="str" />
          <param name="effective_hour" type="str" comment="format: HH:MM" />
          <param name="rules" type="list" item_type="dict">
            <item type="dict" comment="rule info dict">
              <param name="rule_id" type="int" />
              <param name="start_from" type="choice">
                <choice value="user_creation_date" />
                <choice value="user_real_first_login" />
                <choice value="package_first_login" />
                <choice value="user_expiration_date" />
                <choice value="child_user_activation_fee" />
                <choice value="child_user_creation_date" />
                <choice value="child_active_user_creation_date" />
              </param>
              <param name="description" type="str" />
              <param name="period" type="choice">
                <choice value="monthly" />
                <choice value="start_of_month" />
                <choice value="daily" />
                <choice value="none" />
              </param>
              <param name="period_value" type="choice">
                <choice value="gregorian" />
                <choice value="jalali" />
              </param>
              <param name="change_target" type="choice">
                <choice value="credit" />
                <choice value="deposit" />
                <choice value="night_free" />
              </param>
              <param name="change_action" type="choice">
                <choice value="SET" />
                <choice value="ADD" />
                <choice value="MULTIPLY" />
              </param>
              <param name="amount" type="float" />
              <param name="negate_credit" type="bool" />
              <param name="pay_back" type="bool" />
              <param name="ignore_first_time" type="bool" />
            </item>
          </param>
        </item>
      </output>
    </method>
    <method name="getExtraChargeProfileByName" auth_type="ADMIN" requires_perm="SEE EXTRA CHARGE" comment="">
      <input type="dict">
        <param name="profile_name" type="str" />
      </input>
      <output type="dict">
        <param name="profile_id" type="int" />
        <param name="profile_name" type="str" />
        <param name="comment" type="str" />
        <param name="effective_hour" type="str" comment="format: HH:MM" />
        <param name="rules" type="list" item_type="dict">
          <item type="dict" comment="rule info dict">
            <param name="rule_id" type="int" />
            <param name="start_from" type="choice">
              <choice value="user_creation_date" />
              <choice value="user_real_first_login" />
              <choice value="package_first_login" />
              <choice value="user_expiration_date" />
              <choice value="child_user_activation_fee" />
              <choice value="child_user_creation_date" />
              <choice value="child_active_user_creation_date" />
            </param>
            <param name="description" type="str" />
            <param name="period" type="choice">
              <choice value="monthly" />
              <choice value="start_of_month" />
              <choice value="daily" />
              <choice value="none" />
            </param>
            <param name="period_value" type="choice">
              <choice value="gregorian" />
              <choice value="jalali" />
            </param>
            <param name="change_target" type="choice">
              <choice value="credit" />
              <choice value="deposit" />
              <choice value="night_free" />
            </param>
            <param name="change_action" type="choice">
              <choice value="SET" />
              <choice value="ADD" />
              <choice value="MULTIPLY" />
            </param>
            <param name="amount" type="float" />
            <param name="negate_credit" type="bool" />
            <param name="pay_back" type="bool" />
            <param name="ignore_first_time" type="bool" />
          </item>
        </param>
      </output>
    </method>
    <method name="getExtraChargeProfileByID" auth_type="ADMIN" requires_perm="SEE EXTRA CHARGE" comment="">
      <input type="dict">
        <param name="profile_id" type="int" />
      </input>
      <output type="dict">
        <param name="profile_id" type="int" />
        <param name="profile_name" type="str" />
        <param name="comment" type="str" />
        <param name="effective_hour" type="str" comment="format: HH:MM" />
        <param name="rules" type="list" item_type="dict">
          <item type="dict" comment="rule info dict">
            <param name="rule_id" type="int" />
            <param name="start_from" type="choice">
              <choice value="user_creation_date" />
              <choice value="user_real_first_login" />
              <choice value="package_first_login" />
              <choice value="user_expiration_date" />
              <choice value="child_user_activation_fee" />
              <choice value="child_user_creation_date" />
              <choice value="child_active_user_creation_date" />
            </param>
            <param name="description" type="str" />
            <param name="period" type="choice">
              <choice value="monthly" />
              <choice value="start_of_month" />
              <choice value="daily" />
              <choice value="none" />
            </param>
            <param name="period_value" type="choice">
              <choice value="gregorian" />
              <choice value="jalali" />
            </param>
            <param name="change_target" type="choice">
              <choice value="credit" />
              <choice value="deposit" />
              <choice value="night_free" />
            </param>
            <param name="change_action" type="choice">
              <choice value="SET" />
              <choice value="ADD" />
              <choice value="MULTIPLY" />
            </param>
            <param name="amount" type="float" />
            <param name="negate_credit" type="bool" />
            <param name="pay_back" type="bool" />
            <param name="ignore_first_time" type="bool" />
          </item>
        </param>
      </output>
    </method>
  </handler>
  <handler name="group" comment="">
    <method name="addNewGroup" auth_type="ADMIN" requires_perm="CHANGE GROUP" comment="">
      <input type="dict">
        <param name="group_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="isp_name" type="str" comment="" />
      </input>
      <output type="int" comment="Group ID" />
    </method>
    <method name="copyGroup" auth_type="ADMIN" requires_perm="CHANGE GROUP" comment="">
      <input type="dict">
        <param name="group_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="isp_name" type="str" comment="" />
        <param name="copy_count" type="int" comment="" />
      </input>
      <output type="list" length="-1" item_type="int" comment="list of Group IDs" />
    </method>
    <method name="listGroups" auth_type="ADMIN" requires_perm=""
              comment="return a list of group names, that requester admin has access to">
      <input type="dict">
        <param name="active_only" type="bool" optional="true" comment="pass true if you only want active groups"/>
        <param name="isp_id" type="str" multi_str="true" comment="comma-seprated. list of isp ids" />
      </input>
      <output type="list" length="-1" item_type="str" comment="list of group names" />
    </method>
    <method name="listGroupsWithIDs" auth_type="ADMIN" requires_perm=""
              comment="return a list of group IDs and names, that requester admin can change service to.
              Added in tag 320">
      <input type="dict">
        <param name="active_only" type="bool" optional="true" comment="pass true if you only want active groups"/>
      </input>
      <output type="list" length="-1" item_type="list" comment="">
        <item type="list" length="2" comment="one group (id and name)">
          <item index="0" type="int" comment="group_id" />
          <item index="1" type="str" comment="group_name" />
        </item>
      </output>
    </method>
    <method name="listGroupInfos" auth_type="ADMIN" requires_perm=""
        comment="return list of group informations, that requester admin has access to.
        Added in tag 320">
      <input type="dict">
        <param name="active_only" type="bool" optional="true" comment="pass true if you only want active groups"/>
        <param name="isp_id" type="str" multi_str="true" comment="comma-seprated. list of isp ids" />
      </input>
      <output type="list" length="-1" item_type="dict" comment="list of group informations">
        <item type="dict" comment="group info dict">
          <param name="group_id" type="int" comment="" />
          <param name="group_name" type="str" comment="" />
          <param name="comment" type="str" comment="" />
          <param name="isp_id" type="int" comment="" />
          <param name="isp_name" type="name" comment="" />
          <param name="raw_attrs" type="dict" comment="dates are gregorian" />
          <param name="attrs" type="dict" comment="dates are based on request date_type" />
        </item>
      </output>
    </method>
    <method name="getGroupCredits" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="dict" dynamic_keys="true" comment="keys are group names, values are group credits">
      </output>
    </method>
    <method name="getGroupUsersCount" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="dict" dynamic_keys="true" comment="keys are group names, values are user count in each group">
      </output>
    </method>
    <method name="getGroupInfo" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict" comment="you must pass group_name or group_id">
        <param name="group_name" type="str" comment="" optional="true"/>
        <param name="group_id" type="str" comment="" optional="true"/>
      </input>
      <output type="dict" comment="">
        <param name="group_id" type="int" comment="" />
        <param name="group_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="isp_id" type="int" comment="" />
        <param name="isp_name" type="name" comment="" />
        <param name="raw_attrs" type="dict" comment="dates are gregorian" />
        <param name="attrs" type="dict" comment="dates are based on request date_type" />
      </output>
    </method>
    <!--
    <method name="getGroupInfoByID" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="group_id" type="int" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="group_id" type="int" comment="" />
        <param name="group_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="isp_id" type="int" comment="" />
        <param name="isp_name" type="name" comment="" />
        <param name="raw_attrs" type="dict" comment="dates are gregorian" />
        <param name="attrs" type="dict" comment="dates are based on request date_type" />
      </output>
    </method>
    !-->
    <method name="updateGroup" auth_type="ADMIN" requires_perm="CHANGE GROUP" comment="">
      <input type="dict">
        <param name="group_id" type="int" comment="" />
        <param name="group_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="updateGroupAttrs" auth_type="ADMIN" requires_perm="CHANGE GROUP" comment="">
      <input type="dict">
        <param name="group_name" type="str" comment="" />
        <param name="attrs" type="dict" comment="" />
        <param name="to_del_attrs" type="list" length="-1" item_type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="delGroup" auth_type="ADMIN" requires_perm="CHANGE GROUP" comment="">
      <input type="dict">
        <param name="group_name" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
  </handler>
  <handler name="ippool" comment="">
    <method name="addNewIPpool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="int" comment="IPPool ID" />
    </method>
    <method name="updateIPpool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_id" type="int" comment="" />
        <param name="ippool_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="getIPpoolNames" auth_type="ADMIN" requires_perm="LIST IPPOOL" comment="">
      <input type="dict">
      </input>
      <output type="list" item_type="str" length="-1" comment="list of ippool names"></output>
    </method>
    <method name="getIPpoolNames" auth_type="ADMIN" requires_perm="LIST IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_type" type="choice" comment="">
          <choice value="load_balancing" comment="Load Balancing IPPool" />
          <choice value="" comment="Not a Load Balancing IPPool" />
        </param>
      </input>
      <output type="list" item_type="str" length="-1" comment="list of ippool names"></output>
    </method>
    <method name="getIPpoolInfo" auth_type="ADMIN" requires_perm="LIST IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_name" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="ippool_id" type="int" comment="" />
        <param name="ippool_name" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="ip_list" type="list" length="-1" item_type="str" comment="list of all IPs" />
        <param name="free" type="list" length="-1" item_type="str" comment="list of free IPs" />
        <param name="used" type="lisr" length="-1" item_type="str" comment="list of used IPs" />
      </output>
    </method>
    <method name="deleteIPpool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_name" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="delIPfromPool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_name" type="str" comment="" />
        <param name="ip" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="forceDelIPfromPool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_name" type="str" comment="" />
        <param name="ip" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="addIPtoPool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_name" type="str" comment="" />
        <param name="ip" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="addNewLoadBalancingIPpool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_name" type="str" comment="" />
        <param name="ippool_comment" type="str" comment="" />
        <param name="balancing_strategy" type="choice" comment="">
          <choice value="distributive" />
          <choice value="fill_first" />
        </param>
        <param name="children_ippool_percentages" type="dict"
                   comment="keys are IPPool Names, values are percentage numbers" />
      </input>
      <output type="null" />
    </method>
    <method name="updateLoadBalancingIPpool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_id" type="int" comment="" />
        <param name="ippool_name" type="str" comment="" />
        <param name="ippool_comment" type="str" comment="" />
        <param name="balancing_strategy" type="choice" comment="">
          <choice value="distributive" />
          <choice value="fill_first" />
        </param>
        <param name="children_ippool_percentages" type="dict"
                   comment="keys are IPPool Names, values are percentage numbers" />
      </input>
      <output type="null" />
    </method>
    <method name="deleteLoadBalancingIPpool" auth_type="ADMIN" requires_perm="CHANGE IPPOOL" comment="">
      <input type="dict">
        <param name="ippool_name" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
  </handler>
  <handler name="log_console" comment="">
    <method name="getConsoleBuffer" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="list" comment="">
        <item type="list" length="7" >
          <item index="0" type="int" comment="Epoch Time" />
          <item index="1" type="str" comment="Formatted Time" />
          <item index="2" type="str" comment="Username" />
          <item index="3" type="str" comment="ISP Name" />
          <item index="4" type="choice" comment="Action">
            <choice value="INTERNET_AUTHENTICATE" />
            <choice value="INTERNET_STOP" />
            <choice value="INTERNET_UPDATE" />
            <choice value="VOIP_AUTHENTICATE" />
            <choice value="VOIP_AUTHORIZE" />
            <choice value="VOIP_STOP" />
            <choice value="VOIP_UPDATE" />
          </item>
          <item index="5" type="str" comment="RAS Description" />
          <item index="6" type="str" comment="Message" />
        </item>
      </output>
    </method>
  </handler>
  <handler name="login" comment="">
    <method name="webLogin" comment="added in C_dev_326">
      <input type="dict">
        <param name="login_auth_type" type="choice" comment="">
          <choice value="ADMIN" />
          <choice value="NORMAL_USER" />
          <choice value="VOIP_USER" />
        </param>
        <param name="login_auth_name" type="str" comment="" />
        <param name="login_auth_pass" type="str" comment="" />
        <param name="auth_remoteaddr" type="str" comment="Remote IP of requester(admin/user)" />
      </input>
      <output type="dict" comment="">
        <param name="session_id" type="str" comment="Session ID" />
        <param name="auth_id" type="str" comment="username of admin/user" />
        <param name="auth_type" type="choice" comment="">
          <choice value="ADMIN" />
          <choice value="NORMAL_USER" />
          <choice value="VOIP_USER" />
        </param>
      </output>
    </method>
    <method name="login" comment="login and return Session ID">
      <input type="dict">
        <param name="login_auth_type" type="choice" comment="">
          <choice value="ADMIN" />
          <choice value="NORMAL_USER" />
          <choice value="VOIP_USER" />
        </param>
        <param name="login_auth_name" type="str" comment="" />
        <param name="login_auth_pass" type="str" comment="" />
        <param name="create_session" type="bool" comment="give true" />
        <param name="auth_remoteaddr" type="str" comment="Remote IP of requester(admin/user)" />
      </input>
      <output type="str" comment="Session ID" />
    </method>
    <method name="login" comment="login without generating session">
      <input type="dict">
        <param name="login_auth_type" type="choice" comment="">
          <choice value="ADMIN" />
          <choice value="NORMAL_USER" />
          <choice value="VOIP_USER" />
        </param>
        <param name="login_auth_name" type="str" comment="" />
        <param name="login_auth_pass" type="str" comment="" />
      </input>
      <output type="bool" comment="returns true" />
    </method>
    <method name="searchAdminLoginHistory" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="admin" type="str" optional="true" comment="admin username, must have access" />
          <param name="login_date_from" type="str" optional="true" requires_param="login_date_from_unit" />
          <param name="login_date_from_unit" type="choice" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="login_date_to" type="str" optional="true" requires_param="login_date_to_unit" />
          <param name="login_date_to_unit" type="choice" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
        </param>
        <param name="_from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="sort_by" type="choice" comment="">
          <choice value="admin_login_history_id" />
          <choice value="login_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="" />
        <param name="report" type="list" length="-1" comment="">
          <item type="dict" comment="">
            <param name="additional_info" type="str" comment="" />
            <param name="admin_id" type="int" comment="" />
            <param name="admin_name" type="str" comment="" />
            <param name="log_id" type="int" comment="" />
            <param name="login_date" type="str" comment="" />
            <param name="login_date_formatted" type="str" comment="" />
            <param name="remote_ip" type="str" comment="" />
            <param name="successful" type="choice" comment="">
              <choice value="t" comment="true" />
              <choice value="f" comment="false" />
            </param>
          </item>
        </param>
      </output>
    </method>
  </handler>
  <handler name="mc" comment="Message Center">
    <method name="getAllMSGTypes" comment="">
      <input type="dict">
      </input>
      <output type="list" item_type="str" comment="">
      </output>
    </method>
    <method name="getActiveMSGTypes" comment="">
      <input type="dict">
        <param name="view_type" type="choice" default="SEND" comment="">
          <choice value="SEND" />
          <choice value="REPORT" />
        </param>
      </input>
      <output type="list" item_type="str" comment="">
      </output>
    </method>
    <method name="getProviderTypes" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of provider types" />
    </method>
    <method name="getProviderInfoByName" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="provider_name" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="provider_name" type="str" comment="" />
        <param name="provider_id" type="int" comment="" />
        <param name="owner_isp_id" type="int" comment="" />
        <param name="provider_type" type="choice" comment="">
          <choice value="Parspooyesh" />
          <choice value="Pishgaman" />
          <choice value="Rahyab" />
          <choice value="I-Email" />
          <choice value="ADP" />
          <choice value="Generic-HTTP" />
          <choice value="IBSngMessaging" />
          <choice value="Magfa" />
          <choice value="MihanSMSCenter" />
          <choice value="AsreFaraErtebat" />
          <choice value="AFE-WS" />
        </param>
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
      </output>
    </method>
    <method name="getProviderAttrsByName" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="provider_name" type="str" comment="" />
      </input>
      <output type="dict" dynamic_keys="true" comment="" />
    </method>
    <method name="addNewProvider" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="provider_type" type="choice" comment="">
          <choice value="Parspooyesh" />
          <choice value="Pishgaman" />
          <choice value="Rahyab" />
          <choice value="I-Email" />
          <choice value="ADP" />
          <choice value="Generic-HTTP" />
          <choice value="IBSngMessaging" />
          <choice value="Magfa" />
          <choice value="MihanSMSCenter" />
          <choice value="AsreFaraErtebat" />
          <choice value="AFE-WS" />
        </param>
        <param name="provider_name" type="str" comment="" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
      </input>
      <output type="dict" comment="">
        <param name="provider_name" type="str" comment="" />
        <param name="provider_id" type="int" comment="" />
        <param name="owner_isp_id" type="int" comment="" />
        <param name="provider_type" type="choice" comment="">
          <choice value="Parspooyesh" />
          <choice value="Pishgaman" />
          <choice value="Rahyab" />
          <choice value="I-Email" />
          <choice value="ADP" />
          <choice value="Generic-HTTP" />
          <choice value="IBSngMessaging" />
          <choice value="Magfa" />
          <choice value="MihanSMSCenter" />
          <choice value="AsreFaraErtebat" />
          <choice value="AFE-WS" />
        </param>
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
      </output>
    </method>
    <method name="updateProviderAttrs" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="provider_name" type="str" comment="" />
        <param name="to_update_attrs" type="dict" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="getAllActiveProviders" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" comment="list of Provide Info dictionaries">
        <item type="dict" comment="Provider Info">
          <param name="provider_name" type="str" comment="" />
          <param name="provider_id" type="int" comment="" />
          <param name="owner_isp_id" type="int" comment="" />
          <param name="provider_type" type="choice" comment="">
            <choice value="Parspooyesh" />
            <choice value="Pishgaman" />
            <choice value="Rahyab" />
            <choice value="I-Email" />
            <choice value="ADP" />
            <choice value="Generic-HTTP" />
            <choice value="IBSngMessaging" />
            <choice value="Magfa" />
            <choice value="MihanSMSCenter" />
            <choice value="AsreFaraErtebat" />
            <choice value="AFE-WS" />
          </param>
          <param name="msg_type" type="choice" comment="">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </item>
      </output>
    </method>
    <method name="removeProvider" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="provider_name" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="resetProviderAttrs" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="provider_name" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="addNewEPGroupToProvider" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="end_point_range" type="str" multi_str="true"
                   comment="comma-seperated end-point groups" />
        <param name="provider_name" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="getAllEPGroupsOfProvider" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="provider_name" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="dict" comment="list of end-point groups">
        <item type="dict">
          <param name="ep_range" type="str" comment="START - END" />
          <!-- FIXME !-->
        </item>
      </output>
    </method>
    <method name="getProviderUnassignedEPs" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="provider_name" type="str" comment="" />
        <param name="count" type="int" comment="" />
        <param name="starts_with" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="dict" comment="list of end-point groups">
        <item type="dict">
          <param name="ep_range" type="str" comment="START - END" />
          <!-- FIXME !-->
        </item>
      </output>
    </method>
    <method name="unAssingAllFromGroup" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="provider_name" type="str" comment="" />
        <param name="end_point_group_id" type="int" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="removeEPGroupFromProvider" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="provider_id" type="int" comment="" />
        <param name="end_point_group_id" type="int" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="getEPGroupUsageInfo" auth_type="ADMIN" requires_perm="CHANGE PROVIDERS" comment="">
      <input type="dict">
        <param name="end_point_group_id" type="int" comment="" />
        <param name="provider_id" type="int" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="end_point_id" type="int" comment="" />
        <param name="end_point_group_id" type="int" comment="" />
        <param name="end_point_repr" type="str" comment="" />
        <param name="assigned_user_id" type="int" comment="" />
      </output>
    </method>
    <method name="receive" auth_type="ADMIN, USER" requires_perm="" comment="">
      <input type="dict">
        <param name="msg_info" type="dict" comment="">
          <param name="dst" type="list" length="-1" item_type="str" comment="list of destinations" />
          <param name="msg_type" type="choice" comment="">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
          <param name="from" type="str" comment="source (sender) address (phone number / email)" />
          <param name="body" type="str" comment="" />
        </param>
      </input>
      <output type="null" />
    </method>
    <method name="enqueueSend" auth_type="USER" comment="without schedule_date">
      <input type="dict">
        <param name="body" type="str" comment="" />
        <param name="destinations" type="str" multi_str="true" comment="comma-seperated list of destinations" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
      </input>
      <output type="null" />
    </method>
    <method name="enqueueSend" auth_type="USER" comment="with schedule_date">
      <input type="dict">
        <param name="body" type="str" comment="" />
        <param name="destinations" type="str" multi_str="true" comment="comma-seperated list of destinations" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
        <param name="schedule_date" type="str_datetime, float" requires_param="schedule_date_unit" comment="" />
        <param name="schedule_date_unit" type="choice" optional="true">
          <choice value="jalali" />
          <choice value="gregorian" />
          <choice value="years" />
          <choice value="months" />
          <choice value="days" />
          <choice value="hours" />
          <choice value="minutes" />
        </param>
      </input>
      <output type="null" />
    </method>
    <method name="adminEnqueueSend" auth_type="ADMIN" requires_perm="" comment="without schedule_date">
      <input type="dict">
        <param name="body" type="str" comment="" />
        <param name="destinations" type="str" multi_str="true" comment="comma-seperated list of destinations" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
      </input>
      <output type="null" />
    </method>
    <method name="adminEnqueueSend" auth_type="ADMIN" requires_perm="" comment="with schedule_date">
      <input type="dict">
        <param name="body" type="str" comment="" />
        <param name="destinations" type="str" multi_str="true" comment="comma-seperated list of destinations" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
        <param name="schedule_date" type="str_datetime, float" requires_param="schedule_date_unit" comment="" />
        <param name="schedule_date_unit" type="choice" optional="true">
          <choice value="jalali" />
          <choice value="gregorian" />
          <choice value="years" />
          <choice value="months" />
          <choice value="days" />
          <choice value="hours" />
          <choice value="minutes" />
        </param>
      </input>
      <output type="null" />
    </method>
    <method name="activateService" auth_type="USER" comment="">
      <input type="dict">
        <param name="cell_number" type="str" comment="" />
      </input>
      <output type="bool" comment="returns true, or raises an error" />
    </method>
    <method name="resetUserActivationCode" auth_type="USER" comment="">
      <input type="dict">
      </input>
      <output type="null" />
    </method>
    <method name="checkActivationCode" auth_type="USER" comment="">
      <input type="dict">
        <param name="activation_code" type="str" comment="" />
      </input>
      <output type="bool" comment="returns true, or raises an error" />
    </method>
    <method name="getUserActivationNumber" auth_type="USER" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <param name="activation_number" type="str" comment="cell_phone of user" />
      </output>
    </method>
    <method name="userSearchReceivedMessage" auth_type="USER" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="message_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="receive_date_from" type="str_datetime, float" optional="true" requires_param="receive_date_from_unit" comment="" />
          <param name="receive_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="receive_date_to" type="str_datetime, float" optional="true" requires_param="receive_date_to_unit" comment="" />
          <param name="receive_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="body" type="str" optional="true" requires_param="body_op" comment="message body" />
          <param name="body_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="from" type="str" optional="true" requires_param="from_op" comment="source (sender) address (phone number / email)" />
          <param name="from_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="msg_types" type="choice" multi_str="false" optional="true" comment="can be a list (of strings) too, for example: msg_types=['SMS', 'E-Mail']">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </param>
        <param name="from" type="int" comment="page start index" />
        <param name="to" type="int" comment="page end index" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="list" length="2" comment="">
        <item index="0" type="int" comment="total number of rows" />
        <item index="1" type="list" length="-1" comment="results">
          <item type="dict" comment="">
            <param name="message_pack_id" type="int" comment="" />
            <param name="message_id" type="int" comment="" />
            <param name="user_id" type="int" comment="" />
            <param name="transfer_date" type="str" comment="date type (gregorian/jalali) depends on input date_type" />
            <param name="source" type="text" comment="source (sender) address" />
            <param name="msg_type" type="choice" comment="">
              <choice value="SMS" />
              <choice value="E-Mail" />
              <choice value="Message To Admin" />
              <choice value="Message To User" />
            </param>
            <param name="body" type="str" comment="" />
            <param name="consumed_credit" type="float" comment="" />
            <param name="user_deleted" type="bool" comment="" />
            <param name="name" type="str" comment="representation of user (internet username for example)" />
          </item>
        </item>
      </output>
    </method>
    <method name="adminSearchReceivedMessage" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="Messages of Users">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="owner_type" value="USER" comment="" />
          <param name="user_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="user_deleted" type="bool" optional="true" comment="" />
          <param name="message_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="receive_date_from" type="str_datetime, float" optional="true" requires_param="receive_date_from_unit" comment="" />
          <param name="receive_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="receive_date_to" type="str_datetime, float" optional="true" requires_param="receive_date_to_unit" comment="" />
          <param name="receive_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="body" type="str" optional="true" requires_param="body_op" comment="message body" />
          <param name="body_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="from" type="str" optional="true" requires_param="from_op" comment="source (sender) address (phone number / email)" />
          <param name="from_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="msg_types" type="choice" multi_str="false" optional="true" comment="can be a list (of strings) too, for example: msg_types=['SMS', 'E-Mail']">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </param>
        <param name="from" type="int" comment="page start index" />
        <param name="to" type="int" comment="page end index" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="list" length="2" comment="">
        <item index="0" type="int" comment="total number of rows" />
        <item index="1" type="list" length="-1" comment="results">
          <item type="dict" comment="">
            <param name="message_pack_id" type="int" comment="" />
            <param name="message_id" type="int" comment="" />
            <param name="user_id" type="int" comment="" />
            <param name="transfer_date" type="str" comment="date type (gregorian/jalali) depends on input date_type" />
            <param name="source" type="text" comment="source (sender) address (phone number / email)" />
            <param name="msg_type" type="choice" comment="">
              <choice value="SMS" />
              <choice value="E-Mail" />
              <choice value="Message To Admin" />
              <choice value="Message To User" />
            </param>
            <param name="body" type="str" comment="" />
            <param name="consumed_credit" type="float" comment="" />
            <param name="user_deleted" type="bool" comment="" />
            <param name="name" type="str" comment="representation of user (internet username for example)" />
          </item>
        </item>
      </output>
    </method>
    <method name="adminSearchReceivedMessage" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="Messages of ISP">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="owner_type" value="ISP" comment="" />
          <param name="isp_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="message_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="receive_date_from" type="str_datetime, float" optional="true" requires_param="receive_date_from_unit" comment="" />
          <param name="receive_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="receive_date_to" type="str_datetime, float" optional="true" requires_param="receive_date_to_unit" comment="" />
          <param name="receive_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="body" type="str" optional="true" requires_param="body_op" comment="message body" />
          <param name="body_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="from" type="str" optional="true" requires_param="from_op" comment="source (sender) address (phone number / email)" />
          <param name="from_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="msg_types" type="choice" multi_str="false" optional="true" comment="can be a list (of strings) too, for example: msg_types=['SMS', 'E-Mail']">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </param>
        <param name="from" type="int" comment="page start index" />
        <param name="to" type="int" comment="page end index" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="list" length="2" comment="">
        <item index="0" type="int" comment="total number of rows" />
        <item index="1" type="list" length="-1" comment="results">
          <item type="dict" comment="">
            <param name="message_pack_id" type="int" comment="" />
            <param name="message_id" type="int" comment="" />
            <param name="user_id" type="int" comment="" />
            <param name="transfer_date" type="str" comment="date type (gregorian/jalali) depends on input date_type" />
            <param name="source" type="text" comment="source (sender) address (phone number / email)" />
            <param name="msg_type" type="choice" comment="">
              <choice value="SMS" />
              <choice value="E-Mail" />
              <choice value="Message To Admin" />
              <choice value="Message To User" />
            </param>
            <param name="body" type="str" comment="" />
            <param name="consumed_credit" type="float" comment="" />
            <param name="user_deleted" type="bool" comment="" />
            <param name="name" type="str" comment="representation of user (internet username for example)" />
          </item>
        </item>
      </output>
    </method>
    <method name="userSearchSentMessage" auth_type="USER" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="message_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="transfer_date_from" type="str_datetime, float" optional="true" requires_param="transfer_date_from_unit" comment="" />
          <param name="transfer_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="transfer_date_to" type="str_datetime, float" optional="true" requires_param="transfer_date_to_unit" comment="" />
          <param name="transfer_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="body" type="str" optional="true" requires_param="body_op" comment="message body" />
          <param name="body_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="to" type="str" optional="true" requires_param="to_op" comment="destination address (phone number/email)" />
          <param name="to_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="msg_types" type="choice" multi_str="false" optional="true" comment="can be a list (of strings) too, for example: msg_types=['SMS', 'E-Mail']">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </param>
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="message_pack_id" type="int" comment="" />
        <param name="message_id" type="int" comment="" />
        <param name="failed" type="bool" comment="" />
        <param name="fail_reason" type="str" comment="" />
        <param name="tracking_id" type="str" comment="" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
        <param name="user_id" type="int" comment="" />
        <param name="transfer_date" type="str" comment="date type (gregorian/jalali) depends on input date_type" />
        <param name="source" type="str" comment="source (sender) address (phone number / email)" />
        <param name="destination" type="str" comment="destination address (phone number / email)" />
        <param name="body" type="str" comment="" />
        <param name="consumed_credit" type="float" comment="" />
      </output>
    </method>
    <method name="adminSearchSentMessage" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="Messages of Users">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="owner_type" value="USER" comment="" />
          <param name="user_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="user_deleted" type="bool" optional="true" comment="" />
          <param name="message_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="transfer_date_from" type="str_datetime, float" optional="true" requires_param="transfer_date_from_unit" comment="" />
          <param name="transfer_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="transfer_date_to" type="str_datetime, float" optional="true" requires_param="transfer_date_to_unit" comment="" />
          <param name="transfer_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="body" type="str" optional="true" requires_param="body_op" comment="message body" />
          <param name="body_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="to" type="str" optional="true" requires_param="to_op" comment="destination address (phone number/email)" />
          <param name="to_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="msg_types" type="choice" multi_str="false" optional="true" comment="can be a list (of strings) too, for example: msg_types=['SMS', 'E-Mail']">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </param>
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="message_pack_id" type="int" comment="" />
        <param name="message_id" type="int" comment="" />
        <param name="failed" type="bool" comment="" />
        <param name="fail_reason" type="str" comment="" />
        <param name="tracking_id" type="str" comment="" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
        <param name="user_id" type="int" comment="" />
        <param name="transfer_date" type="str" comment="date type (gregorian/jalali) depends on input date_type" />
        <param name="source" type="str" comment="source (sender) address (phone number / email)" />
        <param name="destination" type="str" comment="destination address (phone number / email)" />
        <param name="body" type="str" comment="" />
        <param name="consumed_credit" type="float" comment="" />
      </output>
    </method>
    <method name="adminSearchSentMessage" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="Messages of ISP">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="owner_type" value="ISP" comment="" />
          <param name="isp_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="message_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="transfer_date_from" type="str_datetime, float" optional="true" requires_param="transfer_date_from_unit" comment="" />
          <param name="transfer_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="transfer_date_to" type="str_datetime, float" optional="true" requires_param="transfer_date_to_unit" comment="" />
          <param name="transfer_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="body" type="str" optional="true" requires_param="body_op" comment="message body" />
          <param name="body_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="to" type="str" optional="true" requires_param="to_op" comment="destination address (number/email)" />
          <param name="to_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="msg_types" type="choice" multi_str="false" optional="true" comment="can be a list (of strings) too, for example: msg_types=['SMS', 'E-Mail']">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </param>
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="message_pack_id" type="int" comment="" />
        <param name="message_id" type="int" comment="" />
        <param name="failed" type="bool" comment="" />
        <param name="fail_reason" type="str" comment="" />
        <param name="tracking_id" type="str" comment="" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
        <param name="user_id" type="int" comment="" />
        <param name="transfer_date" type="str" comment="date type (gregorian/jalali) depends on input date_type" />
        <param name="source" type="str" comment="" />
        <param name="destination" type="str" comment="" />
        <param name="body" type="str" comment="" />
        <param name="consumed_credit" type="float" comment="" />
      </output>
    </method>
    <method name="adminSearchQueuedMessage" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="owner_type" type="choice" comment="">
            <choice value="ISP" comment="" />
            <choice value="USER" comment="" />
          </param>
          <param name="owner_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="message_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="isp_names" type="str" multi_str="true" optional="true" comment="" />
          <param name="schedule_date_from" type="str_datetime, float" optional="true" requires_param="schedule_date_from_unit" comment="" />
          <param name="schedule_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="schedule_date_to" type="str_datetime, float" optional="true" requires_param="schedule_date_to_unit" comment="" />
          <param name="schedule_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="body" type="str" optional="true" requires_param="body_op" comment="message body" />
          <param name="body_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="to" type="str" optional="true" requires_param="to_op" comment="destination address (number/email)" />
          <param name="to_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="source" type="str" optional="true" requires_param="source_op" comment="source address (number/email)" />
          <param name="source_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="msg_types" type="choice" multi_str="false" optional="true" comment="can be a list (of strings) too, for example: msg_types=['SMS', 'E-Mail']">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </param>
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="message_pack_id" type="int" comment="" />
        <param name="message_id" type="int" comment="" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
        <param name="owner_type" type="choice" comment="">
          <choice value="ISP" comment="" />
          <choice value="USER" comment="" />
        </param>
        <param name="owner_id" type="int" comment="" />
        <param name="scheduled_date" type="str" comment="date type (gregorian/jalali) depends on input date_type" />
        <param name="try_count" type="int" comment="" />
        <param name="source" type="str" comment="" />
        <param name="destination" type="str" comment="" />
        <param name="body" type="str" comment="" />
        <param name="consumed_credit" type="float" comment="" />
        <param name="isp_send_to_all" type="integer" comment="" />
        <param name="in_process" type="bool" comment="" />
      </output>
    </method>
    <method name="userSearchQueuedMessage" auth_type="USER" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="message_ids" type="int" multi_str="true" optional="true" comment="" />
          <param name="schedule_date_from" type="str_datetime, float" optional="true" requires_param="schedule_date_from_unit" comment="" />
          <param name="schedule_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="schedule_date_to" type="str_datetime, float" optional="true" requires_param="schedule_date_to_unit" comment="" />
          <param name="schedule_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="body" type="str" optional="true" requires_param="body_op" comment="message body" />
          <param name="body_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="to" type="str" optional="true" requires_param="to_op" comment="destination address (number/email)" />
          <param name="to_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="source" type="str" optional="true" requires_param="source_op" comment="source address (number/email)" />
          <param name="source_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="msg_types" type="choice" multi_str="false" optional="true" comment="can be a list (of strings) too, for example: msg_types=['SMS', 'E-Mail']">
            <choice value="SMS" />
            <choice value="E-Mail" />
            <choice value="Message To Admin" />
            <choice value="Message To User" />
          </param>
        </param>
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="message_pack_id" type="int" comment="" />
        <param name="message_id" type="int" comment="" />
        <param name="msg_type" type="choice" comment="">
          <choice value="SMS" />
          <choice value="E-Mail" />
          <choice value="Message To Admin" />
          <choice value="Message To User" />
        </param>
        <param name="owner_type" type="choice" comment="">
          <choice value="ISP" comment="" />
          <choice value="USER" comment="" />
        </param>
        <param name="owner_id" type="int" comment="" />
        <param name="scheduled_date" type="str" comment="date type (gregorian/jalali) depends on input date_type" />
        <param name="try_count" type="int" comment="" />
        <param name="source" type="str" comment="" />
        <param name="destination" type="str" comment="" />
        <param name="body" type="str" comment="" />
        <param name="consumed_credit" type="float" comment="" />
        <param name="isp_send_to_all" type="integer" comment="" />
        <param name="in_process" type="bool" comment="" />
      </output>
    </method>
    <method name="userSearchMessagesForDialer" auth_type="USER" comment="">
      <input type="dict">
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="order_by" type="choice" comment="" >
          <choice value="message_id" />
          <choice value="msg_type" />
          <choice value="transfer_date" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="messages" type="list" length="-1" item_type="list" comment="">
          <item type="list" length="5" comment="">
            <item index="0" type="int" comment="message_id" />
            <item index="1" type="int" comment="user_id" />
            <item index="2" type="str" comment="body" />
            <item index="3" type="str_datetime" comment="transfer_date" />
            <item index="4" type="str" comment="source" />
          </item>
        </param>
      </output>
    </method>
    <method name="getUserLastMessageID" auth_type="USER" comment="">
      <input type="dict">
      </input>
      <output type="int" comment="Message ID of Last Message" />
    </method>
    <method name="dialerDeleteMessage" auth_type="USER" comment="">
      <input type="dict">
        <param name="message_id" type="int" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="userDeleteMessage" auth_type="USER" comment="">
      <input type="dict">
        <param name="message_ids" type="int" multi_str="true" comment="" />
        <param name="target_box" type="choice" comment="">
          <choice value="USER_SEND" />
          <choice value="USER_RECEIVE" />
          <choice value="QUEUE" />
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="adminDeleteMessage" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="">
      <input type="dict">
        <param name="message_ids" type="int" multi_str="true" comment="" />
        <param name="target_box" type="choice" comment="">
          <choice value="USER_SEND" />
          <choice value="USER_RECEIVE" />
          <choice value="ISP_SEND" />
          <choice value="ISP_RECEIVE" />
          <choice value="QUEUE" />
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="userCancelScheduledMessages" auth_type="USER" comment="">
      <input type="dict">
        <param name="message_ids" type="int" multi_str="true" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="adminCancelScheduledMessages" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="">
      <input type="dict">
        <param name="message_ids" type="int" multi_str="true" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="updateAdminRemoteRequestAttrs" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="">
      <input type="dict">
        <param name="remote_report_status" type="str" comment="" />
        <param name="remote_report_command" type="str" comment="" />
        <param name="allowed_requesters" type="str" multi_str="true" comment="" />
        <param name="attrs" type="dict" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="updateUserRemoteRequestAttrs" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="">
      <input type="dict">
        <param name="remote_report_status" type="str" comment="" />
        <param name="remote_report_command" type="str" comment="" />
        <param name="allowed_requesters" type="str" multi_str="true" comment="" />
        <param name="attrs" type="dict" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getRemoteRequestAttrs" auth_type="ADMIN" requires_perm="SEE MESSAGE CENTER REPORTS" comment="">
      <input type="dict">
        <param name="type" type="choice" comment="">
          <choice value="ADMIN" />
          <choice value="USER" />
        </param>
      </input>
      <output type="dict" comment="">
      </output>
    </method>
  </handler>
  <handler name="notification" comment="">
    <method name="getNotificationProfileNames" auth_type="ADMIN" requires_perm=""
      comment="list of notification profile names that admin has access to.">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of profile names" />
    </method>
    <method name="getNotificationProfiles" auth_type="ADMIN" requires_perm="CHANGE NOTIFICATION"
    comment="list of notification profile informations that admin has access to.">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="dict" comment="list of profile infos">
        <item type="dict" comment="profile info">
          <param name="notification_profile_id" type="int" comment="" />
          <param name="notification_profile_name" type="str" comment="" />
          <param name="notification_profile_comment" type="str" comment="" />
          <param name="notification_rules" type="list" length="-1" item_type="dict" comment="">
            <item type="dict" comment="rule dict">
              <param name="notification_rule_id" type="int" comment="" />
              <param name="notification_profile_id" type="int" comment="" />
              <param name="notification_threshold" type="float" comment="" />
              <param name="message_type" type="choice" comment="">
                <choice value="sms" />
                <choice value="email" />
                <choice value="email_to_isp" />
                <choice value="ibsng_message" />
                <choice value="url" comment="call a URL specified in `message_template`, added in tag 312" />
                <choice value="user_event" comment="added in tag (NO TAG YET)"/>
              </param>
              <param name="notification_type" type="choice" comment="">
                 <choice value="expiration_date" />
                 <choice value="credit" />
                 <choice value="renew" />
                 <choice value="birth_day" />
                 <choice value="online_payment" />
                 <choice value="first_login" />
                 <choice value="credit_change" />
                 <choice value="deposit_change" />
              </param>
              <param name="message_template" type="str" comment="" />
            </item>
          </param>
          <param name="isp_id" type="int" comment="" />
          <param name="owner_isp_name" type="str" comment="" />
        </item>
      </output>
    </method>
    <method name="addNotificationProfile" auth_type="ADMIN" requires_perm="CHANGE NOTIFICATION" comment="">
      <input type="dict">
        <param name="notification_profile_name" type="str" comment="" />
        <param name="notification_profile_comment" type="str" comment="" />
      </input>
      <output type="int" comment="the new notification_profile_id" />
    </method>
    <method name="updateNotificationProfile" auth_type="ADMIN" requires_perm="CHANGE NOTIFICATION" comment="">
      <input type="dict">
        <param name="notification_profile_id" type="int" comment="" />
        <param name="notification_profile_name" type="str" comment="" />
        <param name="notification_profile_comment" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getNotificationProfileByName" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="notification_profile_name" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="notification_profile_id" type="int" comment="" />
        <param name="notification_profile_name" type="str" comment="" />
        <param name="notification_profile_comment" type="str" comment="" />
        <param name="notification_rules" type="list" length="-1" item_type="dict" comment="">
          <item type="dict" comment="rule dict">
            <param name="notification_rule_id" type="int" comment="" />
            <param name="notification_profile_id" type="int" comment="" />
            <param name="notification_threshold" type="float" comment="" />
            <param name="message_type" type="choice" comment="">
              <choice value="sms" />
              <choice value="email" />
              <choice value="email_to_isp" />
              <choice value="ibsng_message" />
              <choice value="url" comment="call a URL specified in `message_template`, added in tag 312" />
              <choice value="user_event" comment="added in tag (NO TAG YET)"/>
            </param>
            <param name="notification_type" type="choice" comment="">
               <choice value="expiration_date" />
               <choice value="credit" />
               <choice value="renew" />
               <choice value="birth_day" />
               <choice value="online_payment" />
               <choice value="first_login" />
               <choice value="credit_change" />
               <choice value="deposit_change" />
            </param>
            <param name="message_template" type="str" comment="" />
          </item>
        </param>
        <param name="isp_id" type="int" comment="" />
        <param name="owner_isp_name" type="str" comment="" />
      </output>
    </method>
    <method name="deleteNotificationProfile" auth_type="ADMIN" requires_perm="CHANGE NOTIFICATION" comment="">
      <input type="dict" comment="">
        <param name="notification_profile_name" type="" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="addNotificationRule" auth_type="ADMIN" requires_perm="CHANGE NOTIFICATION" comment="">
      <input type="dict">
        <param name="notification_profile_id" type="int" comment="" />
        <param name="notification_type" type="choice" comment="">
          <choice value="expiration_date" />
          <choice value="credit" />
          <choice value="renew" />
          <choice value="birth_day" />
          <choice value="online_payment" />
          <choice value="first_login" />
          <choice value="credit_change" />
          <choice value="deposit_change" />
        </param>
        <param name="notification_threshold" type="float" comment="" />
        <param name="message_type" type="choice" comment="">
          <choice value="sms" />
          <choice value="email" />
          <choice value="email_to_isp" />
          <choice value="ibsng_message" />
          <choice value="url" comment="call a URL specified in `message_template`, added in tag 312" />
          <choice value="user_event" comment="added in tag (NO TAG YET)"/>
        </param>
        <param name="message_template" type="str" comment="" />
      </input>
      <output type="null" />
    </method>
    <method name="deleteNotificationRule" auth_type="ADMIN" requires_perm="CHANGE NOTIFICATION">
      <input type="dict">
        <param name="notification_profile_id" type="int" />
        <param name="notification_rule_id" type="int" />
      </input>
      <output type="null" />
    </method>
    <method name="updateNotificationRule" auth_type="ADMIN" requires_perm="CHANGE NOTIFICATION">
      <input type="dict">
        <param name="notification_rule_id" type="int" />
        <param name="notification_profile_id" type="int" />
        <param name="notification_type" type="choice">
          <choice value="expiration_date" />
          <choice value="credit" />
          <choice value="renew" />
          <choice value="birth_day" />
          <choice value="online_payment" />
          <choice value="first_login" />
          <choice value="credit_change" />
          <choice value="deposit_change" />
        </param>
        <param name="notification_threshold" type="float" />
        <param name="message_type" type="choice">
          <choice value="sms" />
          <choice value="email" />
          <choice value="email_to_isp" />
          <choice value="ibsng_message" />
          <choice value="url" comment="call a URL specified in `message_template`, added in tag 312" />
          <choice value="user_event" comment="added in tag (NO TAG YET)"/>
        </param>
        <param name="message_template" type="str" />
      </input>
      <output type="null" />
    </method>
  </handler>
  <handler name="online_payment" comment="">
    <method name="getAvailableGatewayTypes" auth_type="USER, ADMIN"
          comment="list of gateway names that are available and usable for user">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="choice" comment="list of gateway types">
        <item type="choice" comment="gateway type">
          <choice value="Eghtesad_Novin" />
          <choice value="Melli-shahparak" />
          <choice value="Mellat-Shaparak" />
          <choice value="Parsian" />
          <choice value="Pasargad" />
          <choice value="Saman" />
          <choice value="Tejarat" />
          <choice value="ZarinPal" />
        </item>
      </output>
    </method>
    <method name="getPaymentAmountSuggestions" auth_type="USER, ADMIN" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="list" comment="">
        <item type="list" length="4">
          <item index="0" type="choice" comment="suggestion_id">
            <choice type="str" value="renew_credit" />
            <choice type="str" value="recharge_credit" />
            <choice type="str" value="arbitrary" />
            <choice type="str" value="recharge_from_renew_deposit" comment="only in C_invoice branch"/>
          </item>
          <item index="1" type="float" comment="amount"></item>
          <item index="2" type="str" comment="description"></item>
          <item index="3" type="bool" comment="editable"></item>
        </item>
      </output>
    </method>
    <method name="preparePayment" auth_type="USER, ADMIN"
      comment="Added in tag C_dev_326">
      <input type="dict">
        <param name="gateway_type" type="choice" comment="">
          <choice value="Melli-shahparak" />
          <choice value="Eghtesad_Novin" />
          <choice value="Mellat-Shaparak" />
          <choice value="Parsian" />
          <choice value="Pasargad" />
          <choice value="Saman" />
          <choice value="Tejarat" />
          <choice value="ZarinPal" />
        </param>
        <param name="amount" type="float" comment="" />
        <param name="unique_id" type="str" comment="" />
        <param name="callback_url" type="str" comment="" />
        <param name="attributes" type="dict" comment="you can put all the parameters you want here">
          <param name="no_action" optional="true" type=""
            comment="if you put this in attributes, we won't perform any action (credit / deposit / invoice) after verifying payment" />
        </param>
      </input>
      <output type="dict" comment="">
        <param name="web_attributes" type="dict" comment="" />
        <param name="redirect_method" type="choice" comment="">
          <choice value="POST" />
          <choice value="GET" />
        </param>
        <param name="url" type="str" comment="Redirect URL" />
      </output>
    </method>
    <method name="verifyPayment" auth_type="USER, ADMIN"
      comment="Added in tag C_dev_326">
      <input type="dict">
        <param name="unique_id" type="str" comment="" />
        <param name="web_attributes" type="dict" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="amount" type="float" comment="" />
        <param name="ref_id" type="str" comment="Bank Reference ID" />
      </output>
    </method>
    <method name="addGateway" auth_type="ADMIN" requires_perm="CHANGE ONLINE PAYMENT"
      comment="Added in tag C_dev_326">
      <input type="dict">
        <param name="gateway_name" type="str" comment=""></param>
        <param name="gateway_type" type="choice" comment="">
          <choice type="str" value="Eghtesad_Novin" />
          <choice type="str" value="Mellat-Shaparak" />
          <choice type="str" value="Melli-shahparak" />
          <choice type="str" value="Parsian" />
          <choice type="str" value="Pasargad" />
          <choice type="str" value="Saman" />
          <choice type="str" value="Tejarat" />
          <choice type="str" value="ZarinPal" />
        </param>
        <param name="owner_isp_name" type="str" comment=""></param>
        <param name="priority" type="int" comment=""></param>
        <param name="comment" type="str" comment=""></param>
        <param name="attributes" type="dict" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="updateGateway" auth_type="ADMIN" requires_perm="CHANGE ONLINE PAYMENT"
      comment="Added in tag C_dev_326">
      <input type="dict">
        <param name="gateway_id" type="int" comment=""></param>
        <param name="gateway_name" type="str" comment=""></param>
        <param name="owner_isp_name" type="str" comment=""></param>
        <param name="priority" type="int" comment=""></param>
        <param name="comment" type="str" comment=""></param>
        <param name="attributes" type="dict" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="deleteGateway" auth_type="ADMIN" requires_perm="CHANGE ONLINE PAYMENT"
      comment="Added in tag C_dev_326">
      <input type="dict">
        <param name="gateway_name" type="str" comment=""></param>
      </input>
      <output type="null">
      </output>
    </method>
    <method name="getAllGatewayTypes" auth_type="ADMIN" requires_perm="SEE ONLINE PAYMENT"
      comment="Added in tag C_dev_326">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of gateway types">
      </output>
    </method>
    <method name="getAllGatewayNames" auth_type="ADMIN" requires_perm="SEE ONLINE PAYMENT"
      comment="Added in tag C_dev_326">
      <input type="dict">
      </input>
      <output type="dict">
        <param name="gateway_names" type="list" length="-1" item_type="str" comment="list of gateway names" />
      </output>
    </method>
    <method name="getAllGatewayInfos" auth_type="ADMIN" requires_perm="CHANGE ONLINE PAYMENT"
      comment="Added in tag C_dev_326">
      <input type="dict">
      </input>
      <output type="list" item_type="dict">
        <item type="dict" comment="gateway attributes">
          <param name="gateway_id" type="int" comment=""></param>
          <param name="gateway_name" type="str" comment=""></param>
          <param name="gateway_type" type="choice" comment="">
            <choice type="str" value="Eghtesad_Novin" />
            <choice type="str" value="Mellat-Shaparak" />
            <choice type="str" value="Melli-shahparak" />
            <choice type="str" value="Parsian" />
            <choice type="str" value="Pasargad" />
            <choice type="str" value="Saman" />
            <choice type="str" value="Tejarat" />
            <choice type="str" value="ZarinPal" />
          </param>
          <param name="isp_id" type="int" comment=""></param>
          <param name="owner_isp_name" type="str" comment=""></param>
          <param name="priority" type="int" comment=""></param>
          <param name="comment" type="str" comment=""></param>
          <param name="attributes" type="dict" comment=""></param>
          <param name="dict_attributes" type="dict" comment=""></param>
        </item>
      </output>
    </method>
    <method name="purgePayment" auth_type="ADMIN" requires_perm="PURGE ONLINE PAYMENT"
      comment="Added in tag C_dev_326">
      <input type="dict">
        <param name="payment_id" type="int" comment="">
        </param>
      </input>
      <output type="dict">
      </output>
    </method>
  </handler>
  <handler name="ras" comment="">
    <method name="addNewRas" auth_type="ADMIN" requires_perm="CHANGE RAS" comment="">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
        <param name="ras_type" type="choice" comment="">
          <choice value="ACS2" />
          <choice value="Cisco-IN" />
          <choice value="CiscoVPDN" />
          <choice value="Generic" />
          <choice value="Huawei" />
          <choice value="Mikrotik" />
          <choice value="Ruckus" />
          <choice value="ZTE" />
        </param>
        <param name="radius_secret" type="str" comment="" />
        <param name="ras_description" type="str" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="int" comment="Ras ID" />
    </method>
    <method name="getRasInfo" auth_type="ADMIN" requires_perm="GET RAS INFORMATION" comment="">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="ras_ip" type="str" comment="" />
        <param name="ras_id" type="int" comment="" />
        <param name="ras_description" type="str" comment="" />
        <param name="radius_secret" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="ras_type" type="choice" comment="">
          <choice value="ACS2" />
          <choice value="Cisco-IN" />
          <choice value="CiscoVPDN" />
          <choice value="Generic" />
          <choice value="Huawei" />
          <choice value="Mikrotik" />
          <choice value="Ruckus" />
          <choice value="ZTE" />
        </param>
        <param name="attrs" type="dict" comment="" />
      </output>
    </method>
    <method name="getActiveRasIPs" auth_type="ADMIN" requires_perm="" comment="All active RASs, without type filter">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of Ras IPs" />
    </method>
    <method name="getActiveRasIPs" auth_type="ADMIN" requires_perm="" comment="Active RASs with specific type">
      <input type="dict">
        <param name="type_filter" type="str" multi_str="true" comment="" />
      </input>
      <output type="list" length="-1" item_type="str" comment="list of Ras IPs" />
    </method>
    <method name="getRasDescriptions" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="str" comment="Ras Description" />
          <item index="1" type="str" comment="Ras IP" />
        </item>
      </output>
    </method>
    <method name="getInActiveRases" auth_type="ADMIN" requires_perm="LIST RAS" comment="List of inactive RAS IPs">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of RAS IPs" />
    </method>
    <method name="getRasTypes" auth_type="ADMIN" requires_perm="GET RAS INFORMATION" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="str" comment="list of RAS types" />
    </method>
    <method name="getRasAttributes" auth_type="ADMIN" requires_perm="GET RAS INFORMATION" comment="">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
      </input>
      <output type="dict" comment="RAS Attributes" />
    </method>
    <method name="updateRasInfo" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="ras_id" type="int" comment="" />
        <param name="ras_ip" type="str" comment="" />
        <param name="ras_type" type="choice" comment="">
          <choice value="ACS2" />
          <choice value="Cisco-IN" />
          <choice value="CiscoVPDN" />
          <choice value="Generic" />
          <choice value="Huawei" />
          <choice value="Mikrotik" />
          <choice value="Ruckus" />
          <choice value="ZTE" />
        </param>
        <param name="radius_secret" type="str" comment="" />
        <param name="ras_description" type="str" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="updateAttributes" auth_type="ADMIN" requires_perm="CHANGE RAS" comment="">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
        <param name="attrs" type="dict" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="resetAttributes" auth_type="ADMIN" requires_perm="CHANGE RAS" comment="">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="deActiveRas" auth_type="ADMIN" requires_perm="CHANGE RAS" comment="Deactivate RAS">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="deleteRas" auth_type="ADMIN" requires_perm="CHANGE RAS" comment="">
      <input type="dict">
        <param name="ras_id" type="int" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="reActiveRas" auth_type="ADMIN" requires_perm="CHANGE RAS" comment="">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getRasIPpools" auth_type="ADMIN" requires_perm="GET RAS INFORMATION"
              comment="Returns a sorted list of IPPool names for a RAS">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="str" comment="list of IPPool names" />
    </method>
    <method name="addIPpoolToRas" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
        <param name="ippool_name" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="delIPpoolFromRas" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="ras_ip" type="str" comment="" />
        <param name="ippool_name" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
  </handler>
  <handler name="report" comment="">
    <method name="getOnlineUsers" auth_type="ADMIN" requires_perm="SEE ONLINE USERS" comment="">
      <input type="dict">
        <param name="normal_sort_by" type="choice" comment="">
          <choice value="user_id" />
          <choice value="normal_username" />
          <choice value="login_time_epoch" />
          <choice value="duration_secs" />
          <choice value="ras_description" />
          <choice value="ras_ip" />
          <choice value="isp_name" />
          <choice value="unique_id_val" />
          <choice value="current_credit" />
          <choice value="group_name" />
          <choice value="attrs_remote_ip" />
          <choice value="in_bytes" />
          <choice value="out_bytes" />
          <choice value="in_rate" />
          <choice value="out_rate" />
          <choice value="attrs_mac" />
          <choice value="attrs_station_ip" />
          <choice value="attrs_caller_id" />
        </param>
        <param name="normal_desc" type="bool" comment="descending" />
        <param name="voip_sort_by" type="choice" comment="">
          <choice value="user_id" />
          <choice value="voip_username" />
          <choice value="login_time_epoch" />
          <choice value="duration_secs" />
          <choice value="ras_ip" />
          <choice value="ras_description" />
          <choice value="isp_name" />
          <choice value="unique_id_val" />
          <choice value="current_credit" />
          <choice value="called_number" />
          <choice value="prefix_name" />
          <choice value="group_name" />
          <choice value="attrs_caller_id" />
          <choice value="attrs_caller_ip" />
          <choice value="attrs_called_ip" />
          <choice value="voip_provider" />
        </param>
        <param name="voip_desc" type="bool" comment="descending" />
        <param name="conds" type="dict" comment="">
          <param name="dnis" type="str" multi_str="true" optional="true" comment="" />
          <param name="isp_ids" type="list" length="-1" item_type="int" optional="true" comment="" />
          <param name="isp_names" type="list" length="-1" item_type="str"  optional="true" comment="" />
          <param name="ras_ips" type="list" length="-1" item_type="str" optional="true" comment="" />
          <param name="remote_ip" type="str" multi_str="true" optional="true" comment="" />
          <param name="username_starts_with" type="list or string" optional="true"
                     comment="Array('A', 'B', 'C'), is like 'ABC'" />
        </param>
      </input>
      <output type="list" length="2" comment="">
        <item index="0" type="list" length="-1" comment="Internet Onlines">
          <item type="dict" comment="a dict representing one internet online user">
            <param name="user_id" type="int" comment="" />
            <param name="service" value="Internet" comment="" />
            <param name="ras_ip" type="str" comment="" />
            <param name="ras_description" type="str" comment="" />
            <param name="unique_id" type="str" comment="" />
            <param name="unique_id_val" type="str" comment="" />
            <param name="login_time" type="str" comment="formatted login time, depends on input date_type" />
            <param name="login_time_epoch" type="int" comment="epoch time of login" />
            <param name="duration_secs" type="int" comment="duration in seconds" />
            <param name="attrs" type="dict" comment="" />
            <param name="isp_id" type="int" comment="" />
            <param name="isp_name" type="str" comment="" />
            <param name="current_credit" type="float" comment="" />
            <param name="group_name" type="str" comment="" />
            <param name="name" type="str" optional="true" comment="user's real name" />
            <param name="charge_name" type="str" optional="true" comment="charge name of user" />
          </item>
        </item>
        <item index="1" type="list" length="-1" comment="VoIP Onlines">
          <item type="dict" comment="a dict representing one internet online user">
            <param name="user_id" type="int" comment="" />
            <param name="service" value="VoIP" comment="" />
            <param name="ras_ip" type="str" comment="" />
            <param name="ras_description" type="str" comment="" />
            <param name="unique_id" type="str" comment="" />
            <param name="unique_id_val" type="str" comment="" />
            <param name="login_time" type="str" comment="formatted login time, depends on input date_type" />
            <param name="login_time_epoch" type="int" comment="epoch time of login" />
            <param name="duration_secs" type="int" comment="duration in seconds" />
            <param name="attrs" type="dict" comment="" />
            <param name="isp_id" type="int" comment="" />
            <param name="isp_name" type="str" comment="" />
            <param name="current_credit" type="float" comment="" />
            <param name="group_name" type="str" comment="" />
            <param name="name" type="str" optional="true" comment="user's real name, if set" />
            <param name="charge_name" type="str" optional="true" comment="charge name of user, if set" />
          </item>
        </item>
      </output>
    </method>
    <method name="getOnlineUsersCountLoop" auth_type="ADMIN" requires_perm="SEE ONLINE USERS" comment="with conditions (filters)">
      <input type="dict">
        <param name="conds" optional="true" type="dict" comment="the same as getOnlineUsers" />
      </input>
      <output type="dict" comment="">
        <param name="internet_onlines" type="int" comment="" />
        <param name="voip_onlines" type="int" comment="" />
        <param name="re_onlined" type="int" comment="" />
        <param name="accounting_not_started" type="int" comment="" />
        <param name="failed_users" type="int" comment="" />
        <param name="idle_users" type="int" comment="" />
        <param name="ras_acct_not_started" type="dict" dynamic_keys="true" comment="dict of ras_desc => count" />
        <param name="ras_description" type="dict" dynamic_keys="true" comment="dict of ras_desc => count" />
        <param name="ras_counters" type="dict" dynamic_keys="true" comment="dict of ras_desc => count_dict">
          <key type="str" comment="Ras ID" />
          <value type="dict" comment="a dict containing per-state user count" >
            <param name="ras_total" type="int" comment="total number of onlines in this ras" />
            <param name="ras_reonlined" type="int" comment="number of re-onlined users in this ras" />
            <param name="ras_failed" type="int" comment="number of failed users in this ras" />
            <param name="ras_acct_not_started" type="int" comment="number of onlines users with Accounting Not Started status in this ras" />
            <param name="ras_idle" type="int" comment="number of Idle users in this ras" />
          </value>
        </param>
        <param name="group_name" type="dict" comment="a dict of group_name => count" />
        <param name="isp_name" type="dict" comment="a dict of isp_name => count" />
      </output>
    </method>
    <method name="getOnlineUsersCount" auth_type="ADMIN" requires_perm="SEE ONLINE USERS" comment="without conditions">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <param name="internet_onlines" type="int" comment="" />
        <param name="voip_onlines" type="int" comment="" />
        <param name="re_onlined" type="int" comment="" />
        <param name="accounting_not_started" type="int" comment="" />
        <param name="failed_users" type="int" comment="" />
        <param name="idle_users" type="int" comment="" />
        <param name="ras_acct_not_started" type="dict" dynamic_keys="true" comment="dict of ras_desc => count" />
        <param name="ras_description" type="dict" dynamic_keys="true" comment="dict of ras_desc => count" />
        <param name="ras_counters" type="dict" dynamic_keys="true" comment="dict of ras_desc => count_dict">
          <key type="str" comment="Ras ID" />
          <value type="dict" comment="a dict containing per-state user count" >
            <param name="ras_total" type="int" comment="total number of onlines in this ras" />
            <param name="ras_reonlined" type="int" comment="number of re-onlined users in this ras" />
            <param name="ras_failed" type="int" comment="number of failed users in this ras" />
            <param name="ras_acct_not_started" type="int" comment="number of onlines users with Accounting Not Started status in this ras" />
            <param name="ras_idle" type="int" comment="number of Idle users in this ras" />
          </value>
        </param>
        <param name="group_name" type="dict" comment="a dict of group_name => count" />
        <param name="isp_name" type="dict" comment="a dict of isp_name => count" />
      </output>
    </method>
    <method name="getConnections" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="Get Connection Logs By Admin">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="user_ids" type="str" multi_str="true" optional="true" comment="" />
          <param name="connection_username" type="str" multi_str="false" optional="true" comment="internet username" />
          <param name="connection_voip_username" type="str" multi_str="false" optional="true" comment="voip username" />
          <param name="not_username" type="str" multi_str="false" optional="true" comment="" />
          <param name="username" type="str" multi_str="false" optional="true" comment="" />
          <param name="voip_username" type="str" multi_str="false" optional="true" comment="" />
          <param name="serial" type="str" multi_str="false" optional="true" comment="" />
          <param name="sub_service_name" type="str" optional="true" comment="subservice name" />
          <param name="sub_service_charging" type="str" optional="true" comment="subservice charging" />
          <param name="isp_names" type="str" multi_str="true" optional="true" comment="" />
	  <param name="sub_service_name" type="str" optional="true" comment="subservice name that user picked" />
	  <param name="sub_service_charging" type="str" optional="true" comment="charging type for subservice" />
          <param name="credit_used" type="float" optional="true" requires_param="credit_used_op" comment="" />
          <param name="credit_used_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="duration" type="int" optional="true" requires_param="duration_op" comment="in seconds" />
          <param name="duration_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="login_time_from" type="str_datetime, float" optional="true" requires_param="login_time_from_unit" comment="" />
          <param name="login_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="login_time_to" type="str_datetime, float" optional="true" requires_param="login_time_to_unit" comment="" />
          <param name="login_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="logout_time_from" type="str_datetime, float" optional="true" requires_param="logout_time_from_unit" comment="" />
          <param name="logout_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="logout_time_to" type="str_datetime, float" optional="true" requires_param="logout_time_to_unit" comment="" />
          <param name="logout_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="successful" type="choice" optional="true" comment="">
            <choice value="yes" />
            <choice value="no" />
          </param>
          <param name="service" type="choice" optional="true" comment="">
            <choice value="Internet" />
            <choice value="VoIP" />
          </param>
          <param name="ras_ip" type="str" multi_str="true" optional="true" comment="" />
          <param name="ras_desc" type="str" multi_str="true" optional="true" comment="" />
          <param name="group_name" type="str" multi_str="true" optional="true" comment="" />
          <param name="exclude_isp_mapped_users" type="true_if_exists" optional="true" comment="" />
          <param name="caller_id" type="str" optional="true" requires_param="caller_id_op" comment="" />
          <param name="caller_id_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="mac" type="str" multi_str="true" optional="true" comment="" />
          <param name="port" type="str" multi_str="true" optional="true" comment="" />
          <param name="dnis" type="str" multi_str="true" optional="true" comment="" />
          <param name="assigned_ip" type="str" multi_str="true" optional="true" comment="" />
          <param name="station_ip" type="str" multi_str="true" optional="true" comment="" />
          <param name="cpm" type="float" optional="true" requires_param="cpm_op" comment="" />
          <param name="cpm_op" type="choice" optional="true" comment="comes with cpm">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="called_number" type="str" optional="true" requires_param="called_number_op" comment="" />
          <param name="called_number_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="prefix_name" type="str" optional="true" requires_param="prefix_name_op" comment="" />
          <param name="prefix_name_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="called_ip" type="str" multi_str="true" optional="true" />
          <param name="voip_provider_names" type="list, str" multi_str="false" optional="true" comment="list of provider names, or string of one provider name" />
          <param name="remote_ip" type="str" multi_str="true" optional="true" />
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="user_id" />
          <choice value="credit_used" />
          <choice value="login_time" />
          <choice value="logout_time" />
          <choice value="successful" />
          <choice value="service" />
          <choice value="ras_id" />
          <choice value="connection_log_id" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="number of total rows" />
        <param name="total_credit" type="float" comment="sum of total rows credit" />
        <param name="total_duration" type="int" comment="sum of total rows duration, in seconds" />
        <param name="total_in_bytes" type="int" comment="sum of total download, in bytes" />
        <param name="total_out_bytes" type="int" comment="sum of total upload, in bytes" />
        <param name="report" type="list" length="-1" comment="report data of specified page (from - to)">
          <item type="dict">
            <!-- for user and admin: !-->
            <param name="connection_log_id" type="int" comment="" />
            <param name="user_id" type="str" comment="" />
            <param name="service_type" type="choice" comment="">
              <choice value="Internet" />
              <choice value="VoIP" />
            </param>
            <param name="login_time_formatted" type="str_datetime" comment="" />
            <param name="logout_time_formatted" type="str_datetime" comment="" />
            <param name="duration_seconds" type="int" comment="" />
            <param name="credit_used" type="float" comment="" />
            <param name="before_credit" type="float" comment="" />
            <param name="successful" type="bool" comment="" />
            <param name="caller_id" type="str" optional="true" comment="" />
            <param name="cpm" type="float" optional="true" comment="" />
            <param name="persistent_lan" type="str" optional="true" comment="" />
            <param name="kill_reason" type="str" comment="" />
            <param name="username" type="str" optional="true" comment="" />
            <param name="remote_ip" type="str" optional="true" comment="" />
            <param name="mac" type="str" optional="true" comment="" />
            <param name="bytes_in" type="int" optional="true" comment="" />
            <param name="bytes_out" type="int" optional="true" comment="" />
            <param name="station_ip" type="str" optional="true" comment="" />
            <param name="details" type="list" length="-1" comment="" />
            <!-- for user and admin: VoIP params: !-->
            <param name="voip_username" type="str" optional="true" comment="" />
            <param name="prefix_name" type="str" optional="true" comment="" />
            <param name="prefix_cpm" type="float" optional="true" comment="" />
            <param name="called_number" type="str" optional="true" comment="" />

            <!-- for admin only: !-->
            <param name="charge_rule_details" type="list" length="-1" comment="" />
            <param name="ras_description" type="str" comment="" />
            <param name="ras_ip" type="str" comment="" />
            <param name="serial" type="str" comment="" />
            <!-- for admin only: VoIP params !-->
            <param name="dnis" type="str" optional="true" comment="" />
            <param name="called_ip" type="str" optional="true" comment="" />
            <param name="prefix_code" type="str" optional="true" comment="" />
            <param name="voip_provider_id" type="int" optional="true" comment="" />
            <param name="voip_provider" type="str" optional="true" comment="" />
            <param name="voip_provider_ip" type="str" optional="true" comment="" />
            <param name="voip_provider_credit_used" type="float" optional="true" comment="" />
            <param name="voip_provider_prefix_name" type="str" optional="true" comment="" />
            <param name="voip_provider_prefix_code" type="str" optional="true" comment="" />
            <param name="voip_provider_cpm" type="float" optional="true" comment="" />
            <param name="disconnect_cause" type="str" optional="true" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="getConnections" auth_type="USER" comment="Get Connection Logs By Admin">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="credit_used" type="float" optional="true" requires_param="credit_used_op" comment="" />
          <param name="credit_used_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="duration" type="int" optional="true" requires_param="duration_op" comment="in seconds" />
          <param name="duration_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="login_time_from" type="str_datetime, float" optional="true" requires_param="login_time_from_unit" comment="" />
          <param name="login_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="login_time_to" type="str_datetime, float" optional="true" requires_param="login_time_to_unit" comment="" />
          <param name="login_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="logout_time_from" type="str_datetime, float" optional="true" requires_param="logout_time_from_unit" comment="" />
          <param name="logout_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="logout_time_to" type="str_datetime, float" optional="true" requires_param="logout_time_to_unit" comment="" />
          <param name="logout_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>

          <param name="successful" type="choice" optional="true" comment="">
            <choice value="yes" />
            <choice value="no" />
          </param>
          <param name="service" type="choice" optional="true" comment="">
            <choice value="Internet" />
            <choice value="VoIP" />
          </param>
          <param name="ras_ip" type="str" multi_str="true" optional="true" comment="" />
          <param name="ras_desc" type="str" multi_str="true" optional="true" comment="" />
          <param name="caller_id" type="str" optional="true" requires_param="caller_id_op" comment="" />
          <param name="caller_id_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="mac" type="str" multi_str="true" optional="true" comment="" />
          <param name="port" type="str" multi_str="true" optional="true" comment="" />
          <param name="dnis" type="str" multi_str="true" optional="true" comment="" />
          <param name="assigned_ip" type="str" multi_str="true" optional="true" comment="" />
          <param name="station_ip" type="str" multi_str="true" optional="true" comment="" />
          <param name="cpm" type="float" optional="true" requires_param="cpm_op" comment="" />
          <param name="cpm_op" type="choice" optional="true" comment="comes with cpm">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="called_number" type="str" optional="true" requires_param="called_number_op" comment="" />
          <param name="called_number_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="prefix_name" type="str" optional="true" requires_param="prefix_name_op" comment="" />
          <param name="prefix_name_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="called_ip" type="str" multi_str="true" optional="true" />
          <param name="voip_provider_names" type="list, str" multi_str="false" optional="true" comment="list of provider names, or string of one provider name" />
          <param name="remote_ip" type="str" multi_str="true" optional="true" />
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="credit_used" />
          <choice value="login_time" />
          <choice value="logout_time" />
          <choice value="successful" />
          <choice value="service" />
          <choice value="ras_id" />
          <choice value="connection_log_id" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="number of total rows" />
        <param name="total_credit" type="float" comment="sum of total rows credit" />
        <param name="total_duration" type="int" comment="sum of total rows duration, in seconds" />
        <param name="total_in_bytes" type="int" comment="sum of total download, in bytes" />
        <param name="total_out_bytes" type="int" comment="sum of total upload, in bytes" />
        <param name="report" type="list" length="-1" comment="report data of specified page (from - to)">
          <item type="dict">
            <param name="connection_log_id" type="int" comment="" />
            <param name="user_id" type="str" comment="" />
            <param name="service_type" type="choice" comment="">
              <choice value="Internet" />
              <choice value="VoIP" />
            </param>
            <param name="login_time_formatted" type="str_datetime" comment="" />
            <param name="logout_time_formatted" type="str_datetime" comment="" />
            <param name="duration_seconds" type="int" comment="" />
            <param name="credit_used" type="float" comment="" />
            <param name="before_credit" type="float" comment="" />
            <param name="successful" type="bool" comment="" />
            <param name="caller_id" type="str" optional="true" comment="" />
            <param name="cpm" type="float" optional="true" comment="" />
            <param name="persistent_lan" type="str" optional="true" comment="" />
            <param name="kill_reason" type="str" comment="" />
            <param name="username" type="str" optional="true" comment="" />
            <param name="remote_ip" type="str" optional="true" comment="" />
            <param name="mac" type="str" optional="true" comment="" />
            <param name="bytes_in" type="int" optional="true" comment="" />
            <param name="bytes_out" type="int" optional="true" comment="" />
            <param name="station_ip" type="str" optional="true" comment="" />
            <param name="details" type="list" length="-1" comment="" />
            <!-- VoIP params: !-->
            <param name="voip_username" type="str" optional="true" comment="" />
            <param name="prefix_name" type="str" optional="true" comment="" />
            <param name="prefix_cpm" type="float" optional="true" comment="" />
            <param name="called_number" type="str" optional="true" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="getINConnections" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method, plus caller_id" >
          <param name="caller_id" type="str" optional="false" />
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="credit_used" />
          <choice value="login_time" />
          <choice value="logout_time" />
          <choice value="successful" />
          <choice value="service" />
          <choice value="ras_id" />
          <choice value="connection_log_id" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="the same as 'report.getConnections' method">
      </output>
    </method>
    <method name="getDurations" auth_type="ADMIN, USER" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
      </input>
      <output type="list" length="6" comment="">
        <item index="0" type="list" length="2" comment="">
          <item index="0" type="int" value="0" comment="seconds" />
          <item index="1" type="int"
                    comment="number of connections with duration &lt; 60s" />
        </item>
        <item index="1" type="list" length="2" comment="">
          <item index="0" type="int" value="60" comment="seconds" />
          <item index="1" type="int"
                    comment="number of connections with 60s &lt;= duration &lt; 300s" />
        </item>
        <item index="2" type="list" length="2" comment="">
          <item index="0" type="int" value="300" comment="seconds" />
          <item index="1" type="int"
                    comment="number of connections with 300s &lt;= duration &lt; 3600s" />
        </item>
        <item index="3" type="list" length="2" comment="">
          <item index="0" type="int" value="3600" comment="seconds" />
          <item index="1" type="int"
                    comment="number of connections with 3600s &lt;= duration &lt; 7200s" />
        </item>
        <item index="4" type="list" length="2" comment="">
          <item index="0" type="int" value="7200" comment="seconds" />
          <item index="1" type="int"
                    comment="number of connections with 7200s &lt;= duration &lt; 14400s" />
        </item>
        <item index="5" type="list" length="2" comment="">
          <item index="0" type="int" value="14400" comment="seconds" />
          <item index="1" type="int"
                    comment="number of connections with duration &gt;= 14400s" />
        </item>
      </output>
    </method>
    <method name="getGroupUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="str" comment="group_name" />
          <item index="1" type="int" comment="total duration of connections, in seconds" />
        </item>
      </output>
    </method>
    <method name="getRasUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="str" comment="ras_ip" />
          <item index="1" type="int" comment="total duration of connections, in seconds" />
        </item>
      </output>
    </method>
    <method name="getVoIPDisconnectCauses" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="int" comment="diconnect_cause_code" />
          <item index="1" type="int" comment="number of connections" />
        </item>
      </output>
    </method>
    <method name="getSuccessfulCounts" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
      </input>
      <output type="list" length="2" comment="">
        <item index="0" type="int" comment="number of successful connections" />
        <item index="1" type="int" comment="number of failed connections" />
      </output>
    </method>
    <method name="getISPUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="str" comment="isp_name" />
          <item index="1" type="int" comment="total duration of connections, in seconds" />
        </item>
      </output>
    </method>
    <method name="getInOutUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="order_by" type="choice" comment="">
          <choice value="creation_date" />
          <choice value="normal_username" />
          <choice value="sum" />
        </param>
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="Number of total rows" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="list" length="-1" item_type="list">
            <item type="list" length="9">
              <item index="0" type="int" comment="user_id" />
              <item index="1" type="dict" comment="user dict">
                <param name="group_name" type="str" comment="" />
                <param name="isp_name" type="str" comment="" />
                <param name="creation_date" type="str_datetime" comment="" />
                <param name="user_name" type="str" comment="" />
                <param name="serial" type="str" comment="" />
                <param name="name" type="str" comment="user's real name" />
              </item>
              <item index="2" type="float" comment="total_download_bytes" />
              <item index="3" type="float" comment="total_upload_bytes" />
            </item>
          </item>
        </param>
      </output>
    </method>
    <method name="getCreditUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="order_by" type="choice" comment="">
          <choice value="creation_date" />
          <choice value="normal_username" />
          <choice value="sum" />
        </param>
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="Number of total rows" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="list" length="-1" item_type="list">
            <item type="list" length="9">
              <item index="0" type="int" comment="user_id" />
              <item index="1" type="dict" comment="user dict">
                <param name="group_name" type="str" comment="" />
                <param name="isp_name" type="str" comment="" />
                <param name="creation_date" type="str_datetime" comment="" />
                <param name="user_name" type="str" comment="" />
                <param name="serial" type="str" comment="" />
                <param name="name" type="str" comment="user's real name" />
              </item>
              <item index="2" type="float" comment="total_credit_used" />
            </item>
          </item>
        </param>
      </output>
    </method>
    <method name="getDurationUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="order_by" type="choice" comment="">
          <choice value="creation_date" />
          <choice value="normal_username" />
          <choice value="sum" />
        </param>
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="Number of total rows" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="list" length="-1" item_type="list">
            <item type="list" length="9">
              <item index="0" type="int" comment="user_id" />
              <item index="1" type="dict" comment="user dict">
                <param name="group_name" type="str" comment="" />
                <param name="isp_name" type="str" comment="" />
                <param name="creation_date" type="str_datetime" comment="" />
                <param name="user_name" type="str" comment="" />
                <param name="serial" type="str" comment="" />
                <param name="name" type="str" comment="user's real name" />
              </item>
              <item index="2" type="float" comment="total_duration, seconds" />
            </item>
          </item>
        </param>
      </output>
    </method>
	<method name="getConnectionUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
	  <input type="dict">
		<param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
		<param name="from" type="int" comment="start index, for pagination" />
		<param name="to" type="int" comment="end index, for pagination" />
		<param name="order_by" type="choice" comment="">
		  <choice value="total_credit" />
		  <choice value="total_duration" />
		  <choice value="total_in_bytes" />
		  <choice value="total_out_bytes" />
		</param>
	  </input>
	  <output type="dict" comment="">
		<param name="total_rows" type="int" comment="Number of total rows" />
		<param name="report" type="list" length="-1" comment="">
		  <item type="dict">
			<param name="user_id" type="int" comment="User ID" />
			<param name="username" type="str" comment="User username" />
			<param name="serial" type="str" comment="User serial" />
			<param name="group_name" type="str" comment="User group name" />
			<param name="isp_name" type="str" comment="User ISP name" />
			<param name="creation_date" type="str" comment="User creation date" />
			<param name="name" type="str" comment="Name of user" />
			<param name="sub_service_name" type="Sub service name" comment="" />
			<param name="sub_service_charging" type="str" comment="Sub service charging name" />
			<param name="seb_service_qos" type="str" comment="Sub service QOS name" />
			<param name="total_credit" type="int" comment="Total credit" />
			<param name="total_duration" type="int" comment="Total duration" />
			<param name="total_in_bytes" type="" comment="Total in bytes" />
			<param name="total_out_bytes" type="" comment="Total out bytes" />
		  </item>
		</param>
	  </output>
	</method>
    <method name="getExpiredUsers" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as user.searchUser" />
        <param name="from" type="int" comment="start index" />
        <param name="to" type="int" comment="end index" />
        <param name="sort_by" type="choice" comment="">
          <choice value="user_id" />
          <choice value="normal_username" />
          <choice value="voip_username" />
          <choice value="group_id" />
          <choice value="owner_id" comment="owner isp id" />
          <choice value="creation_date" />
          <choice value="credit" />
          <choice value="deposit" />
          <choice value="first_login" />
          <choice value="serial" />
          <choice value="serial_numeric" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="total_rows"></item>
        <item index="1" type="float" comment="credit_sum"></item>
        <item index="2" type="list" item_type="int" length="-1" comment="user_ids: list of User IDs"></item>
      </output>
    </method>
    <method name="getPrefixNameUsage" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method">
          <param name="group_by" optional="false" type="list" length="-1" comment="">
            <item type="choice" comment="">
              <choice value="prefix_name" comment="" />
              <choice value="prefix_code" comment="" />
              <choice value="cpm" comment="" />
              <choice value="voip_provider_id" comment="" />
              <choice value="voip_provider_prefix_code" comment="" />
              <choice value="voip_provider_prefix_name" comment="" />
            </item>
          </param>
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="order_by" type="choice" comment="">
          <choice value="prefix_name" />
          <choice value="prefix_code" />
          <choice value="duration_sum" />
          <choice value="count" />
          <choice value="credit" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="total number of rows" />
        <param name="report" type="list" length="-1" comment="">
          <item type="list" length="13" comment="">
            <item index="0" type="str" comment="prefix_code" />
            <item index="1" type="str" comment="prefix_name" />
            <item index="2" type="float" comment="cpm" />
            <item index="3" type="int" comment="voip_provider_id" />
            <item index="4" type="str" comment="voip_provider_prefix_code" />
            <item index="5" type="str" comment="voip_provider_prefix_name" />
            <item index="6" type="float" comment="duration_sum" />
            <item index="7" type="int" comment="count" />
            <item index="8" type="float" comment="credit" />
            <item index="9" type="float" comment="acd" />
            <item index="10" type="float" comment="asr" />
            <item index="11" type="float" comment="voip_provider_avg_cpm" />
            <item index="11" type="float" comment="voip_provider_credit" />
          </item>
        </param>
      </output>
    </method>
    <method name="getCallerIDUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="order_by" type="choice" comment="">
          <choice value="creation_date" />
          <choice value="normal_username" />
          <choice value="sum" />
        </param>
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="Number of total rows" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="list" length="-1" item_type="list">
            <item type="list" length="4">
              <item index="0" type="str" comment="caller_id" />
              <item index="1" type="float" comment="duration_seconds" />
              <item index="2" type="float" comment="credit_usage" />
              <item index="3" type="int" comment="count" />
            </item>
          </item>
        </param>
      </output>
    </method>
    <method name="getCreditChanges" auth_type="ADMIN" requires_perm="SEE CREDIT CHANGES" comment="Admin-View Credit Changes">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="user_ids" type="str" multi_str="true" optional="true" comment="" />
          <param name="voip_username" type="str" optional="true" comment="" />
          <param name="admin" type="str" optional="true" comment="admin username" />
          <param name="action" type="list" length="-1" optional="true" comment="">
            <item type="choice">
              <choice value="ADD_USER" comment="" />
              <choice value="CHANGE_CREDIT" comment="" />
              <choice value="DEL_USER" comment="" />
              <choice value="RELATIVE_PERIODIC_CHANGE_CREDIT" comment="" />
              <choice value="ABSOLUTE_PERIODIC_CHANGE_CREDIT" comment="" />
              <choice value="RENEW_TRASH_REMAINING" comment="" />
              <choice value="RENEW" comment="" />
              <choice value="CREDIT_TRANSFER" comment="" />
              <choice value="RECEIVE_CREDIT_TRANSFER" comment="" />
              <choice value="ONLINE_PAYMENT" comment="" />
              <choice value="AUTO_RENEW" comment="" />
              <choice value="RECHARGE" comment="" />
              <choice value="AUTO_RECHARGE" comment="" />
              <choice value="TEMPORARY_EXTEND" comment="" />
              <choice value="TEMPORARY_EXTEND_TRASH_REMAINING" comment="" />
              <choice value="EXTRA_CHARGE" comment="" />
              <choice value="VOUCHER" comment="" />
            </item>
          </param>
          <param name="per_user_credit" type="float" optional="true" requires_param="per_user_credit_op" comment="" />
          <param name="per_user_credit_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="isp_credit" type="float" optional="true" requires_param="isp_credit_op" comment="" />
          <param name="isp_credit_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="change_time_from" type="str_datetime, float" optional="true" requires_param="change_time_from_unit" comment="" />
          <param name="change_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="change_time_to" type="str_datetime, float" optional="true" requires_param="change_time_to_unit" comment="" />
          <param name="change_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="remote_addr" type="str" optional="true" comment="" />
          <param name="comment" type="str" optional="true" comment="" />
          <param name="deleted_internet_username" type="str" optional="true" comment="internet username that is deleted" />
          <param name="deleted_voip_username" type="str" optional="true" comment="voip username that is deleted" />

        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="change_time" />
          <choice value="per_user_credit" />
          <choice value="isp_credit" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="Number of total rows" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="list" length="-1" item_type="dict">
            <item type="dict" comment="">
              <param name="action" type="int" comment="action id, 0..16" />
              <param name="action_text" type="choice" comment="action name">
                <choice value="ADD_USER" comment="" />
                <choice value="CHANGE_CREDIT" comment="" />
                <choice value="DEL_USER" comment="" />
                <choice value="RELATIVE_PERIODIC_CHANGE_CREDIT" comment="" />
                <choice value="ABSOLUTE_PERIODIC_CHANGE_CREDIT" comment="" />
                <choice value="RENEW_TRASH_REMAINING" comment="" />
                <choice value="RENEW" comment="" />
                <choice value="CREDIT_TRANSFER" comment="" />
                <choice value="RECEIVE_CREDIT_TRANSFER" comment="" />
                <choice value="ONLINE_PAYMENT" comment="" />
                <choice value="AUTO_RENEW" comment="" />
                <choice value="RECHARGE" comment="" />
                <choice value="AUTO_RECHARGE" comment="" />
                <choice value="TEMPORARY_EXTEND" comment="" />
                <choice value="TEMPORARY_EXTEND_TRASH_REMAINING" comment="" />
                <choice value="EXTRA_CHARGE" comment="" />
                <choice value="VOUCHER" comment="" />
              </param>
              <param name="admin_id" type="int" comment="Admin ID" />
              <param name="admin_name" type="str" comment="Admin Username" />
              <param name="change_time" type="str" comment="date and time of change, gregorian" />
              <param name="change_time_formatted" type="str" comment="date and time of change, depending on input date_type" />
              <param name="comment" type="str" comment="" />
              <param name="credit_change_id" type="int" comment="" />
              <param name="isp_credit" type="float" comment="" />
              <param name="isp_id" type="int" comment="" />
              <param name="isp_name" type="str" comment="" />
              <param name="per_user_credit" type="float" comment="" />
              <param name="remote_addr" type="str" comment="Remote IP of Admin" />
              <param name="transaction_id" type="int" comment="" />
              <param name="user_ids" type="list" length="-1" item_type="list" comment="">
                <item type="list" length="2">
                  <item index="0" type="int" comment="user_id" />
                  <item index="1" type="float" comment="changed credit (for this user)" />
                </item>
              </param>
            </item>
          </item>
        </param>
        <param name="total_per_user_credit" type="float" comment="" />
        <param name="total_admin_credit" type="float" comment="" />
      </output>
    </method>
    <method name="getCreditChanges" auth_type="ADMIN" requires_perm="SEE CREDIT CHANGES" comment="User-View Credit Changes">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="user_view" value="" optional="false" comment="" />
          <param name="user_ids" type="str" multi_str="true" optional="true" comment="" />
          <param name="voip_username" type="str" optional="true" comment="" />
          <param name="admin" type="str" optional="true" comment="admin username" />
          <param name="action" type="list" length="-1" optional="true" comment="">
            <item type="choice">
              <choice value="ADD_USER" comment="" />
              <choice value="CHANGE_CREDIT" comment="" />
              <choice value="DEL_USER" comment="" />
              <choice value="RELATIVE_PERIODIC_CHANGE_CREDIT" comment="" />
              <choice value="ABSOLUTE_PERIODIC_CHANGE_CREDIT" comment="" />
              <choice value="RENEW_TRASH_REMAINING" comment="" />
              <choice value="RENEW" comment="" />
              <choice value="CREDIT_TRANSFER" comment="" />
              <choice value="RECEIVE_CREDIT_TRANSFER" comment="" />
              <choice value="ONLINE_PAYMENT" comment="" />
              <choice value="AUTO_RENEW" comment="" />
              <choice value="RECHARGE" comment="" />
              <choice value="AUTO_RECHARGE" comment="" />
              <choice value="TEMPORARY_EXTEND" comment="" />
              <choice value="TEMPORARY_EXTEND_TRASH_REMAINING" comment="" />
              <choice value="EXTRA_CHARGE" comment="" />
              <choice value="VOUCHER" comment="" />
            </item>
          </param>
          <param name="per_user_credit" type="float" optional="true" requires_param="per_user_credit_op" comment="" />
          <param name="per_user_credit_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="isp_credit" type="float" optional="true" requires_param="isp_credit_op" comment="" />
          <param name="isp_credit_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="change_time_from" type="str_datetime, float" optional="true" requires_param="change_time_from_unit" comment="" />
          <param name="change_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="change_time_to" type="str_datetime, float" optional="true" requires_param="change_time_to_unit" comment="" />
          <param name="change_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="remote_addr" type="str" optional="true" comment="" />
          <param name="comment" type="str" optional="true" comment="" />
          <param name="deleted_internet_username" type="str" optional="true" comment="internet username that is deleted" />
          <param name="deleted_voip_username" type="str" optional="true" comment="voip username that is deleted" />
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="change_time" />
          <choice value="per_user_credit" />
          <choice value="isp_credit" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="Number of total rows" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="list" length="-1" item_type="dict">
            <item type="dict" comment="">
              <param name="action" type="int" comment="action id, 0..16" />
              <param name="action_text" type="choice" comment="action name">
                <choice value="ADD_USER" comment="" />
                <choice value="CHANGE_CREDIT" comment="" />
                <choice value="DEL_USER" comment="" />
                <choice value="RELATIVE_PERIODIC_CHANGE_CREDIT" comment="" />
                <choice value="ABSOLUTE_PERIODIC_CHANGE_CREDIT" comment="" />
                <choice value="RENEW_TRASH_REMAINING" comment="" />
                <choice value="RENEW" comment="" />
                <choice value="CREDIT_TRANSFER" comment="" />
                <choice value="RECEIVE_CREDIT_TRANSFER" comment="" />
                <choice value="ONLINE_PAYMENT" comment="" />
                <choice value="AUTO_RENEW" comment="" />
                <choice value="RECHARGE" comment="" />
                <choice value="AUTO_RECHARGE" comment="" />
                <choice value="TEMPORARY_EXTEND" comment="" />
                <choice value="TEMPORARY_EXTEND_TRASH_REMAINING" comment="" />
                <choice value="EXTRA_CHARGE" comment="" />
                <choice value="VOUCHER" comment="" />
              </param>
              <param name="admin_id" type="int" comment="Admin ID" />
              <param name="admin_name" type="str" comment="Admin Username" />
              <param name="before_credit" type="float" comment="" />
              <param name="change_time" type="str" comment="date and time of change, gregorian" />
              <param name="change_time_formatted" type="str" comment="date and time of change, depending on input date_type" />
              <param name="comment" type="str" comment="" />
              <param name="credit_change_id" type="int" comment="" />
              <param name="group" type="str" comment="group_name" />
              <param name="group_id" type="int" comment="" />
              <param name="isp_credit" type="float" comment="" />
              <param name="isp_id" type="int" comment="" />
              <param name="isp_name" type="str" comment="" />
              <param name="name" type="str" comment="user's full name" />
              <param name="per_user_credit" type="float" comment="" />
              <param name="remote_addr" type="str" comment="Remote IP of Admin" />
              <param name="serial" type="str" comment="user's serial" />
              <param name="transaction_id" type="int" comment="" />
              <param name="user_id" type="int" comment="" />
              <param name="username" type="str" comment="" />
            </item>
          </item>
        </param>
        <param name="total_per_user_credit" type="float" comment="" />
        <param name="total_admin_credit" type="float" comment="" />
      </output>
    </method>
    <method name="getCreditChanges" auth_type="USER" requires_perm="SEE CREDIT CHANGES" comment="User-View Credit Changes by User">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="user_view" value="" optional="false" comment="" />
          <param name="action" type="list" length="-1" optional="true" comment="">
            <item type="choice">
              <choice value="ADD_USER" comment="" />
              <choice value="CHANGE_CREDIT" comment="" />
              <choice value="DEL_USER" comment="" />
              <choice value="RELATIVE_PERIODIC_CHANGE_CREDIT" comment="" />
              <choice value="ABSOLUTE_PERIODIC_CHANGE_CREDIT" comment="" />
              <choice value="RENEW_TRASH_REMAINING" comment="" />
              <choice value="RENEW" comment="" />
              <choice value="CREDIT_TRANSFER" comment="" />
              <choice value="RECEIVE_CREDIT_TRANSFER" comment="" />
              <choice value="ONLINE_PAYMENT" comment="" />
              <choice value="AUTO_RENEW" comment="" />
              <choice value="RECHARGE" comment="" />
              <choice value="AUTO_RECHARGE" comment="" />
              <choice value="TEMPORARY_EXTEND" comment="" />
              <choice value="TEMPORARY_EXTEND_TRASH_REMAINING" comment="" />
              <choice value="EXTRA_CHARGE" comment="" />
              <choice value="VOUCHER" comment="" />
            </item>
          </param>
          <param name="per_user_credit" type="float" optional="true" requires_param="per_user_credit_op" comment="" />
          <param name="per_user_credit_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="change_time_from" type="str_datetime, float" optional="true" requires_param="change_time_from_unit" comment="" />
          <param name="change_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="change_time_to" type="str_datetime, float" optional="true" requires_param="change_time_to_unit" comment="" />
          <param name="change_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="remote_addr" type="str" optional="true" comment="" />
          <param name="comment" type="str" optional="true" comment="" />
          <param name="deleted_internet_username" type="str" optional="true" comment="internet username that is deleted" />
          <param name="deleted_voip_username" type="str" optional="true" comment="voip username that is deleted" />
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="change_time" />
          <choice value="per_user_credit" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="Number of total rows" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="list" length="-1" item_type="dict">
            <item type="dict" comment="">
              <param name="action" type="int" comment="action id, 0..16" />
              <param name="action_text" type="choice" comment="action name">
                <choice value="ADD_USER" comment="" />
                <choice value="CHANGE_CREDIT" comment="" />
                <choice value="DEL_USER" comment="" />
                <choice value="RELATIVE_PERIODIC_CHANGE_CREDIT" comment="" />
                <choice value="ABSOLUTE_PERIODIC_CHANGE_CREDIT" comment="" />
                <choice value="RENEW_TRASH_REMAINING" comment="" />
                <choice value="RENEW" comment="" />
                <choice value="CREDIT_TRANSFER" comment="" />
                <choice value="RECEIVE_CREDIT_TRANSFER" comment="" />
                <choice value="ONLINE_PAYMENT" comment="" />
                <choice value="AUTO_RENEW" comment="" />
                <choice value="RECHARGE" comment="" />
                <choice value="AUTO_RECHARGE" comment="" />
                <choice value="TEMPORARY_EXTEND" comment="" />
                <choice value="TEMPORARY_EXTEND_TRASH_REMAINING" comment="" />
                <choice value="EXTRA_CHARGE" comment="" />
                <choice value="VOUCHER" comment="" />
              </param>
              <param name="before_credit" type="float" comment="" />
              <param name="change_time" type="str" comment="date and time of change, gregorian" />
              <param name="change_time_formatted" type="str" comment="date and time of change, depending on input date_type" />
              <param name="credit_change_id" type="int" comment="" />
              <param name="group" type="str" comment="group_name" />
              <param name="group_id" type="int" comment="" />
              <param name="name" type="str" comment="user's full name" />
              <param name="per_user_credit" type="float" comment="" />
              <param name="serial" type="str" comment="user's serial" />
              <param name="transaction_id" type="int" comment="" />
              <param name="username" type="str" comment="" />
            </item>
          </item>
        </param>
        <param name="total_per_user_credit" type="float" comment="" />
        <param name="total_isp_credit" type="float" comment="" />
      </output>
    </method>
    <method name="saveCreditChanges" auth_type="ADMIN" requires_perm="SEE CREDIT CHANGES"
            comment="use SystemNotification.getNotifications() method to see if the report is finished
        and get the URL to download it">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as getCreditChanges" />
        <param name="cols" type="list" length="-1" comment="">
          <item type="choice">
            <choice value="action" comment="" />
            <choice value="action_text" comment="" />
            <choice value="admin_id" comment="" />
            <choice value="admin_name" comment="" />
            <choice value="change_time" comment="" />
            <choice value="change_time_formatted" comment="" />
            <choice value="comment" comment="" />
            <choice value="credit_change_id" comment="" />
            <choice value="isp_credit" comment="" />
            <choice value="isp_id" comment="" />
            <choice value="isp_name" comment="" />
            <choice value="per_user_credit" comment="" />
            <choice value="remote_addr" comment="" />
            <choice value="user_id" comment="in user_view mode only" />
            <choice value="username" comment="in user_view mode only" />
            <choice value="name" comment="in user_view mode only" />
            <choice value="serial" comment="in user_view mode only" />
            <choice value="group" comment="in user_view mode only" />
            <choice value="group_id" comment="in user_view mode only" />
            <choice value="before_credit" comment="in user_view mode only" />
            <choice value="user_ids" comment="in admin-view only (no user_view in conds) " />
          </item>
        </param>
        <param name="sort_by" type="choice" comment="">
          <choice value="change_time" comment="" />
          <choice value="per_user_credit" comment="" />
          <choice value="isp_credit" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
        <param name="output_type" type="choice" comment="">
          <choice value="csv" comment="" />
          <choice value="pdf" comment="" />
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getUserDepositChanges" auth_type="ADMIN" requires_perm="SEE USER DEPOSIT CHANGES" comment="by admin">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="user_ids" type="str" multi_str="true" optional="true" comment="" />
          <param name="admin" type="list, str" multi_str="false" optional="true" comment="list of admin usernames, or string of one admin username" />
          <param name="action" type="list" length="-1" optional="true" comment="">
            <item type="choice">
              <choice value="ADD_USER" />
              <choice value="CHANGE_DEPOSIT" />
              <choice value="DEL_USER" />
              <choice value="ONLINE_PAYMENT" />
              <choice value="DEPOSIT_TRANSFER" />
              <choice value="AUTO_RENEW" />
              <choice value="RECEIVE_DEPOSIT_TRANSFER" />
              <choice value="AUTO_RECHARGE" />
              <choice value="EXTRA_CHARGE" />
              <choice value="VOUCHER" />
            </item>
          </param>
          <param name="deposit" type="float" optional="true" requires_param="deposit_op" comment="comes with deposit_op cond" />
          <param name="deposit_op" type="choice" optional="true" comment="comes with deposit cond">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="change_time_from" type="str_datetime, float" optional="true" requires_param="change_time_from_unit" comment="" />
          <param name="change_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="change_time_to" type="str_datetime, float" optional="true" requires_param="change_time_to_unit" comment="" />
          <param name="change_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="remote_addr" type="str" optional="true" comment="" />
          <param name="group_name" type="list, str" multi_str="false" optional="true" comment="list of group names, or string of one group name" />
          <param name="user_isp_names" type="list, str" multi_str="false" optional="true" comment="list of isp names, or string one isp name" />
          <param name="isp_names" type="list, str" multi_str="false" optional="true" comment="list of isp names, or string one isp name" />
        </param>
        <param name="from" type="0" comment="start index, for pagination" />
        <param name="to" type="1" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="change_time" />
          <choice value="user_id" />
          <choice value="deposit_change" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="" />
        <param name="total_deposit" type="float" comment="" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="dict" comment="">
            <param name="action" type="int" comment="1 to 10" />
            <param name="action_text" type="choice" comment="">
              <choice value="ADD_USER" />
              <choice value="CHANGE_DEPOSIT" />
              <choice value="DEL_USER" />
              <choice value="ONLINE_PAYMENT" />
              <choice value="DEPOSIT_TRANSFER" />
              <choice value="AUTO_RENEW" />
              <choice value="RECEIVE_DEPOSIT_TRANSFER" />
              <choice value="AUTO_RECHARGE" />
              <choice value="EXTRA_CHARGE" />
              <choice value="VOUCHER" />
            </param>
            <param name="admin_id" type="int" comment="" />
            <param name="admin_name" type="str" comment="" />
            <param name="change_time" type="str" comment="gregorian" />
            <param name="change_time_formatted" type="str" comment="depends on input date_type" />
            <param name="comment" type="str" comment="" />
            <param name="deposit_change" type="float" comment="" />
            <param name="deposit_change_id" type="int" comment="" />
            <!--
            <param name="deposit_type" type="choice" comment="">
              <choice value="renew" />
              <choice value="recharge" />
            </param>
            !-->
            <param name="group_name" type="str" comment="" />
            <param name="isp_id" type="int" comment="" />
            <param name="isp_name" type="str" comment="" />
            <param name="remote_addr" type="str" comment="Remote IP" />
            <param name="user_id" type="int" comment="" />
            <param name="username" type="str" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="getUserDepositChanges" auth_type="USER" comment="by user">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="admin" type="list, str" multi_str="false" optional="true" comment="list of admin usernames, or string of one admin username" />
          <param name="action" type="list" length="-1" optional="true" comment="">
            <item type="choice">
              <choice value="ADD_USER" />
              <choice value="CHANGE_DEPOSIT" />
              <choice value="DEL_USER" />
              <choice value="ONLINE_PAYMENT" />
              <choice value="DEPOSIT_TRANSFER" />
              <choice value="AUTO_RENEW" />
              <choice value="RECEIVE_DEPOSIT_TRANSFER" />
              <choice value="AUTO_RECHARGE" />
              <choice value="EXTRA_CHARGE" />
              <choice value="VOUCHER" />
            </item>
          </param>
          <param name="deposit" type="float" optional="true" requires_param="deposit_op" comment="comes with deposit_op cond" />
          <param name="deposit_op" type="choice" optional="true" comment="comes with deposit cond">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="change_time_from" type="str_datetime, float" optional="true" requires_param="change_time_from_unit" comment="" />
          <param name="change_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="change_time_to" type="str_datetime, float" optional="true" requires_param="change_time_to_unit" comment="" />
          <param name="change_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="remote_addr" type="str" optional="true" comment="" />
          <param name="group_name" type="list, str" multi_str="false" optional="true" comment="list of group names, or string of one group name" />
          <param name="isp_names" type="list, str" multi_str="false" optional="true" comment="list of isp names, or string one isp name" />
        </param>
        <param name="from" type="0" comment="start index, for pagination" />
        <param name="to" type="1" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="change_time" />
          <choice value="user_id" />
          <choice value="deposit_change" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="" />
        <param name="total_deposit" type="float" comment="" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="dict" comment="">
            <param name="action" type="int" comment="1 to 10" />
            <param name="action_text" type="choice" comment="">
              <choice value="ADD_USER" />
              <choice value="CHANGE_DEPOSIT" />
              <choice value="DEL_USER" />
              <choice value="ONLINE_PAYMENT" />
              <choice value="DEPOSIT_TRANSFER" />
              <choice value="AUTO_RENEW" />
              <choice value="RECEIVE_DEPOSIT_TRANSFER" />
              <choice value="AUTO_RECHARGE" />
              <choice value="EXTRA_CHARGE" />
              <choice value="VOUCHER" />
            </param>
            <param name="change_time" type="str" comment="gregorian" />
            <param name="change_time_formatted" type="str" comment="depends on input date_type" />
            <param name="comment" type="str" comment="" />
            <param name="deposit_change" type="float" comment="" />
            <param name="deposit_change_id" type="int" comment="" />
            <!--
            <param name="deposit_type" type="choice" comment="">
              <choice value="renew" />
              <choice value="recharge" />
            </param>
            !-->
            <param name="group_name" type="str" comment="" />
            <param name="user_id" type="int" comment="" />
            <param name="username" type="str" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="getUserAuditLogs" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="user_ids" type="str" multi_str="true" optional="true" comment="sets is_user=yes and turns on user-mode" />
          <param name="user_isp_names" type="list" optional="true" comment="sets is_user=yes and turns on user-mode" />
          <param name="group_name" type="list" optional="true" comment="sets is_user=no and turns on group-mode" />
          <param name="attr_names" type="str" multi_str="true" optional="true" comment="" />
          <param name="change_time_from" type="str" optional="true" comment="" requires_param="change_time_from_unit" />
          <param name="change_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="change_time_to" type="str_datetime, float" optional="true" requires_param="change_time_to_unit" comment="" />
          <param name="change_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="is_user" type="choice" optional="true" comment="">
            <choice value="yes" />
            <choice value="no" />
          </param>
          <param name="isp_names" type="list, str" multi_str="false" optional="true" comment="list of isp names, or string of one isp name" />
          <param name="admin" type="str" multi_str="false" optional="true" comment="admin username" />
        </param>
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="sort_by" type="choice" comment="">
          <choice value="change_time" comment="" />
          <choice value="object_id" comment="" />
          <choice value="admin_id" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="number of total rows" />
        <param name="report" type="list" length="-1" comment="">
          <item type="dict">
            <param name="admin_id" type="int" comment="" />
            <param name="admin_name" type="str" comment="" />
            <param name="attr_name" type="str" comment="" />
            <param name="change_time" type="str" comment="gregorian" />
            <param name="change_time_formatted" type="str" comment="depending on input date_type" />
            <param name="is_user" type="choice" comment="">
              <choice value="t" comment="true / yes" />
              <choice value="f" comment="false / no" />
            </param>
            <param name="new_value" type="str" comment="" />
            <param name="object_id" type="int" comment="" />
            <param name="old_value" type="str" comment="" />
            <param name="remote_ip" type="str" comment="" />
            <param name="user_audit_log" type="int" comment="log id" />
            <param name="username" type="str" optional="true" comment="only exists in user-mode (is_user=yes)" />
          </item>
        </param>
      </output>
    </method>
    <method name="getRequestCount" auth_type="ADMIN" requires_perm="GOD" comment="number of admin requests for each minute in the last hour">
      <input type="dict">
      </input>
      <output type="dict" dynamic_keys="true" length="60" comment="a dict of timestamp (for each minute) to request_dict">
        <key type="str"
                 comment="epoch time as string, for example: '1457515800.0', one record for each minute" />
        <value type="dict" comment="a dict from admin usernames to request counts">
          <key type="str" comment="admin username" />
          <value type="int" comment="number of requests by this admin" />
        </value>
      </output>
    </method>
    <method name="getRequestTopStats" auth_type="ADMIN" requires_perm="GOD" comment="">
      <input type="dict">
        <param name="order_by" type="choice" comment="">
          <choice value="count" comment="" />
          <choice value="average_duration" comment="" />
          <choice value="total_duration" comment="" />
        </param>
      </input>
      <output type="list" item_type="dict" length="20" comment="">
        <item type="dict">
          <param name="request_name" type="str" comment="name of request method, for example 'report.getRequestTopStats'" />
          <param name="count" type="float" comment="number of times the request method has been called" />
          <param name="average_duration" type="float" comment="average duration, in seconds" />
          <param name="total_duration" type="float" comment="total duration, in seconds" />
        </item>
      </output>
    </method>
    <method name="getISPDepositChangeLogs" auth_type="ADMIN" requires_perm="SEE DEPOSIT CHANGES" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="admin" type="list, str" optional="true" comment="list of admin usernames, or string of one admin username" />
          <param name="admin_isp_name" type="list, str" optional="true" comment="isp name of admin, list or string (of one)" />
          <param name="isp_names" type="list, str" multi_str="false" optional="true" comment="list of isp names, or string of one isp name" />
          <param name="change_time_from" type="str_datetime, float" optional="true" requires_param="change_time_from_unit" comment="" />
          <param name="change_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="change_time_to" type="str_datetime, float" optional="true" requires_param="change_time_to_unit" comment="" />
          <param name="change_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="isp_deposit_change_admin_id" />
          <choice value="isp_deposit_change_isp_id" />
          <choice value="isp_deposit_change_time" />
          <choice value="isp_deposit_change_amount" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="number of total rows" />
        <param name="total_deposit_change" type="float" comment="total/sum of deposit change amounts" />
        <param name="report" type="list" length="-1" item_type="dict" comment="">
          <item type="dict">
            <param name="isp_deposit_before_change" type="float" comment="" />
            <param name="isp_deposit_change_action" type="choice" comment="">
              <choice value="ADD_ISP" comment="" />
              <choice value="CHANGE_ISP_DEPOSIT" comment="" />
              <choice value="DEL_ISP" comment="" />
              <choice value="PENALTY" comment="" />
            </param>
            <param name="isp_deposit_change_admin_id" type="int" comment="Admin ID" />
            <param name="isp_deposit_change_admin_isp_id" type="int" comment="Admin's Owner ISP ID" />
            <param name="isp_deposit_change_admin_isp_name" type="str" comment="Admin's Owner ISP Name" />
            <param name="isp_deposit_change_admin_name" type="str" comment="Admin Username" />
            <param name="isp_deposit_change_amount" type="float" comment="Changed Amount" />
            <param name="isp_deposit_change_comment" type="str" comment="Comment" />
            <param name="isp_deposit_change_id" type="int" comment="" />
            <param name="isp_deposit_change_isp_id" type="int" comment="ISP ID" />
            <param name="isp_deposit_change_isp_name" type="str" comment="ISP Name" />
            <param name="isp_deposit_change_remote_addr" type="str" comment="Admin's Remote IP" />
            <param name="isp_deposit_change_time" type="str" comment="Change time, gregorian" />
            <param name="isp_deposit_change_time_formatted" type="str_datetime" comment="Change time, depending on input date_type" />
          </item>
        </param>
      </output>
    </method>
    <method name="getTemporaryExtendLogs" auth_type="ADMIN" requires_perm="TEMPORARY EXTEND" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="isp_names" type="list, str" multi_str="false" optional="true" comment="list of isp names, or string of one isp name" />
          <param name="user_ids" type="str" multi_str="true" optional="true" comment="" />
          <param name="temporary_extend_date_from" type="str_datetime, float" optional="true" requires_param="temporary_extend_date_from_unit" comment="" />
          <param name="temporary_extend_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="temporary_extend_date_to" type="str_datetime, float" optional="true" requires_param="temporary_extend_date_to_unit" comment="" />
          <param name="temporary_extend_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="temporary_extend_date" comment="" />
          <choice value="user_id" comment="" />
          <choice value="temporary_extend_hours" comment="" />
          <choice value="credit_usage" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="number of total rows" />
        <param name="report" type="list" item_type="dict" comment="">
          <item type="dict">
            <param name="credit_usage" type="float" comment="" />
            <param name="duration_seconds" type="int" comment="" />
            <param name="finish_date" type="str" comment="" />
            <param name="finish_date_formatted" type="str" comment="" />
            <param name="temporary_extend_credit" type="float" comment="" />
            <param name="temporary_extend_date" type="str" comment="" />
            <param name="temporary_extend_date_formatted" type="str" comment="" />
            <param name="temporary_extend_hours" type="int" comment="" />
            <param name="temporary_extend_log_id" type="int" comment="" />
            <param name="user_id" type="int" comment="" />
            <param name="username" type="str" comment="starts with 'I: ' for internet users" />
          </item>
        </param>
      </output>
    </method>
    <method name="delReports" auth_type="ADMIN" requires_perm="DELETE REPORTS" comment="">
      <input type="dict">
        <param name="table" type="str" comment="" />
        <param name="date" type="str_datetime, float" requires_param="date_unit" comment="" />
        <param name="date_unit" type="choice" comment="">
          <choice value="jalali" />
          <choice value="gregorian" />
          <choice value="years" />
          <choice value="months" />
          <choice value="days" />
          <choice value="hours" />
          <choice value="minutes" />          
        </param>
      </input>
      <output type="null" />
    </method>
    <method name="autoCleanReports" auth_type="ADMIN" requires_perm="DELETE REPORTS" comment="">
      <input type="dict"
              comment="input params include pairs of (period, period_unit) for each table as below,
        records older than this date will be deleted">
        <param name="connection_log_clean" type="int" comment="period" />
        <param name="connection_log_unit" type="choice" comment="">
          <choice value="Seconds" />
          <choice value="Minutes" />
          <choice value="Hours" />
          <choice value="Days" />
          <choice value="Months" />
          <choice value="Years" />
        </param>
        <param name="credit_change_clean" type="int" comment="relative time" />
        <param name="credit_change_unit" type="choice" comment="relative time unit">
          <choice value="Seconds" />
          <choice value="Minutes" />
          <choice value="Hours" />
          <choice value="Days" />
          <choice value="Months" />
          <choice value="Years" />
        </param>
        <param name="user_audit_log_clean" type="int" comment="relative time" />
        <param name="user_audit_log_unit" type="choice" comment="relative time unit">
          <choice value="Seconds" />
          <choice value="Minutes" />
          <choice value="Hours" />
          <choice value="Days" />
          <choice value="Months" />
          <choice value="Years" />
        </param>
        <param name="snapshots_clean" type="int" comment="relative time" />
        <param name="snapshots_unit" type="choice" comment="relative time unit">
          <choice value="Seconds" />
          <choice value="Minutes" />
          <choice value="Hours" />
          <choice value="Days" />
          <choice value="Months" />
          <choice value="Years" />
        </param>
        <param name="bw_snapshots_clean" type="int" comment="relative time" />
        <param name="bw_snapshots_unit" type="choice" comment="relative time unit">
          <choice value="Seconds" />
          <choice value="Minutes" />
          <choice value="Hours" />
          <choice value="Days" />
          <choice value="Months" />
          <choice value="Years" />
        </param>
        <param name="web_analyzer_clean" type="int" comment="relative time" />
        <param name="web_analyzer_unit" type="choice" comment="relative time unit">
          <choice value="Seconds" />
          <choice value="Minutes" />
          <choice value="Hours" />
          <choice value="Days" />
          <choice value="Months" />
          <choice value="Years" />
        </param>
      </input>
      <output type="null" />
    </method>
    <method name="getAutoCleanDates" auth_type="ADMIN" requires_perm="DELETE REPORTS" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <param name="bw_snapshots" type="list" length="2" comment="">
          <item index="0" type="int" comment="relative time" />
          <item index="1" type="choice" comment="relative time unit">
            <choice value="Seconds" />
            <choice value="Minutes" />
            <choice value="Hours" />
            <choice value="Days" />
            <choice value="Months" />
            <choice value="Years" />
          </item>
        </param>
        <param name="connection_log" type="list" length="2" comment="">
          <item index="0" type="int" comment="relative time" />
          <item index="1" type="choice" comment="relative time unit">
            <choice value="Seconds" />
            <choice value="Minutes" />
            <choice value="Hours" />
            <choice value="Days" />
            <choice value="Months" />
            <choice value="Years" />
          </item>
        </param>
        <param name="credit_change" type="list" length="2" comment="">
          <item index="0" type="int" comment="relative time" />
          <item index="1" type="choice" comment="relative time unit">
            <choice value="Seconds" />
            <choice value="Minutes" />
            <choice value="Hours" />
            <choice value="Days" />
            <choice value="Months" />
            <choice value="Years" />
          </item>
        </param>
        <param name="snapshots" type="list" length="2" comment="">
          <item index="0" type="int" comment="relative time" />
          <item index="1" type="choice" comment="relative time unit">
            <choice value="Seconds" />
            <choice value="Minutes" />
            <choice value="Hours" />
            <choice value="Days" />
            <choice value="Months" />
            <choice value="Years" />
          </item>
        </param>
        <param name="user_audit_log" type="list" length="2" comment="">
          <item index="0" type="int" comment="relative time" />
          <item index="1" type="choice" comment="relative time unit">
            <choice value="Seconds" />
            <choice value="Minutes" />
            <choice value="Hours" />
            <choice value="Days" />
            <choice value="Months" />
            <choice value="Years" />
          </item>
        </param>
        <param name="web_analyzer_log" type="list" length="2" comment="">
          <item index="0" type="int" comment="relative time" />
          <item index="1" type="choice" comment="relative time unit">
            <choice value="Seconds" />
            <choice value="Minutes" />
            <choice value="Hours" />
            <choice value="Days" />
            <choice value="Months" />
            <choice value="Years" />
          </item>
        </param>
      </output>
    </method>
    <method name="getManagementSummaryReport" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="login_time_from" type="str_datetime, float" optional="false" requires_param="login_time_from_unit" comment="" />
          <param name="login_time_from_unit" type="choice" optional="false" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="login_time_to" type="str_datetime, float" optional="true" requires_param="login_time_to_unit" comment="" />
          <param name="login_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="username" type="str" multi_str="false" optional="true" comment="" />
          <param name="voip_username" type="str" multi_str="false" optional="true" comment="" />
          <param name="user_ids" type="str" multi_str="true" optional="true" comment="" />
          <param name="view_period" type="choice" optional="false" comment="">
            <choice value="daily" comment="" />
            <choice value="weekly" comment="" />
            <choice value="monthly" comment="" />
            <choice value="yearly" comment="" />
          </param>
          <param name="included_objects" type="list" length="-1" optional="false" comment="">
            <item type="choice" comment="">
              <choice value="isp" comment="" />
              <choice value="isp_mapped_user" comment="" />
              <choice value="group" comment="" />
              <choice value="ras" comment="" />
              <choice value="ras_group" comment="" />
              <choice value="ras_isp" comment="" />
              <choice value="service" comment="" />
              <!-- Location options, to be removed?
              <choice value="region" comment="" />
              <choice value="province" comment="" />
              <choice value="city" comment="" />
              <choice value="telco_center" comment="" />
              <choice value="device" comment="" />
              <choice value="port" comment="" />
              !-->
            </item>
          </param>
          <param name="report_targets" type="list" length="-1" optional="false" comment="">
            <item type="choice" comment="">
              <choice value="duration" comment="" />
              <choice value="credit" comment="" />
              <choice value="in_bytes" comment="" />
              <choice value="out_bytes" comment="" />
            </item>
          </param>
          <param name="called_number" type="str" optional="true" requires_param="called_number_op" comment="" />
          <param name="called_number_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="prefix_name" type="str" optional="true" requires_param="prefix_name_op" comment="" />
          <param name="prefix_name_op" type="choice" optional="true" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="called_ip" type="str" multi_str="true" optional="true" comment="" />
          <param name="dnis" type="str" multi_str="true" optional="true" comment="" />
          <param name="immediate_children_isps_only" type="true_if_exists" optional="true" comment="" />
          <param name="isp_names" type="list, str" multi_str="false" optional="true" comment="list of isp names, or string of one isp name" />
        </param>
      </input>
      <output type="dict" comment="">
        <param name="report" type="list" length="-1">
          <item type="list" length="2" comment="">
            <item index="0" type="list" length="2" comment="date range">
              <item index="0" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'" />
              <item index="1" type="str" comment="end date and time, format '%Y-%m-%d %H:%M'" />
            </item>
            <item index="1" type="list" length="-1">
              <item type="list" length="2">
                <item index="0" type="choice">
                  <choice value="isp" comment="" />
                  <choice value="isp_mapped_user" comment="" />
                  <choice value="group" comment="" />
                  <choice value="ras" comment="" />
                  <choice value="ras_group" comment="" />
                  <choice value="ras_isp" comment="" />
                  <choice value="service" comment="" />
                </item>
                <item index="1" type="list" length="-1">
                  <item type="list" length="2" comment="">
                    <item index="0" type="str" comment="name of group/isp/ras"></item>
                    <item index="1" type="dict" comment="depends on input 'report_targets'">
                      <param name="duration" type="int" optional="true" comment="seconds" />
                      <param name="credit" type="float" optional="true" comment="" />
                      <param name="in_bytes" type="int" optional="true" comment="" />
                      <param name="out_bytes" type="int" optional="true" comment="" />
                    </item>
                  </item>
                </item>
              </item>
            </item>
          </item>
        </param>
      </output>
    </method>
    <method name="getSystemAuditLogs" auth_type="ADMIN" requires_perm="SEE SYSTEM AUDIT LOGS" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="categories" type="list" length="-1" optional="true" comment="">
            <item type="choice" comment="">
              <choice value="0" type="str" comment="_NO_CATEGORY_" />
              <choice value="1" type="str" comment="RAS" />
              <choice value="2" type="str" comment="CHARGE" />
              <choice value="3" type="str" comment="ISP" />
              <choice value="4" type="str" comment="VOIP-TARIFF" />
              <choice value="5" type="str" comment="VOIP-PREFIX-GROUP" />
              <choice value="6" type="str" comment="ADMIN" />
              <choice value="7" type="str" comment="VOIP-PROVIDER" />
              <choice value="8" type="str" comment="VOIP-ROUTING-PROFILE" />
              <choice value="9" type="str" comment="VOIP-ROUTE" />
              <choice value="10" type="str" comment="VOIP-ROUTE-PREFIX" />
              <choice value="11" type="str" comment="ISP PAGE STYLE" />
              <choice value="12" type="str" comment="ONLINE-PAYMENT" />
            </item>
          </param>
          <param name="events" type="list" optional="true" comment="">
            <item type="choice" comment="">
              <choice value="1" type="str" comment="ADD" />
              <choice value="2" type="str" comment="CHANGE" />
              <choice value="3" type="str" comment="DELETE" />
            </item>
          </param>
          <param name="isp_names" type="list, str" multi_str="false" optional="true" comment="list of isp names, or string of one isp name" />
          <param name="admin" type="str" optional="true" comment="admin username" />
          <param name="change_time_from" type="str_datetime, float" optional="true" requires_param="change_time_from_unit" comment="" />
          <param name="change_time_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="change_time_to" type="str_datetime, float" optional="true" requires_param="change_time_to_unit" comment="" />
          <param name="change_time_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="object_id" type="int" multi_str="true" optional="true" comment="" />
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="change_time" comment="" />
          <choice value="object_id" comment="" />
          <choice value="admin_id" comment="" />
          <choice value="event" comment="" />
          <choice value="category" comment="" />
          <choice value="isp_id" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="total number of rows" />
        <param name="report" type="list" length="-1" comment="">
          <item type="dict">
            <param name="admin_id" type="int" comment="" />
            <param name="admin_name" type="str" comment="" />
            <param name="attr_name" type="str" comment="" />
            <param name="audit_log_id" type="int" comment="" />
            <param name="category" type="choice" comment="">
              <choice value="0" type="int" comment="_NO_CATEGORY_" />
              <choice value="1" type="int" comment="RAS" />
              <choice value="2" type="int" comment="CHARGE" />
              <choice value="3" type="int" comment="ISP" />
              <choice value="4" type="int" comment="VOIP-TARIFF" />
              <choice value="5" type="int" comment="VOIP-PREFIX-GROUP" />
              <choice value="6" type="int" comment="ADMIN" />
              <choice value="7" type="int" comment="VOIP-PROVIDER" />
              <choice value="8" type="int" comment="VOIP-ROUTING-PROFILE" />
              <choice value="9" type="int" comment="VOIP-ROUTE" />
              <choice value="10" type="int" comment="VOIP-ROUTE-PREFIX" />
              <choice value="11" type="int" comment="ISP PAGE STYLE" />
              <choice value="12" type="int" comment="ONLINE-PAYMENT" />
            </param>
            <param name="category_repr" type="choice" comment="">
              <choice value="_NO_CATEGORY_" type="str" comment="" />
              <choice value="RAS" type="str" comment="" />
              <choice value="CHARGE" type="str" comment="" />
              <choice value="ISP" type="str" comment="" />
              <choice value="VOIP-TARIFF" type="str" comment="" />
              <choice value="VOIP-PREFIX-GROUP" type="str" comment="" />
              <choice value="ADMIN" type="str" comment="" />
              <choice value="VOIP-PROVIDER" type="str" comment="" />
              <choice value="VOIP-ROUTING-PROFILE" type="str" comment="" />
              <choice value="VOIP-ROUTE" type="str" comment="" />
              <choice value="VOIP-ROUTE-PREFIX" type="str" comment="" />
              <choice value="ISP PAGE STYLE" type="str" comment="" />
              <choice value="ONLINE-PAYMENT" type="str" comment="" />
            </param>
            <param name="change_time" type="str" comment="" />
            <param name="change_time_formatted" type="str" comment="" />
            <param name="event" type="choice" comment="">
              <choice value="1" type="int" comment="ADD" />
              <choice value="2" type="int" comment="CHANGE" />
              <choice value="3" type="int" comment="DELETE" />
            </param>
            <param name="event_repr" type="choice" comment="">
              <choice value="ADD" type="str" comment="" />
              <choice value="CHANGE" type="str" comment="" />
              <choice value="DELETE" type="str" comment="" />
            </param>
            <param name="isp_id" type="int" comment="" />
            <param name="isp_name" type="str" comment="" />
            <param name="new_value" type="str" comment="" />
            <param name="object_id" type="int" comment="" />
            <param name="object_repr" type="str" comment="" />
            <param name="old_value" type="str" comment="" />
            <param name="remote_ip" type="str" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="getOnlinePaymentReport" auth_type="ADMIN, USER" requires_perm="" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="requester_ids" type="str" multi_str="true" optional="true"
                     comment="Comma-seperated string of User IDs (or Admin IDs)" />
          <param name="requester_type" type="choice" comment="">
            <choice value="USER" />
            <choice value="ADMIN" />
          </param>
          <param name="reference_id" type="str" optional="true" comment="" />
          <param name="amount" type="float" optional="true" requires_param="amount_op" comment="" />
          <param name="amount_op" type="choice" optional="true" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="payment_date_from" type="str_datetime, float" optional="true" requires_param="payment_date_from_unit" comment="" />
          <param name="payment_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="payment_date_to" type="str_datetime, float" optional="true" requires_param="payment_date_to_unit" comment="" />
          <param name="payment_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="succeed" type="choice" optional="true" comment="">
            <choice value="yes" />
            <choice value="no" />
          </param>
          <param name="gateway_name" type="list, str" optional="true" comment="list of gateway names, or string of one gateway name" />
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="payment_id" comment="" />
          <choice value="gateway_id" comment="" />
          <choice value="unique_id" comment="" />
          <choice value="amount" comment="" />
          <choice value="payment_date" comment="" />
          <choice value="requester_id" comment="" />
          <choice value="requester_type" comment="" />
          <choice value="succeed" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="total number of rows" />
        <param name="report" type="list" length="-1" comment="">
          <item type="dict">
            <param name="amount" type="float" comment="" />
            <param name="details" type="list" length="-1" item_type="dict" comment="">
              <item type="dict" comment="">
                <param name="comment" type="str" comment="" />
                <param name="log_date" type="str" comment="" />
                <param name="log_id" type="int" comment="" />
                <param name="payment_id" type="int" comment="" />
                <param name="result_code" type="int" comment="0 if successfull, otherwise Bank's error code" />
                <param name="result_text" type="str" comment="'Successful' or text of error" />
                <param name="stage_name" type="choice" comment="">
                  <choice value="Prepare" comment="" />
                  <choice value="Settle" comment="for Bank Mellat only" />
                  <choice value="Verify" comment="" />
                  <choice value="After-Verify" comment="only if there was an error after Verify stage" />
                </param>
              </item>
            </param>
            <param name="gateway_id" type="int" comment="" />
            <param name="gateway_name" type="str" comment="" />
            <param name="isp_id" type="int" comment="" />
            <param name="log_id" type="int" comment="" />
            <param name="payment_date" type="str" comment="" />
            <param name="payment_id" type="int" comment="" />
            <param name="reference_id" type="str" comment="" />
            <param name="requester_id" type="int" comment="" />
            <param name="requester_type" type="choice" comment="">
              <choice value="USER" />
              <choice value="ADMIN" />
            </param>
            <param name="succeed" type="choice" comment="">
              <choice value="t" comment="true" />
              <choice value="f" comment="false" />
            </param>
            <param name="unique_id" type="str" comment="" />
            <param name="username" type="str" comment="user's username" />
            <param name="name" type="str" comment="user's full name" />
          </item>
        </param>
      </output>
    </method>
    <method name="saveConnections" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS"
            comment="use SystemNotification.getNotifications() method to see if the report is finished
        and get the URL to download it">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="sort_by" type="choice" comment="">
          <choice value="user_id" />
          <choice value="credit_used" />
          <choice value="login_time" />
          <choice value="logout_time" />
          <choice value="successful" />
          <choice value="service" />
          <choice value="ras_id" />
          <choice value="connection_log_id" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="saveConnectionUsages" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS"
            comment="use SystemNotification.getNotifications() method to see if the report is finished
        and get the URL to download it">
      <input type="dict">
        <param name="report_type" type="choice" comment="">
          <choice value="inout_usages" comment="" />
          <choice value="credit_usages" comment="" />
          <choice value="time_usages" comment="" />
        </param>
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
        <param name="cols" type="list" length="-1" comment="">
          <item type="choice" comment="">
            <choice value="user_id" comment="" />
            <choice value="user_name" comment="" />
            <choice value="serial" comment="" />
            <choice value="group_name" comment="" />
            <choice value="isp_name" comment="" />
            <choice value="creation_date" comment="" />
            <choice value="name" comment="" />
          </item>
        </param>
        <param name="sort_by" type="choice" comment="">
          <choice value="creation_date" comment="" />
          <choice value="normal_username" comment="" />
          <choice value="sum" comment="" />
        </param>
        <param name="output_type" type="choice" comment="">
          <choice value="csv" comment="" />
          <choice value="pdf" comment="" />
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="savePrefixNameUsage" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS"
            comment="use SystemNotification.getNotifications() method to see if the report is finished and get the URL to download it">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getConnections' method" />
        <param name="order_by" type="choice" comment="">
          <choice value="prefix_name" comment="" />
          <choice value="prefix_code" comment="" />
          <choice value="duration_sum" comment="" />
          <choice value="count" comment="" />
          <choice value="credit" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
        <param name="output_type" type="choice" comment="">
          <choice value="csv" comment="" />
          <choice value="pdf" comment="" />
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="saveOnlinePaymentReport" auth_type="ADMIN" requires_perm="SEE CONNECTION LOGS"
            comment="use SystemNotification.getNotifications() method to see if the report is finished and get the URL to download it">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as 'report.getOnlinePaymentReport' method" />
        <param name="sort_by" type="choice" comment="">
          <choice value="payment_id" comment="" />
          <choice value="gateway_id" comment="" />
          <choice value="unique_id" comment="" />
          <choice value="amount" comment="" />
          <choice value="payment_date" comment="" />
          <choice value="requester_id" comment="" />
          <choice value="requester_type" comment="" />
          <choice value="succeed" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
        <param name="output_type" type="choice" comment="">
          <choice value="csv" comment="" />
          <choice value="pdf" comment="" />
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getDayNightUsage"
        auth_type="ADMIN" requires_perm="GOD">
      <input type="dict">
        <param name="start_date" type="str" comment="gregorian date, format '%Y-%m-%d'" />
        <param name="end_date" type="str" comment="gregorian date, format '%Y-%m-%d'" />
        <param name="nightly_charge_rule_ids" type="list" item_type="int"
                   comment="list of Charge Rule IDs that are Nightly (Free)" />
      </input>
      <output type="dict">
        <param name="night_download" type="int" comment="in bytes" />
        <param name="night_upload" type="int" comment="in bytes" />
        <param name="day_download" type="int" comment="in bytes" />
        <param name="day_upload" type="int" comment="in bytes" />
      </output>
    </method>
  </handler>
  <handler name="session" comment="">
    <method name="expireSession" auth_type="USER, ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="session_id" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getAuthData" auth_type="USER, ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="auth_session" type="str" comment="session_id" />
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="str" comment="auth_name" />
        <item index="1" type="str" comment="auth_pass" />
        <item index="2" type="str" comment="auth_type" />
      </output>
    </method>
  </handler>
  <!--
  <handler name="sms" comment="">
    <method name="sendSMS" auth_type="USER" comment="">
      <input type="dict">
        <param name="sms_body" type="str" comment="" />
        <param name="phones" type="str" multi_str="true" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getSMSDefs" auth_type="USER" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <param name="sms_defs" type="dict" dynamic_keys="true" comment="" />
      </output>
    </method>
    <method name="getSentSMS" auth_type="USER" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="user_ids" type="str" multi_str="true" optional="true" comment="" />
          <param name="phones" type="str" multi_str="true" optional="true" comment="" />
          <param name="post_date_from" type="str_datetime, float" optional="true" requires_param="post_date_from_unit" comment="" />
          <param name="post_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="post_date_to" type="str_datetime, float" optional="true" requires_param="post_date_to_unit" comment="" />
          <param name="post_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
        </param>
        <param name="from" type="int" comment="start index" />
        <param name="to" type="int" comment="end index" />
        <param name="sort_by" type="choice" comment="">
          <choice value="sms_id" comment="" />
          <choice value="user_id" comment="" />
          <choice value="post_date" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="" />
        <param name="smses" type="list" length="-1" comment="">
          <item type="dict" comment="">
            <param name="post_date_formatted" type="str" comment="" />
            <param name="username_repr" type="str" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="adminGetSentSMS" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
      </output>
    </method>
    <method name="adminDeleteSMS" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
      </output>
    </method>
  </handler>
  !-->
  <handler name="snapshot" comment="">
    <method name="getBWSnapShotForUserAjax" auth_type="ADMIN" requires_perm="SEE REALTIME SNAPSHOTS" comment="by admin">
      <input type="dict">
        <param name="user_id" type="int" optional="false" comment="" />
        <param name="from" type="str" optional="true" requires_param="from_unit" comment="" />
        <param name="from_unit" type="str" optional="true" comment="" />
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="epoch time" />
        <item index="1" type="int" comment="download rate" />
        <item index="2" type="int" comment="upload rate" />
      </output>
    </method>
    <method name="getBWSnapShotForUserAjax" auth_type="USER" comment="">
      <input type="dict">
        <param name="from" type="str" optional="true" requires_param="from_unit" comment="by user" />
        <param name="from_unit" type="str" optional="true" comment="" />
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="epoch time" />
        <item index="1" type="int" comment="download rate" />
        <item index="2" type="int" comment="upload rate" />
      </output>
    </method>
    <method name="getOnlinesSnapShot" auth_type="ADMIN" requires_perm="SEE ONLINE SNAPSHOTS" comment="">
      <!-- remove? FIXME !-->
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="ras_ips" type="list, str" comment="" />
          <param name="isp_names" type="list, str" comment="" />
        </param>
        <param name="type" type="choice" comment="">
          <choice value="internet" comment="" />
          <choice value="voip" comment="" />
        </param>
      </input>
      <output type="list" length="5" comment="">
        <item index="0" type="list" length="-1" comment="result">
          <item type="list" length="2" comment="">
            <item index="0" type="int" comment="epoch time" />
            <item index="1" type="int" comment="number of online users" />
          </item>
        </item>
        <item index="1" type="int" comment="minimum" />
        <item index="2" type="int" comment="maximum" />
        <item index="3" type="int" comment="average" />
        <item index="4" type="str" comment="time zone, 'Asia/Tehran' for example" />
      </output>
    </method>
    <method name="getBWSnapShot" auth_type="" requires_perm="" comment="">
      <input type="dict">
        <key type="str" comment="reporting condition" />
        <value type="dict" comment="">
          <param name="user_id" type="str" comment="unique user id for limit reporting for that user"/>
          <param name="date_from" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'"/>
          <param name="date_to" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'"/>
          <param name="date_from_unit" type="choice" comment="date unit">
            <choice value="gregorian" comment="" />
            <choice value="jalali" comment="" />
            <choice value="years" comment="" />
            <choice value="months" comment="" />
            <choice value="days" comment="" />
            <choice value="hours" comment="" />
            <choice value="minutes" comment="" />
            <choice value="seconds" comment="" />
          </param>
          <param name="date_to_unit" type="choice" comment="date unit">
            <choice value="gregorian" comment="" />
            <choice value="jalali" comment="" />
            <choice value="years" comment="" />
            <choice value="months" comment="" />
            <choice value="days" comment="" />
            <choice value="hours" comment="" />
            <choice value="minutes" comment="" />
            <choice value="seconds" comment="" />
          </param>
          <param name="date_from_op" type="choice" comment="operation for start date">
            <choice value="<" comment="less than" />
            <choice value=">" comment="more than" />
            <choice value="<=" comment="less equal" />
            <choice value=">=" comment="more equal" />
          </param>
          <param name="date_to_op" type="choice" comment="operation for end date">
            <choice value="<" comment="less than" />
            <choice value=">" comment="more than" />
            <choice value="<=" comment="less equal" />
            <choice value=">=" comment="more equal" />
          </param>
        </value>
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="epoch time" />
        <item index="1" type="int" comment="download rate" />
        <item index="2" type="int" comment="upload rate" />
      </output>
    </method>
    <method name="getGroupBWSnapShot" auth_type="" requires_perm="" comment="">
      <input type="dict">
        <key type="str" comment="reporting condition" />
        <value type="dict" comment="">
          <param name="group_names" type="str" comment="list of group names"/>
          <param name="date_from" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'"/>
          <param name="date_to" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'"/>
          <param name="date_from_unit" type="choice" comment="date unit">
            <choice value="gregorian" comment="" />
            <choice value="jalali" comment="" />
            <choice value="years" comment="" />
            <choice value="months" comment="" />
            <choice value="days" comment="" />
            <choice value="hours" comment="" />
            <choice value="minutes" comment="" />
            <choice value="seconds" comment="" />
          </param>
          <param name="date_to_unit" type="choice" comment="date unit">
            <choice value="gregorian" comment="" />
            <choice value="jalali" comment="" />
            <choice value="years" comment="" />
            <choice value="months" comment="" />
            <choice value="days" comment="" />
            <choice value="hours" comment="" />
            <choice value="minutes" comment="" />
            <choice value="seconds" comment="" />
          </param>
          <param name="date_from_op" type="choice" comment="operation for start date">
            <choice value="<" comment="less than" />
            <choice value=">" comment="more than" />
            <choice value="<=" comment="less equal" />
            <choice value=">=" comment="more equal" />
          </param>
          <param name="date_to_op" type="choice" comment="operation for end date">
            <choice value="<" comment="less than" />
            <choice value=">" comment="more than" />
            <choice value="<=" comment="less equal" />
            <choice value=">=" comment="more equal" />
          </param>
        </value>
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="epoch time" />
        <item index="1" type="int" comment="download rate" />
        <item index="2" type="int" comment="upload rate" />
      </output>
    </method>
    <method name="getISPBWSnapShot" auth_type="" requires_perm="" comment="">
      <input type="dict">
        <key type="str" comment="reporting condition" />
        <value type="dict" comment="">
          <param name="isp_names" type="str" comment="list of isp names"/>
          <param name="date_from" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'"/>
          <param name="date_to" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'"/>
          <param name="date_from_unit" type="choice" comment="date unit">
            <choice value="gregorian" comment="" />
            <choice value="jalali" comment="" />
            <choice value="years" comment="" />
            <choice value="months" comment="" />
            <choice value="days" comment="" />
            <choice value="hours" comment="" />
            <choice value="minutes" comment="" />
            <choice value="seconds" comment="" />
          </param>
          <param name="date_to_unit" type="choice" comment="date unit">
            <choice value="gregorian" comment="" />
            <choice value="jalali" comment="" />
            <choice value="years" comment="" />
            <choice value="months" comment="" />
            <choice value="days" comment="" />
            <choice value="hours" comment="" />
            <choice value="minutes" comment="" />
            <choice value="seconds" comment="" />
          </param>
          <param name="date_from_op" type="choice" comment="operation for start date">
            <choice value="<" comment="less than" />
            <choice value=">" comment="more than" />
            <choice value="<=" comment="less equal" />
            <choice value=">=" comment="more equal" />
          </param>
          <param name="date_to_op" type="choice" comment="operation for end date">
            <choice value="<" comment="less than" />
            <choice value=">" comment="more than" />
            <choice value="<=" comment="less equal" />
            <choice value=">=" comment="more equal" />
          </param>
        </value>
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="epoch time" />
        <item index="1" type="int" comment="download rate" />
        <item index="2" type="int" comment="upload rate" />
      </output>
    </method>
    <method name="getRasBWSnapShot" auth_type="" requires_perm="" comment="">
      <input type="dict">
        <key type="str" comment="reporting condition" />
        <value type="dict" comment="">
          <param name="ras_ips" type="str" comment="list of ras ips"/>
          <param name="date_from" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'"/>
          <param name="date_to" type="str" comment="start date and time, format '%Y-%m-%d %H:%M'"/>
          <param name="date_from_unit" type="choice" comment="date unit">
            <choice value="gregorian" comment="" />
            <choice value="jalali" comment="" />
            <choice value="years" comment="" />
            <choice value="months" comment="" />
            <choice value="days" comment="" />
            <choice value="hours" comment="" />
            <choice value="minutes" comment="" />
            <choice value="seconds" comment="" />
          </param>
          <param name="date_to_unit" type="choice" comment="date unit">
            <choice value="gregorian" comment="" />
            <choice value="jalali" comment="" />
            <choice value="years" comment="" />
            <choice value="months" comment="" />
            <choice value="days" comment="" />
            <choice value="hours" comment="" />
            <choice value="minutes" comment="" />
            <choice value="seconds" comment="" />
          </param>
          <param name="date_from_op" type="choice" comment="operation for start date">
            <choice value="<" comment="less than" />
            <choice value=">" comment="more than" />
            <choice value="<=" comment="less equal" />
            <choice value=">=" comment="more equal" />
          </param>
          <param name="date_to_op" type="choice" comment="operation for end date">
            <choice value="<" comment="less than" />
            <choice value=">" comment="more than" />
            <choice value="<=" comment="less equal" />
            <choice value=">=" comment="more equal" />
          </param>
        </value>
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="epoch time" />
        <item index="1" type="int" comment="download rate" />
        <item index="2" type="int" comment="upload rate" />
      </output>
  </handler>
  <handler name="stat" comment="">
    <method name="getStatistics" auth_type="ADMIN" requires_perm="GOD" comment="">
      <input type="dict">
      </input>
      <output type="list" length="23" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="str" comment="stat key"></item>
          <item index="1" type="list" length="2" comment="stat value and unit">
            <item index="0" type="int, float" comment="stat value"></item>
            <item index="1" type="choice" comment="stat unit">
              <choice value="int" comment="" />
              <choice value="seconds" comment="" />
            </item>
          </item>
        </item>
      </output>
    </method>
    <method name="getAllStatsByStatCategory" auth_type="ADMIN" requires_perm="GOD" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <key type="str" comment="category name" />
        <value type="dict" comment="">
          <key type="str" comment="stat name" />
          <value type="list" length="2" comment="">
            <item index="0" type="str" comment="stat name" />
            <item index="1" type="list" length="5">
              <item index="0" type="list" length="4" comment="">
                <item index="0" value="5min" type="str" comment="" />
                <item index="1" value="300" type="int" comment="seconds" />
                <item index="2" type="float" comment="" />
                <item index="3" type="int" comment="" />
              </item>
              <item index="1" type="list" length="4" comment="">
                <item index="0" value="1hour" type="str" comment="" />
                <item index="1" value="3600" type="int" comment="seconds" />
                <item index="2" type="float" comment="" />
                <item index="3" type="int" comment="" />
              </item>
              <item index="2" type="list" length="4" comment="">
                <item index="0" value="8hour" type="str" comment="" />
                <item index="1" value="28800" type="int" comment="seconds" />
                <item index="2" type="float" comment="" />
                <item index="3" type="int" comment="" />
              </item>
              <item index="3" type="list" length="4" comment="">
                <item index="0" value="1day" type="str" comment="" />
                <item index="1" value="86400" type="int" comment="seconds" />
                <item index="2" type="float" comment="" />
                <item index="3" type="int" comment="" />
              </item>
              <item index="4" type="list" length="4" comment="">
                <item index="0" value="1week" type="str" comment="" />
                <item index="1" value="604800" type="int" comment="seconds" />
                <item index="2" type="float" comment="" />
                <item index="3" type="int" comment="" />
              </item>
            </item>
          </value>
        </value>
      </output>
    </method>
    <method name="getUserQueueStats" auth_type="ADMIN" requires_perm="GOD" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="str" comment="ras_description, or 'TOTAL'" />
          <item index="1" type="dict" comment="">
            <param name="auth" type="int" comment="" />
            <param name="auth_reonline" type="int" comment="" />
            <param name="can_stay" type="int" comment="" />
            <param name="other" type="int" comment="" />
            <param name="stop" type="int" comment="" />
            <param name="update" type="int" comment="" />
          </item>
        </item>
      </output>
    </method>
  </handler>
  <handler name="SystemNotification" comment="">
    <method name="getNotifications" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="last_notifications" type="int" optional="true" comment="default is 5" />
        <param name="only_unread" type="bool" optional="true" comment="default is false" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="dict" comment="">
          <param name="notification_id" type="int" comment="" />
          <param name="message" type="text" comment="" />
          <param name="date" type="str" comment="" />
          <param name="read" type="choice" comment="">
            <choice value="t" comment="true" />
            <choice value="f" comment="false" />
          </param>
          <param name="admin_id" type="int" comment="" />
          <param name="links" type="str" comment="" />
          <param name="type" type="str" comment="" />
        </item>
      </output>
    </method>
    <method name="changeNotificationStatus" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="notification_id" type="int" comment="" />
        <param name="read" type="bool" comment="" />
      </input>
      <output type="int" comment="number of updated notifications" />
    </method>
  </handler>
  <handler name="telephony_support" comment="">
    <method name="callerIDAuthenticate" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="caller_id" type="str" comment="" />
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="user_id" />
        <item index="1" type="float" comment="credit" />
        <item index="2" type="str" comment="language, 'fa' for Persian, or '' if not set for user" />
      </output>
    </method>
    <method name="authenticate" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="auth_by" type="choice" comment="">
          <choice value="user_id" comment="" />
          <choice value="serial" comment="" />
          <choice value="voip_username" comment="" />
          <choice value="internet_username" comment="" />
          <choice value="phone" comment="" />
        </param>
        <param name="auth_id" type="str" comment="" />
      </input>
      <output type="list" length="2" comment="">
        <item index="0" type="int" comment="user_id" />
        <item index="1" type="float" comment="credit" />
      </output>
    </method>
    <method name="getCurrentCredit" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
      </input>
      <output type="float" comment="credit" />
    </method>
    <method name="getRemainingByteDuration" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
      </input>
      <output type="list" length="2" comment="">
        <item index="0" type="choice" comment="user's status">
          <choice value="0" type="int" comment="Package" />
          <choice value="1" type="int" comment="Recharged" />
          <choice value="2" type="int" comment="Temporary Extended" />
        </item>
        <item index="1" type="dict" comment="remaining_duration_bytes">
          <key type="str" comment="charge_rule_desc" />
          <value type="list" length="3, 4" comment="">
            <item index="0" type="str" comment="duration" />
            <item index="1" type="str" comment="bytes" />
            <item index="2" type="int" comment="state">
            </item>
            <item index="3" optional="true" type="dict" comment="">
              <item name="max_rule_time_usage" type="list" length="2" comment="">
                <item index="0" type="str" comment="" />
                <item index="1" type="str" comment="" />
              </item>
              <item name="max_rule_traffic_usage" type="list" length="2" comment="">
                <item index="0" type="str" comment="" />
                <item index="1" type="str" comment="" />
              </item>
              <item name="max_rule_usage" type="list" length="2" comment="">
                <item index="0" type="str" comment="" />
                <item index="1" type="str" comment="" />
              </item>
            </item>
          </value>
        </item>
      </output>
    </method>
    <method name="getNearestExpDate" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
      </input>
      <output type="str" comment="expiration date" />
    </method>
    <method name="getFailureReason" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
      </input>
      <output type="choice" comment="">
        <choice value="0" type="int" comment="Successful" />
        <choice value="900" type="int" comment="NORMAL_USERNAME_DOESNT_EXISTS" />
        <choice value="901" type="int" comment="USER_LOCKED" />
        <choice value="902" type="int" comment="NO_CHARGE_DEFINED" />
        <choice value="903" type="int" comment="NO_APPLICABLE_RULE" />
        <choice value="904" type="int" comment="ABS_EXP_DATE_REACHED" />
        <choice value="905" type="int" comment="REL_EXP_DATE_REACHED, EXP_FROM_FIRST_LOGIN_REACHED, EXP_FROM_CREATION_DATE_REACHED" />
        <choice value="906" type="int" comment="CREDIT_FINISHED" />
        <choice value="907" type="int" comment="WRONG_PASSWORD" />
        <choice value="908" type="int" comment="MAX_CONCURRENT, RAS_DOESNT_ALLOW_MULTILOGIN" />
        <choice value="909" type="int" comment="UNKNOWN_ERROR" />
        <choice value="910" type="int" comment="LOGIN_FROM_THIS_MAC_DENIED" />
        <choice value="911" type="int" comment="LOGIN_FROM_THIS_IP_DENIED" />
        <choice value="912" type="int" comment="CANT_USE_MORE_THAN_ONE_SERVICE" />
        <choice value="913" type="int" comment="LOGIN_FROM_THIS_CALLER_ID_DENIED" />
        <choice value="914" type="int" comment="TIMELY_QUOTA_EXCEEDED" />
        <choice value="915" type="int" comment="TRAFFIC_QUOTA_EXCEEDED" />
        <choice value="916" type="int" comment="SYSTEM_SHUTTING_DOWN" />
        <choice value="917" type="int" comment="LOGIN_NOT_ALLOWED" />
        <choice value="918" type="int" comment="DAY_USAGE_FINISHED" />
        <choice value="919" type="int" comment="LOGIN_FROM_THIS_PORT_DENIED" />
        <choice value="920" type="int" comment="LATE_AUTH_REQUEST" />
      </output>
    </method>
    <method name="getLastConnection" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
      </input>
      <output type="list" length="4" comment="length=0 if there is no connection">
        <item index="0" type="str" comment="login_time" />
        <item index="1" type="int" comment="duration_seconds" />
        <item index="2" type="float" comment="credit_used" />
        <item index="3" type="bool" comment="successful" />
      </output>
    </method>
    <method name="recharge" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
        <param name="pin" type="str" comment="" />
      </input>
      <output type="float" comment="increased credit" />
    </method>
    <method name="checkInternetPassword" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
        <param name="internet_password" type="str" comment="" />
      </input>
      <output type="bool" comment="true if password is correct, false otherwise" />
    </method>
    <method name="changeInternetPassword" auth_type="ADMIN" requires_perm="TELEPHONY SUPPORT" comment="">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
        <param name="new_internet_password" type="str" comment="" />
      </input>
      <output type="bool" value="true" comment="" />
    </method>
  </handler>
  <handler name="user" comment="">
    <method name="addNewUsers" auth_type="ADMIN" requires_perm="ADD NEW USER" comment="">
      <input type="dict">
        <param name="count" type="int" comment="" />
        <param name="credit" type="float" comment="" />
        <param name="isp_name" type="str" comment="" />
        <param name="group_name" type="str" comment="" />
        <param name="credit_comment" type="str" comment="" />
        <param name="custom_fields" type="dict" optional="true" comment="" />
      </input>
      <output type="list" length="-1" item_type="int" comment="user_ids">
      </output>
    </method>
    <method name="getUserInfo" auth_type="USER" comment="By User">
      <input type="dict" comment="">
      </input>
      <output type="dict" comment="User Info dict">
        <param name="basic_info" type="dict" commnet="">
          <param name="user_id" type="int" comment="" />
          <param name="creation_date" type="str" comment="" />
          <param name="credit" type="float"  comment="" />
          <param name="deposit" type="float" comment="" />
          <param name="group_id" type="int" comment="" />
          <param name="group_name" type="str" comment="" />
          <param name="isp_id" type="int" comment="" />
          <param name="isp_name" type="str" comment="" />
          <param name="nearest_exp_date" type="str" comment="%Y-%m-%d %H:%M" />
          <param name="recharge_deposit" type="float" comment="" />
          <param name="status" type="choice" comment="">
            <choice value="0" type="int" comment="Package" />
            <choice value="1" type="int" comment="Recharged" />
            <choice value="2" type="int" comment="Temporary Extended" />
          </param>
        </param>
        <param name="attrs" type="dict" comment="also includes custom fields, as custom_field_NAME keys">
          <param name="user_id" type="int" optional="false" comment="" />
          <param name="normal_username" type="str" optional="true" comment="" />
          <param name="normal_password" type="str" optional="true" comment="" />
          <param name="first_login" type="str" optional="true" comment="" />
          <param name="real_first_login" type="str" optional="true" comment="" />
          <param name="nearest_exp_date" type="str" optional="true" comment="%Y-%m-%d %H:%M" />
          <param name="nearest_exp_date_epoch" type="int" optional="true" comment="epoch time" />
          <param name="time_to_nearest_exp_date" type="float" optional="true" comment="in seconds" />
          <param name="charge_rule_usage" type="list" length="-1" optional="true">
            <item type="list" length="5" comment="">
              <item index="0" type="int" comment="charge_rule_id" />
              <item index="1" type="str" comment="charge_rule_description" />
              <item index="2" type="str" comment="credit_usage" />
              <item index="3" type="str" comment="time_usage, in seconds" />
              <item index="4" type="str" comment="traffic_usage, in bytes" />
            </item>
          </param>
          <param name="charge" type="str" optional="true" comment="charge name" />
          <param name="last_renew" type="str_float" optional="true" comment="epoch time (float)" />
          <param name="abs_exp_date" type="str_datetime" optional="true" requires_param="abs_exp_date_unit" comment="gregorian datetime string" />
          <param name="abs_exp_date_unit" type="str" value="gregorian" optional="true" comment="" />
          <param name="ippool" type="str" optional="true" comment="User Info: Internet: IPpool: (ippool name)" />
          <param name="assign_ip" type="str" optional="true" comment="User Info: Internet: Assign IP Address To User: (comma-seperated values)" />
          <param name="assign_netmask" type="str" optional="true" comment="User Info: Internet: Assign Netmask To User" />
          <param name="assign_route_ip" type="str" optional="true" comment="User Info: Internet:  Assign Route IP To User: (comma-seperated values)" />
          <param name="assign_dns" type="str" optional="true" comment="User Info: Internet: Assign DNS To User: (First and Second DNSs, comma-seperated)" />
          <param name="assign_dns_1" type="str" optional="true" comment="User Info: Internet: Assign DNS To User: (First DNS)" />
          <param name="assign_dns_2" type="str" optional="true" comment="User Info: Internet: Assign DNS To User: (Second DNS)" />
          <param name="in_ras_ippool" type="str" optional="true" comment="User Info: Internet: In Ras IPPool: (ippool name)" />
          <param name="caller_id" type="str" optional="true" comment="User Info: VoIP: Caller ID: VoIP Caller ID" />
          <param name="caller_id_bind_on_login" type="true_if_exists" optional="true" comment="User Info: VoIP: VoIP Caller ID Bind On Next Login" />
          <param name="fast_dial" type="list" item_type="str" length="20" optional="true" comment="User Info: VoIP: Fast Dial" />
          <param name="forward_number" type="str" optional="true" comment="User Info: VoIP: Forward Number" />
          <param name="asterisk_extension" type="str" optional="true" comment="User Info: VoIP: Asterisk: Asterisk Extension" />
          <param name="asterisk_ras_ip" type="str" optional="true" comment="User Info: VoIP: Asterisk: Astersik Ras IP" />
          <param name="asterisk_ras_id" type="str_int" optional="true" comment="User Info: VoIP: Asterisk:  Astersik Ras IP (ras_id)" />
          <param name="asterisk_ext_details" type="dict" optional="true" comment="User Info: VoIP: Asterisk">
            <param name="id" type="int" comment="" />
            <param name="priority" type="int" comment="" />
            <param name="user_id" type="int" comment="" />
            <param name="app" type="str" comment="'AGI' by default" />
            <param name="appdata" type="str" comment="" />
            <param name="context" type="str" comment="'ibs_users' by default" />
            <param name="exten" type="str" comment="the same as value of attrs.asterisk_extension" />
            <param name="sip_registered" type="bool" comment="" />
            <param name="iax_registered" type="bool" comment="" />
          </param>
          <param name="asterisk_sip_details" type="dict" optional="true" comment="User Info: VoIP: Asterisk: SIP Details">
            <param name="allow" type="str" comment="semicolon-seperated" />
            <param name="cancallforward" type="choice" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="canreinvite" type="choice" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="context" type="str" comment="'incoming' by default" />
            <param name="disallow" type="str" comment="'all' by default" />
            <param name="host" type="str" comment="'dynamic' by default" />
            <param name="nat" type="choice" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="port" type="int" comment="" />
            <param name="qualify" type="choice" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="regseconds" type="int" comment="" />
            <param name="type" type="str" comment="'friend' by default" />
          </param>
          <param name="asterisk_iax_details" type="dict" optional="true" comment="User Info: VoIP: Asterisk: IAX Details">
            <param name="allow" type="str" comment="semicolon-seperated" />
            <param name="auth" type="str" comment="'md5' by default" />
            <param name="context" type="str" comment="'incoming' by default" />
            <param name="disallow" type="str" comment="'all' by default" />
            <param name="host" type="str" comment="'dynamic' by default" />
            <param name="notransfer" type="choice" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="port" type="int" comment="" />
            <param name="qualify" type="choice" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="regseconds" type="int" comment="" />
            <param name="type" type="str" comment="'friend' by default" />
          </param>
          <param name="asterisk_did" type="list" length="-1" item_type="list" optional="true" comment="User Info: VoIP: Asterisk DID: Asterisk DID">
            <item type="list" length="3" comment="">
              <item index="0" type="str" comment="Number"></item>
              <item index="1" type="str" comment="Destination"></item>
              <item index="2" type="str" comment="Peer"></item>
            </item>
          </param>
          <param name="asterisk_did_ras_ip" type="str" optional="true" comment="User Info: VoIP: Asterisk DID: Astersik DID Ras IP" />
          <param name="asterisk_did_ras_id" type="str_int" optional="true" comment="User Info: VoIP: Asterisk DID: Astersik DID Ras IP (ras_id)" />
          <param name="comment" type="str" optional="true" comment="User Info: Comment: Comment" />
          <param name="name" type="str" optional="true" comment="User Info: Comment: Name" />
          <param name="email" type="str" optional="true" comment="User Info: Comment: Email" />
          <param name="phone" type="str" optional="true" comment="User Info: Comment: Phone" />
          <param name="cell_phone" type="str" optional="true" comment="User Info: Comment: Cell Phone Number" />
          <param name="birthdate" type="str" optional="true" comment="User Info: Comment: Date of Birth" />
          <param name="address" type="str" optional="true" comment="User Info: Comment: Address" />
          <param name="postal_code" type="str" optional="true" comment="User Info: Comment: Postal Code" />
          <param name="credit_limit" type="str_float" optional="true" comment="User Info: Limitations: Credit Limit" />
          <param name="exp_date_temp_extend" type="str" optional="true" comment="User Info: Exp Dates: User Expiration Date: Temporary Extend" />
          <param name="temp_extend_log_id" type="str" optional="true" comment="User Info: Exp Dates: User Expiration Date: Temporary Extend" />
          <param name="exp_from_creation_date" type="str" optional="true" comment="User Info: Exp Dates: Package Expiration Dates: Expiration Date From Creation Date" />
          <param name="exp_from_first_login" type="str" optional="true" comment="User Info: Exp Dates: Package Expiration Dates: Expiration Date From Real First Login:" />
          <param name="exp_from_renew" type="str" optional="true" comment="User Info: Exp Dates: Package Expiration Dates: Expiration Date From Renew" />
          <param name="exp_monthly" type="str" optional="true" comment="User Info: Exp Dates: Package Expiration Dates: Monthly Expiration Date" />
          <param name="extra_charge_profile" type="str" optional="true" comment="User Info: Extra Charge Profile" />
          <param name="fast_dial" type="list" item_type="str" length="20" optional="true" comment="User Info: VoIP: Fast Dial" />
          <param name="forward_number" type="str" optional="true" comment="" />
          <param name="idle_threshold_timespan" type="str" optional="true" comment="" />
          <param name="idle_bytes_threshold" type="str" optional="true" comment="" />
          <param name="idle_timeout" type="str" optional="true" comment="" />
          <param name="bw_send_rate" type="str" optional="true" comment="" />
          <param name="bw_receive_rate" type="str" optional="true" comment="" />
          <param name="in_ras_bw" type="str" optional="true" comment="" />
          <param name="limit_caller_id" type="str" optional="true" comment="User Info: Limitations: Limit Caller ID: Caller ID" />
          <param name="limit_caller_id_allow_not_defined" type="str_int" optional="true" comment="User Info: Limitations: Limit Caller ID: Allow users with no Caller ID: (0=No, 1=Yes)" />
          <param name="limit_mac" type="str" optional="true" comment="User Info: Limitations: Limit Mac Address: MAC Address" />
          <param name="limit_port" type="str" optional="true" comment="User Info: Limitations: Limit Port" />
          <param name="limit_ras" type="list" item_type="str" optional="true" comment="User Info: Limitations: Limit Ras: (value is list of allowed RAS Descriptions)" />
          <param name="limit_station_ip" type="str" optional="true" comment="value is Station IP" />
          <param name="limit_usage_days" type="str_int" optional="true" comment="number of days" />
          <param name="lock" type="str" optional="true" comment="user is locked if this key in present, value shows the lock reason" />
          <param name="assigned_endpoint" type="str" optional="true" comment="Message Center: End Point" />
          <param name="mc_charge" type="str" optional="true" comment="Message Center: Message Charge, format: 'send_latin,send_unicode,receive'" />
          <param name="mc_charge_send_latin" type="str_int" optional="true" comment="Message Center: Message Charge: Send Charge: Latin" />
          <param name="mc_charge_send_unicode" type="str_int" optional="true" comment="Message Center: Message Charge: Send Charge: Unicode" />
          <param name="mc_charge_recv" type="str_int" optional="true" comment="Message Center: Message Charge: Receive Charge" />
          <param name="mc_min_user_credit" type="str_float" optional="true" comment="Message Center: Message Charge: Minimum User Credit" />
          <param name="email_address" type="str" optional="true" comment="MailBox: Email Address" />
          <param name="mail_quota" type="str_int" optional="true" comment="MailBox: MailBox Quota" />
          <param name="mail_usage" type="str_int" optional="true" comment="MailBox: MailBox Usage" />
          <param name="mikrotik_address_list" type="str" optional="true" comment="" />
          <param name="mikrotik_bw" type="str" optional="true"
            comment="Mikrotik BW Control (Burst), format: GuaranteeReceiveRate/GuaranteeSendRate ReceiveBurst/SendBurst ReceiveBurstThreshold/SendBurstThreshold ReceiveBurstTime/SendBurstTime Priority MinReceiveRate/MinSendRate" />
          <param name="mikrotik_bw_recv_rate" type="str_int" optional="true" comment="Guarantee Receive Rate" />
          <param name="mikrotik_bw_send_rate" type="str_int" optional="true" comment="Guarantee Send Rate" />
          <param name="mikrotik_bw_recv_burst" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_send_burst" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_recv_burst_threshold" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_send_burst_threshold" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_recv_burst_time" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_send_burst_time" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_priority" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_min_recv_rate" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_min_send_rate" type="str_int" optional="true" comment="" />
          <param name="multi_login" type="str_int" optional="true" comment="Limitations: Multi Login, value is maximum number of instances" />
          <param name="notification_profile" type="str" optional="true" comment="notification profile name" />
          <!--<param name="periodic_reset_rule_usage" type="str" optional="true" comment="Group Info: Periodic Accounting: Periodic Reset Rule Usages: Day of Week" />!-->
          <param name="time_periodic_accounting_monthly" type="choice" optional="true" comment="Monthly Time: Monthly Reset Type">
            <choice value="gregorian" />
            <choice value="jalali" />
          </param>
          <param name="time_periodic_accounting_monthly_limit" type="str_int" optional="true" comment="Monthly Time: Monthly Time Limit" />
          <param name="time_periodic_accounting_monthly_usage" type="str_int" optional="true" comment="Monthly Time: This Period Usage" />
          <param name="time_periodic_accounting_monthly_reset" type="str_datetime" optional="true" comment="Monthly Time: Next Reset" />
          <param name="traffic_periodic_accounting_monthly" type="str" optional="true" comment="Monthly Traffic: Monthly Reset Type">
            <choice value="gregorian" />
            <choice value="jalali" />            
          </param>
          <param name="traffic_periodic_accounting_monthly_limit" type="str_int" optional="true" comment="Monthly Traffic: Monthly Traffic Limit" />
          <param name="traffic_periodic_accounting_monthly_usage" type="str_int" optional="true" comment="Monthly Traffic: This Period Usage" />
          <param name="traffic_periodic_accounting_monthly_reset" type="str_datetime" optional="true" comment="Monthly Traffic: Next Reset" />
          <param name="time_periodic_accounting_daily" type="str" optional="true" comment="Daily Time: Number of days in period" />
          <param name="time_periodic_accounting_daily_limit" type="str_int" optional="true" comment="Daily Time: Time Limit" />
          <param name="time_periodic_accounting_daily_usage" type="str_int" optional="true" comment="Daily Time: This Period Usage" />
          <param name="time_periodic_accounting_daily_reset" type="str_datetime" optional="true" comment="Daily Time: Next Reset" />
          <param name="traffic_periodic_accounting_daily" type="str" optional="true" comment="Daily Traffic: Number of days in period" />
          <param name="traffic_periodic_accounting_daily_limit" type="str_int" optional="true" comment="Daily Traffic: Time Limit" />
          <param name="traffic_periodic_accounting_daily_usage" type="str_int" optional="true" comment="Daily Traffic: This Period Usage" />
          <param name="traffic_periodic_accounting_daily_reset" type="str_datetime" optional="true" comment="Daily Traffic: Next Reset" />
          <param name="time_periodic_accounting_weekly" type="str" optional="true" comment="Daily Time: Number of days in period" />
          <param name="time_periodic_accounting_weekly_limit" type="str_int" optional="true" comment="Daily Time: Time Limit" />
          <param name="time_periodic_accounting_weekly_usage" type="str_int" optional="true" comment="Daily Time: This Period Usage" />
          <param name="time_periodic_accounting_weekly_reset" type="str_datetime" optional="true" comment="Daily Time: Next Reset" />
          <param name="traffic_periodic_accounting_weekly" type="str" optional="true" comment="Weeklyy Traffic: Number of days in period" />
          <param name="traffic_periodic_accounting_weekly_limit" type="str_int" optional="true" comment="Weekly Traffic: Time Limit" />
          <param name="traffic_periodic_accounting_weekly_usage" type="str_int" optional="true" comment="Weekly Traffic: This Period Usage" />
          <param name="traffic_periodic_accounting_weekly_reset" type="str_datetime" optional="true" comment="Weekly Traffic: Next Reset" />
          <param name="monthly_periodic_credit_change" type="choice" optional="true" comment="Monthly Credit Change: Monthly Reset Type">
            <choice value="gregorian" />
            <choice value="jalali" />
          </param>
          <param name="monthly_periodic_credit_change_day" type="str" optional="true" comment="Monthly Credit Change: Monthly Reset Type: Day" />
          <param name="monthly_periodic_credit_change_type" type="choice" optional="true" comment="Monthly Credit Change: Credit Change Type">
            <choice value="absolute" comment="" />
            <choice value="relative" comment="" />
          </param>
          <param name="monthly_periodic_credit_change_amount" type="str" optional="true" comment="Monthly Credit Change: Credit Change Amount" />
          <param name="monthly_periodic_credit_change_after_first_login" type="bool" optional="true" comment="Monthly Credit Change: Effective After First Login" />
          <param name="monthly_periodic_credit_change_negate_credit" type="bool" optional="true" comment="Monthly Credit Change: Negate Credit" />
          <param name="monthly_periodic_credit_change_do_on_first_login" type="bool" optional="true" comment="Monthly Credit Change: Do On First Login" />
          <param name="monthly_periodic_credit_change_reset" type="str_datetime" optional="true" comment="Monthly Credit Change: Next Reset" />
          <param name="daily_periodic_credit_change" type="str_int" optional="true" comment="Monthly Credit Change: Number of days in period"> </param>
          <param name="daily_periodic_credit_change_type" type="choice" optional="true" comment="Daily Credit Change: Credit Change Type">
            <choice value="absolute" comment="" />
            <choice value="relative" comment="" />
          </param>
          <param name="daily_periodic_credit_change_amount" type="str_int" optional="true" comment="Daily Credit Change: Credit Change Amount" />
          <param name="daily_periodic_credit_change_after_first_login" type="bool" optional="true" comment="Daily Credit Change: Effective After First Login" />
          <param name="daily_periodic_credit_change_negate_credit" type="bool" optional="true" comment="Daily Credit Change: Negate Credit" />
          <param name="daily_periodic_credit_change_do_on_first_login" type="bool" optional="true" comment="Daily Credit Change: Do On First Login" />
          <param name="daily_periodic_credit_change_reset" type="str_datetime" optional="true" comment="Daily Credit Change: Next Reset" />
          <param name="persistent_lan_ip" type="list" item_type="str" optional="true" comment="" />
          <param name="persistent_lan_mac" type="list" item_type="str" optional="true" comment="" />
          <param name="persistent_lan_ras_ip" type="list" item_type="str" optional="true" comment="" />
          <param name="plan" type="str" optional="true" comment="" /><!--FIXME!-->
          <param name="radius_attrs" type="str" optional="true" comment="User Info: Misc: Radius Attributes" />
          <param name="rel_exp_date" type="int" optional="true" requires_param="rel_exp_date_unit" comment="User Info: Exp Dates: Relative Expiration Date" />
          <param name="rel_exp_date_unit" type="choice" optional="true" comment="">
            <choice value="Minutes" comment="" />
            <choice value="Hours" comment="" />
            <choice value="Days" comment="" />
            <choice value="Months" comment="1 month means 30 days" />
            <choice value="Years" comment="1 month means 365 days" /> 
          </param>
          <param name="rel_exp_date_negative_credit" type="int" optional="true" requires_param="rel_exp_date_negative_credit_unit" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Relative Expiration Date" />
          <param name="rel_exp_date_negative_credit_unit" type="choice" optional="true" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Relative Expiration Date">
            <choice value="Minutes" comment="" />
            <choice value="Hours" comment="" />
            <choice value="Days" comment="" />
            <choice value="Months" comment="1 month means 30 days" />
            <choice value="Years" comment="1 month means 365 days" />
          </param>
          <param name="negative_credit_start" type="str_datetime" optional="true" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Start" />
          <param name="renew_next_group" type="str" optional="true" comment="group_name" />
          <param name="second_normal_username" type="str" optional="true" comment="Second Internet Username" />
          <param name="serial" type="str" optional="true" comment="User Info: Username: Serial ID" />
          <param name="session_timeout" type="str_int" optional="true" comment="User Info: Limitations: Session Timeout" />
          <param name="voip_preferred_language" type="str" optional="true" comment="preferred language code for VoIP telephony support" />
          <param name="voip_username" type="str" optional="true" comment="VoIP Username" />
          <!-- true_if_exists: !-->
          <param name="save_bw_usage" type="true_if_exists" optional="true" comment="User Info: Flags: Save Bandwidth Usage" />
          <param name="allow_user_disconnect" type="true_if_exists" optional="true" comment="User Info: Flags: Allow User Disconnect" />
          <param name="deny_change_password" type="true_if_exists" comment="User Info: Flags: Deny Change Password" />
          <param name="auto_renew" type="true_if_exists" comment="User Info: Flags: Auto Renew" />
          <param name="reset_negative_credit_on_renew" type="true_if_exists" optional="true_if_exists" comment="User Info: Flags: Reset Negative Credit On Renew" />
          <param name="renew_do_not_reset_credit" type="true_if_exists" optional="true_if_exists" comment="User Info: Flags: Renew Do Not Reset Credit" />
          <param name="renew_do_not_reset_credit_on_state_package" type="true_if_exists" optional="true_if_exists" comment="User Info: Flags: Renew Do Not Reset Credit On Package State" />
          <param name="renew_do_not_reset_credit_on_state_recharged" type="true_if_exists" optional="true_if_exists" comment="User Info: Flags: Do Not Reset Credit On Recharged State" />
          <param name="auto_renew_on_credit_finish" type="true_if_exists" comment="User Info: Flags: Auto Renew On Credit Finish" />
          <param name="auto_renew_do_not_reset_credit" type="true_if_exists" optional="true" comment="User Info: Flags: Auto Renew No Not Reset Credit" />
          <param name="auto_recharge" type="true_if_exists" comment="User Info: Flags: Auto Recharge" />
          <param name="allow_recharge_by_voucher" type="true_if_exists" comment="User Info: Flags: Allow Recharge By Voucher" />
          <param name="prevent_web_login" type="true_if_exists" optional="true" comment="User Info: Flags: Prevent Web Login" />
          <param name="enable_failed_login" type="true_if_exists" comment="User Info: Flags: Enable Failed Login" />
          <param name="ignore_idle_threshold_static_ip" type="str" optional="true" comment="User Info: Flags: Ignore Idle Threshold on static IP" />
          <param name="ignore_idle_threshold" type="true_if_exists" optional="true" comment="User Info: Flags: Ignore Idle Threshold" />
          <!-- "is_deposit_transferee" and "is_deposit_transferer" are disabled in C
          <param name="is_deposit_transferee" type="true_if_exists" comment="User Info: Flags: Allow Take Away Deposit" />
          <param name="is_deposit_transferer" type="true_if_exists" comment="User Info: Flags: Allow Receive Deposit" />
          !-->
          <param name="caller_id_bind_on_login" type="true_if_exists" optional="true" comment="User Info: VoIP: VoIP Caller ID Bind On Next Login" />
          <param name="limit_caller_id_bind_on_login" type="true_if_exists" optional="true" comment="User Info: Limitations: Limit Caller ID: Bind on next login" />
          <param name="limit_mac_bind_on_login" type="true_if_exists" optional="true" comment="" />
          <param name="limit_port_bind_on_login" type="true_if_exists" optional="true" comment="" />
          <param name="limit_ras_bind_on_login" type="true_if_exists" optional="true" comment="" />
          <param name="limit_station_ip_bind_on_login" type="true_if_exists" optional="true" comment="" />
        </param>
        <param name="has_online_payment_gateways" type="bool" optional="true" comment="" />
        <param name="user_repr" type="str" comment="internet/voip username if exist" />
        <param name="online_status" type="bool" comment="true if online, false if offline" />
        <param name="internet_onlines" type="list" length="-1" comment="list length is number of instances, usually 1">
          <item type="list" length="15" comment="user instance">
            <item index="0" type="str" comment="ras_ip"></item>
            <item index="1" type="str" comment="ras_desc"></item>
            <item index="2" type="str" comment="unique_id_val"></item>
            <item index="3" type="str" comment="login_time_formatted"></item>
            <item index="4" type="str" comment="remote_ip"></item>
            <item index="5" type="choice" comment="failed_status">
              <choice value="0" type="int" comment="not failed user" />
              <choice value="1" type="int" comment="failed user" />
              <choice value="2" type="int" comment="idle user" />
            </item>
            <item index="6" type="str" comment="next_event"></item>
            <item index="7" type="str" comment="mac"></item>
            <item index="8" type="str" comment="port"></item>
            <item index="9" type="str" comment="in_bytes"></item>
            <item index="10" type="str" comment="out_bytes"></item>
            <item index="11" type="str" comment="in_rate"></item>
            <item index="12" type="str" comment="out_rate"></item>
            <item index="13" type="str" comment="failed_reason_key"></item>
            <item index="14" type="str" comment="failed_reason_msg"></item>
          </item>
        </param>
        <param name="voip_onlines" type="list" length="-1" comment="list length is number of instances, usually 1">
          <item type="list" length="-1" comment="user instance">
            <item type="list" length="6">
              <item index="0" type="str" comment="RAS IP" />
              <item index="1" type="str" comment="RAS Description" />
              <item index="2" type="str" comment="Unique ID" />
              <item index="3" type="str" comment="Login Time" />
              <item index="4" type="str" comment="Called Number" />
              <item index="5" type="str" comment="Prefix Name" />
            </item>
          </item>
        </param>
      </output>
    </method>
    <method name="getUserInfo" auth_type="ADMIN" requires_perm="GET USER INFORMATION" comment="By Admin">
      <input type="dict" comment="one of these params is needed">
        <param name="user_id" type="str_int" multi_str="true" optional="true" comment="" />
        <param name="normal_username" type="str" multi_str="true" optional="true" comment="" />
        <param name="voip_username" type="str" multi_str="true" optional="true" comment="" />
        <param name="serial" type="str" multi_str="true" optional="true" comment="" />
        <param name="phone" type="str" multi_str="true" optional="true" comment="" />
      </input>
      <output type="dict" comment="">
        <key type="str_int" comment="User ID"></key>
        <value type="dict" comment="User Info dict, the same as output of getUserInfo by USER">
        </value>
      </output>
    </method>
    <method name="doesUserExists" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="normal_username" type="str" multi_str="false" comment="" />
      </input>
      <output type="bool" comment="true if username exists, false otherwise" />
    </method>
    <method name="updateUserAttrs" auth_type="ADMIN" requires_perm="CHANGE USER ATTRIBUTES" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="attrs" type="dict" comment="">
          <param name="normal_user_spec" type="dict" optional="true" comment="">
            <param name="normal_username" type="str" optional="true" comment="if missing, username will be generated randomly" />
            <param name="normal_username_random_prefix" type="str" optional="true" comment="default to empty string" />
            <param name="normal_username_random_length" type="int" optional="true" comment="default to 8" />
            <param name="normal_username_random_type" type="choice" optional="true" comment="">
              <choice value="0" type="int" comment="alphanumeric: abcdefghijkmnpqrstuvwxyz23456789" />
              <choice value="1" type="int" comment="alphabet only: abcdefghijklmnopqrstuvwxyz" />
              <choice value="2" type="int" default="true" comment="numbers only: 123456789" />
            </param>
            <param name="normal_password" type="str" optional="true" comment="if missing, password will be generated randomly" />
            <param name="normal_password_random_length" type="int" optional="true" comment="default to 8" />
            <param name="normal_password_random_type" type="choice" optional="true" comment="">
              <choice value="0" type="int" comment="alphanumeric: abcdefghijkmnpqrstuvwxyz23456789" />
              <choice value="1" type="int" comment="alphabet only: abcdefghijklmnopqrstuvwxyz" />
              <choice value="2" type="int" default="true" comment="numbers only: 123456789" />
            </param>
            <param name="normal_save" type="bool" optional="true" comment="true, is you want the username and password to be saved in database, defaults to false" />
          </param>
          <param name="voip_user_spec" type="dict" optional="true" comment="">
            <param name="voip_username" type="str" optional="true" comment="if missing, username will be generated randomly" />
            <param name="voip_username_random_prefix" type="str" optional="true" comment="default to empty string" />
            <param name="voip_username_random_length" type="int" optional="true" comment="default to 8" />
            <param name="voip_username_random_type" type="choice" optional="true" comment="">
              <choice value="0" type="int" comment="alphanumeric: abcdefghijkmnpqrstuvwxyz23456789" />
              <choice value="1" type="int" comment="alphabet only: abcdefghijklmnopqrstuvwxyz" />
              <choice value="2" type="int" default="true" comment="numbers only: 123456789" />
            </param>
            <param name="voip_password" type="str" optional="true" comment="if missing, password will be generated randomly" />
            <param name="voip_password_random_length" type="int" optional="true" comment="default to 8" />
            <param name="voip_password_random_type" type="choice" optional="true" comment="">
              <choice value="0" type="int" comment="alphanumeric: abcdefghijkmnpqrstuvwxyz23456789" />
              <choice value="1" type="int" comment="alphabet only: abcdefghijklmnopqrstuvwxyz" />
              <choice value="2" type="int" default="true" comment="numbers only: 123456789" />
            </param>
            <param name="voip_save" type="bool" optional="true" comment="true, is you want the username and password to be saved in database, defaults to false" />
          </param>
          <param name="custom_fields" type="list" length="2" optional="true" dynamic_keys="true" comment="">
            <item index="0" type="dict" comment="attributes to update">
              <key type="str" comment="custom_field_NAME" />
              <value comment="custom field value" />
            </item>
            <item index="1" type="list" length="-1" item_type="str" comment="attributes to delete" />
          </param>
          <param name="first_login" type="int" optional="true" comment="epoch time" />
          <param name="auto_renew" type="true_if_exists" comment="User Info: Flags: Auto Renew" />
          <param name="auto_recharge" type="true_if_exists" comment="User Info: Flags: Auto Recharge" />
          <param name="auto_renew_on_credit_finish" type="true_if_exists" comment="User Info: Flags: Auto Renew On Credit Finish" />
          <param name="auto_renew_do_not_reset_credit" type="true_if_exists" optional="true" comment="User Info: Flags: Auto Renew No Not Reset Credit" />
          <param name="charge" type="str" optional="true" comment="charge name" />
          <param name="abs_exp_date" type="str" optional="true" requires_param="abs_exp_date_unit" comment="gregorian datetime string" />
          <param name="abs_exp_date_unit" value="gregorian" optional="true" comment="" />
          <param name="allow_recharge_by_voucher" type="true_if_exists" comment="User Info: Flags: Allow Recharge By Voucher" />
          <param name="allow_user_disconnect" type="true_if_exists" optional="true_if_exists" comment="User Info: Flags: Allow User Disconnect" />
          <param name="assign_dns_1" type="str" optional="true" requires_param="assign_dns_2" comment="" />
          <param name="assign_dns_2" type="str" optional="true" comment="" />
          <param name="assign_ip" type="str" optional="true" comment="comma-seperated values" />
          <param name="assign_netmask" type="str" optional="true" comment="" />
          <param name="assign_route_ip" type="str" optional="true" comment="comma-seperated values" />
          <param name="caller_id" type="str" optional="true" comment="User Info: VoIP: Caller ID: VoIP Caller ID" />
          <param name="caller_id_bind_on_login" type="true_if_exists" optional="true" comment="User Info: VoIP: VoIP Caller ID Bind On Next Login" />
          <param name="fast_dial" type="list" item_type="str" length="20" optional="true" comment="User Info: VoIP: Fast Dial" />
          <param name="forward_number" type="str" optional="true" comment="User Info: VoIP: Forward Number" />
          <param name="asterisk_extension" type="str" optional="true" requires_param="asterisk_ras_ip, asterisk_sip_details, asterisk_iax_details" comment="User Info: VoIP: Asterisk: Asterisk Extension" />
          <param name="asterisk_ras_ip" type="str" optional="true" comment="User Info: VoIP: Asterisk: Astersik Ras IP" />
          <param name="asterisk_sip_details" type="dict" optional="true" comment="User Info: VoIP: Asterisk: SIP Details">
            <param name="allow" type="str" optional="true" comment="semicolon-seperated" />
            <param name="cancallforward" type="choice" optional="true" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="canreinvite" type="choice" optional="true" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="context" type="str" optional="true" comment="'incoming' by default" />
            <param name="disallow" type="str" optional="true" comment="'all' by default" />
            <param name="host" type="str" optional="true" comment="'dynamic' by default" />
            <param name="nat" type="choice" optional="true" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="port" type="int" optional="true" comment="" />
            <param name="qualify" type="choice" optional="true" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="regseconds" type="int" optional="true" comment="" />
            <param name="type" type="str" optional="true" comment="'friend' by default" />
          </param>
          <param name="asterisk_iax_details" type="dict" optional="true" comment="User Info: VoIP: Asterisk: IAX Details">
            <param name="allow" type="str" optional="true" comment="semicolon-seperated" />
            <param name="auth" type="str" optional="true" comment="'md5' by default" />
            <param name="context" type="str" optional="true" comment="'incoming' by default" />
            <param name="disallow" type="str" optional="true" comment="'all' by default" />
            <param name="host" type="str" optional="true" comment="'dynamic' by default" />
            <param name="notransfer" type="choice" optional="true" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="port" type="int" optional="true" comment="" />
            <param name="qualify" type="choice" optional="true" comment="">
              <choice value="yes" />
              <choice value="no" />
            </param>
            <param name="regseconds" type="int" optional="true" comment="" />
            <param name="type" type="str" optional="true" comment="'friend' by default" />
          </param>
          <param name="asterisk_did" type="list" length="-1" item_type="list" optional="true" comment="User Info: VoIP: Asterisk DID: Asterisk DID">
            <item type="list" length="3" comment="">
              <item index="0" type="str" comment="Number"></item>
              <item index="1" type="str" comment="Destination"></item>
              <item index="2" type="str" comment="Peer"></item>
            </item>
          </param>
          <param name="asterisk_did_ras_ip" type="str" optional="true" comment="User Info: VoIP: Asterisk DID: Astersik DID Ras IP" />
          <param name="asterisk_did_ras_id" type="str_int" optional="true" comment="User Info: VoIP: Asterisk DID: Astersik DID Ras IP (ras_id)" />
          <param name="comment" type="str" optional="true" comment="Comment: Comment" />
          <param name="name" type="str" optional="true" comment="Comment: Name" />
          <param name="email" type="str" optional="true" comment="Comment: Email" />
          <param name="phone" type="str" optional="true" comment="Comment: Phone" />
          <param name="cell_phone" type="str" optional="true" comment="Comment: Cell Phone Number" />
          <param name="birthdate" type="str" optional="true" comment="Comment: Date of Birth" />
          <param name="address" type="str" optional="true" comment="Comment: Address" />
          <param name="postal_code" type="str" optional="true" comment="Comment: Postal Code" />
          <param name="credit_limit" type="str_float" optional="true" comment="Limitations: Credit Limit" />
          <param name="deny_change_password" type="true_if_exists" comment="User Info: Flags: Deny Change Password" />
          <param name="enable_failed_login" type="true_if_exists" comment="User Info: Flags: Enable Failed Login" />
          <param name="exp_date_temp_extend" type="str" optional="true" comment="" />
          <param name="temp_extend_log_id" type="str" optional="true" comment="" />
          <param name="exp_from_creation_date" type="str" optional="true" comment="" />
          <param name="exp_from_first_login" type="str" optional="true" comment="" />
          <param name="exp_from_renew" type="str" optional="true" comment="" />
          <param name="exp_monthly" type="str" optional="true" comment="" />
          <param name="extra_charge_profile" type="str" optional="true" comment="" />
          <param name="fast_dial" type="list" item_type="str" length="20" optional="true" comment="User Info: VoIP: Fast Dial" />
          <param name="forward_number" type="str" optional="true" comment="" />
          <param name="idle_threshold_timespan" type="str" optional="true" comment="" />
          <param name="idle_bytes_threshold" type="str" optional="true" comment="" />
          <param name="ignore_idle_threshold_static_ip" type="str" optional="true" comment="" />
          <param name="ignore_idle_threshold" type="str" optional="true" comment="" />
          <param name="idle_timeout" type="str" optional="true" comment="" />
          <param name="bw_send_rate" type="str" optional="true" comment="" />
          <param name="bw_receive_rate" type="str" optional="true" comment="" />
          <param name="in_ras_bw" type="str" optional="true" comment="format: 'SendRate/ReceiveRate'" />
          <param name="in_ras_ippool" type="str" optional="true" comment="User Info: Internet: In Ras IPPool: (ippool name)" />
          <param name="ippool" type="str" optional="true" comment="User Info: Internet: IPpool: (ippool name)" />
          <!-- "is_deposit_transferee" and "is_deposit_transferer" are disabled in C
          <param name="is_deposit_transferee" type="true_if_exists" comment="" />
          <param name="is_deposit_transferer" type="true_if_exists" comment="" />
          !-->
          <param name="limit_caller_id" type="str" optional="true" comment="value is Caller ID" />
          <param name="limit_caller_id_allow_not_defined" type="str" optional="true" comment="Allow users with no Caller ID, 0=No, 1=Yes" />
          <param name="limit_caller_id_bind_on_login" type="true_if_exists" optional="true" comment="" />
          <param name="limit_mac" type="str" optional="true" comment="value is MAC address" />
          <param name="limit_mac_bind_on_login" type="true_if_exists" optional="true" comment="" />
          <param name="limit_port" type="str" optional="true" comment="value is port" />
          <param name="limit_port_bind_on_login" type="true_if_exists" optional="true" comment="" />
          <param name="limit_ras" type="str" optional="true" comment="" />
          <param name="limit_ras" type="list" item_type="str" optional="true" comment="value is list of allowed RAS Descriptions" />
          <param name="limit_ras_bind_on_login" type="true_if_exists" optional="true" comment="" />
          <param name="limit_station_ip" type="str" optional="true" comment="value is Station IP" />
          <param name="limit_station_ip_bind_on_login" type="true_if_exists" optional="true" comment="" />
          <param name="limit_usage_days" type="str_int" optional="true" comment="number of days" />
          <param name="lock" type="str" optional="true" comment="user is locked if this key in present, value shows the lock reason" />
          <param name="assigned_endpoint" type="str" optional="true" comment="Message Center: End Point" />
          <param name="mc_charge" type="str" optional="true" comment="Message Center: Message Charge, format: 'send_latin,send_unicode,receive'" />
          <param name="mc_charge_send_latin" type="str_int" optional="true" comment="Message Center: Message Charge: Send Charge: Latin" />
          <param name="mc_charge_send_unicode" type="str_int" optional="true" comment="Message Center: Message Charge: Send Charge: Unicode" />
          <param name="mc_charge_recv" type="str_int" optional="true" comment="Message Center: Message Charge: Receive Charge" />
          <param name="mc_min_user_credit" type="str_float" optional="true" comment="Message Center: Message Charge: Minimum User Credit" />
          <param name="email_address" type="str" optional="true" comment="MailBox: Email Address" />
          <param name="mail_quota" type="str_int" optional="true" comment="MailBox: MailBox Quota" />
          <param name="mail_usage" type="str_int" optional="true" comment="MailBox: MailBox Usage" />
          <param name="mikrotik_address_list" type="str" optional="true" comment="" />
          <param name="mikrotik_bw" type="str" optional="true" comment="Mikrotik BW Control (Burst), format: GuaranteeReceiveRate/GuaranteeSendRate ReceiveBurst/SendBurst ReceiveBurstThreshold/SendBurstThreshold ReceiveBurstTime/SendBurstTime Priority MinReceiveRate/MinSendRate" />
          <param name="mikrotik_bw_recv_rate" type="str_int" optional="true" comment="Guarantee Receive Rate" />
          <param name="mikrotik_bw_send_rate" type="str_int" optional="true" comment="Guarantee Send Rate" />
          <param name="mikrotik_bw_recv_burst" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_send_burst" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_recv_burst_threshold" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_send_burst_threshold" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_recv_burst_time" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_send_burst_time" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_priority" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_min_recv_rate" type="str_int" optional="true" comment="" />
          <param name="mikrotik_bw_min_send_rate" type="str_int" optional="true" comment="" />
          <param name="multi_login" type="str_int" optional="true" comment="Limitations: Multi Login, value is maximum number of instances" />
          <param name="notification_profile" type="str" optional="true" comment="notification profile name" />
          <!--<param name="periodic_reset_rule_usage" type="str" optional="true" comment="Group Info: Periodic Accounting: Periodic Reset Rule Usages: Day of Week" />!-->
          <param name="time_periodic_accounting_monthly" type="choice" optional="true" comment="Monthly Time: Monthly Reset Type">
            <choice value="gregorian" />
            <choice value="jalali" />
          </param>
          <param name="time_periodic_accounting_monthly_limit" type="str_int" optional="true" comment="Monthly Time: Monthly Time Limit" />
          <param name="time_periodic_accounting_monthly_usage" type="str_int" optional="true" comment="Monthly Time: This Period Usage" />
          <param name="time_periodic_accounting_monthly_reset" type="str_datetime" optional="true" comment="Monthly Time: Next Reset" />
          <param name="traffic_periodic_accounting_monthly" type="str" optional="true" comment="Monthly Traffic: Monthly Reset Type">
            <choice value="gregorian" />
            <choice value="jalali" />            
          </param>
          <param name="traffic_periodic_accounting_monthly_limit" type="str_int" optional="true" comment="Monthly Traffic: Monthly Traffic Limit" />
          <param name="traffic_periodic_accounting_monthly_usage" type="str_int" optional="true" comment="Monthly Traffic: This Period Usage" />
          <param name="traffic_periodic_accounting_monthly_reset" type="str_datetime" optional="true" comment="Monthly Traffic: Next Reset" />
          <param name="time_periodic_accounting_daily" type="str" optional="true" comment="Daily Time: Number of days in period" />
          <param name="time_periodic_accounting_daily_limit" type="str_int" optional="true" comment="Daily Time: Time Limit" />
          <param name="time_periodic_accounting_daily_usage" type="str_int" optional="true" comment="Daily Time: This Period Usage" />
          <param name="time_periodic_accounting_daily_reset" type="str_datetime" optional="true" comment="Daily Time: Next Reset" />
          <param name="traffic_periodic_accounting_daily" type="str" optional="true" comment="Daily Traffic: Number of days in period" />
          <param name="traffic_periodic_accounting_daily_limit" type="str_int" optional="true" comment="Daily Traffic: Time Limit" />
          <param name="traffic_periodic_accounting_daily_usage" type="str_int" optional="true" comment="Daily Traffic: This Period Usage" />
          <param name="traffic_periodic_accounting_daily_reset" type="str_datetime" optional="true" comment="Daily Traffic: Next Reset" />
          <param name="time_periodic_accounting_weekly" type="str" optional="true" comment="Daily Time: Number of days in period" />
          <param name="time_periodic_accounting_weekly_limit" type="str_int" optional="true" comment="Daily Time: Time Limit" />
          <param name="time_periodic_accounting_weekly_usage" type="str_int" optional="true" comment="Daily Time: This Period Usage" />
          <param name="time_periodic_accounting_weekly_reset" type="str_datetime" optional="true" comment="Daily Time: Next Reset" />
          <param name="traffic_periodic_accounting_weekly" type="str" optional="true" comment="Weeklyy Traffic: Number of days in period" />
          <param name="traffic_periodic_accounting_weekly_limit" type="str_int" optional="true" comment="Weekly Traffic: Time Limit" />
          <param name="traffic_periodic_accounting_weekly_usage" type="str_int" optional="true" comment="Weekly Traffic: This Period Usage" />
          <param name="traffic_periodic_accounting_weekly_reset" type="str_datetime" optional="true" comment="Weekly Traffic: Next Reset" />
          <param name="monthly_periodic_credit_change" type="choice" optional="true" comment="Monthly Credit Change: Monthly Reset Type">
            <choice value="gregorian" />
            <choice value="jalali" />
          </param>
          <param name="monthly_periodic_credit_change_day" type="str" optional="true" comment="Monthly Credit Change: Monthly Reset Type: Day" />
          <param name="monthly_periodic_credit_change_type" type="choice" optional="true" comment="Monthly Credit Change: Credit Change Type">
            <choice value="absolute" comment="" />
            <choice value="relative" comment="" />
          </param>
          <param name="monthly_periodic_credit_change_amount" type="str" optional="true" comment="Monthly Credit Change: Credit Change Amount" />
          <param name="monthly_periodic_credit_change_after_first_login" type="bool" optional="true" comment="Monthly Credit Change: Effective After First Login" />
          <param name="monthly_periodic_credit_change_negate_credit" type="bool" optional="true" comment="Monthly Credit Change: Negate Credit" />
          <param name="monthly_periodic_credit_change_do_on_first_login" type="bool" optional="true" comment="Monthly Credit Change: Do On First Login" />
          <param name="monthly_periodic_credit_change_reset" type="str_datetime" optional="true" comment="Monthly Credit Change: Next Reset" />
          <param name="daily_periodic_credit_change" type="str_int" optional="true" comment="Monthly Credit Change: Number of days in period"> </param>
          <param name="daily_periodic_credit_change_type" type="choice" optional="true" comment="Daily Credit Change: Credit Change Type">
            <choice value="absolute" comment="" />
            <choice value="relative" comment="" />
          </param>
          <param name="daily_periodic_credit_change_amount" type="str_int" optional="true" comment="Daily Credit Change: Credit Change Amount" />
          <param name="daily_periodic_credit_change_after_first_login" type="bool" optional="true" comment="Daily Credit Change: Effective After First Login" />
          <param name="daily_periodic_credit_change_negate_credit" type="bool" optional="true" comment="Daily Credit Change: Negate Credit" />
          <param name="daily_periodic_credit_change_do_on_first_login" type="bool" optional="true" comment="Daily Credit Change: Do On First Login" />
          <param name="daily_periodic_credit_change_reset" type="str_datetime" optional="true" comment="Daily Credit Change: Next Reset" />
          <param name="persistent_lan_ip" type="list" item_type="str" optional="true" comment="" />
          <param name="persistent_lan_mac" type="list" item_type="str" optional="true" comment="" />
          <param name="persistent_lan_ras_ip" type="list" item_type="str" optional="true" comment="" />
          <param name="plan" type="str" optional="true" comment="" /><!--FIXME!-->
          <param name="prevent_web_login" type="true_if_exists" optional="true" comment="User Info: Flags: Prevent Web Login" />
          <param name="radius_attrs" type="str" optional="true" comment="User Info: Misc: Radius Attributes" />
          <param name="rel_exp_date" type="int" optional="true" requires_param="rel_exp_date_unit" comment="" />
          <param name="rel_exp_date_unit" type="choice" optional="true" comment="">
            <choice value="Minutes" comment=""/>
            <choice value="Hours" comment=""/>
            <choice value="Days" comment=""/>
            <choice value="Months" comment="1 month means 30 days"/>
            <choice value="Years" comment="1 month means 365 days"/>
          </param>
          <param name="rel_exp_date_negative_credit" type="int" optional="true" requires_param="rel_exp_date_negative_credit_unit" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Relative Expiration Date" />
          <param name="rel_exp_date_negative_credit_unit" type="choice" optional="true" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Relative Expiration Date">
            <choice value="Minutes" comment=""/>
            <choice value="Hours" comment=""/>
            <choice value="Days" comment=""/>
            <choice value="Months" comment="1 month means 30 days"/>
            <choice value="Years" comment="1 month means 365 days"/>
          </param>
          <param name="negative_credit_start" type="str_datetime" optional="true" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Start" />
          <param name="renew_do_not_reset_credit" type="true_if_exists" optional="true_if_exists" comment="User Info: Flags: Renew Do Not Reset Credit" />
          <param name="reset_negative_credit_on_renew" type="true_if_exists" optional="true_if_exists" comment="User Info: Flags: Reset Negative Credit On Renew" />
          <param name="renew_next_group" type="str" optional="true" comment="group_name" />
          <param name="save_bw_usage" type="true_if_exists" optional="true" comment="User Info: Flags: Save Bandwidth Usage" />
          <param name="second_normal_username" type="str" optional="true" comment="Second Internet Username" />
          <param name="serial" type="str" optional="true" comment="User Info: Username: Serial ID" />
          <param name="session_timeout" type="str_int" optional="true" comment="User Info: Limitations: Session Timeout" />
          <param name="voip_preferred_language" type="str" optional="true" comment="preferred language code for VoIP telephony support" />


        </param>
        <param name="to_del_attrs" type="list" comment="list of attributes to be deleted" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="changeCredit" auth_type="ADMIN" requires_perm="CHANGE USER CREDIT" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="credit" type="float" comment="" />
        <param name="is_absolute_change" type="bool" comment="'false' for relative change (add to user's credit), 'true' for absolute change (set user's credit)" />
        <param name="credit_comment" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="int" comment="change_log_ids" />
    </method>
    <method name="changeCreditExtended" auth_type="ADMIN" requires_perm="CHANGE USER CREDIT" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="credit" type="float" comment="" />
        <param name="change_type" type="choice" comment="">
          <choice value="ADD" comment="" />
          <choice value="SET" comment="" />
          <choice value="MULTIPLY" comment="" />
        </param>
        <param name="credit_comment" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="int" comment="change_log_ids" />
    </method>
    <method name="changeDeposit" auth_type="ADMIN" requires_perm="CHANGE USER DEPOSIT" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="deposit" type="float" comment="" />
        <param name="is_absolute_change" type="bool" comment="'false' for relative change (add to user's deposit), 'true' for absolute change (set user's deposit)" />
        <param name="deposit_comment" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="int" comment="change_log_ids" />
    </method>
    <method name="changeDepositExtended" auth_type="ADMIN" requires_perm="CHANGE USER DEPOSIT" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="deposit" type="float" comment="" />
        <param name="change_type" type="choice" comment="">
          <choice value="ADD" comment="" />
          <choice value="SET" comment="" />
          <choice value="MULTIPLY" comment="" />
        </param>
        <param name="deposit_comment" type="str" comment="" />
      </input>
      <output type="list" length="-1" item_type="int" comment="change_log_ids" />
    </method>
    <method name="getUsersWithPhone" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="phone" type="str" comment="" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="int" comment="user_id" />
          <item index="1" type="str" comment="phone" />
        </item>
      </output>
    </method>
    <method name="getUsersWithCellPhone" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="cell_phone" type="str" comment="" />
      </input>
      <output type="list" length="-1" comment="">
        <item type="list" length="2" comment="">
          <item index="0" type="int" comment="user_id" />
          <item index="1" type="str" comment="cell_phone" />
        </item>
      </output>
    </method>
    <method name="searchExpiredUsers" auth_type="ADMIN" requires_perm="GET USER INFORMATION" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="exp_date_from" type="str_datetime, float" optional="true" requires_param="exp_date_from_unit" comment="" />
          <param name="exp_date_from_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="exp_date_to" type="str_datetime, float" optional="true" requires_param="exp_date_to_unit" comment="" />
          <param name="exp_date_to_unit" type="choice" optional="true" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="isp_names" type="list, str" optional="true" comment="list of isp names, or string of one isp name" />
          <param name="group_name" type="list, str" optional="true" comment="list of group names, or string of one group name" />
          <param name="not_in_group_name" type="list, str" optional="true" comment="list of group names, or string of one group name" />
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="start index, for pagination" />
        <param name="order_by" type="choice" comment="">
          <choice value="user_id" comment="" />
          <choice value="isp_id" comment="" />
          <choice value="group_id" comment="" />
          <choice value="creation_date" comment="" />
          <choice value="credit" comment="" />
          <choice value="Deposit" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="user's count"></item>
        <item index="1" type="float" comment="sum of user's credit"></item>
        <item index="2" type="list" length="-1" item_type="list" comment="list of User IDs"></item>
      </output>
    </method>
    <method name="searchExpiredUsersExtended" auth_type="ADMIN" requires_perm="GET USER INFORMATION"
            comment="larger output than searchExpiredUsers, returns expiration dates too">
      <input type="dict" comment="the same as searchExpiredUsers" />
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="user's count"></item>
        <item index="1" type="float" comment="sum of user's credit"></item>
        <item index="2" type="dict" dynamic_keys="true" comment="">
          <key type="str" comment="user_id" />
          <value type="str" comment="expiration date, depending on input date_type" />
        </item>
      </output>
    </method>
    <method name="saveSearchExpiredUsers" auth_type="ADMIN" requires_perm="GET USER INFORMATION"
            comment="use SystemNotification.getNotifications() method to see if the report is finished and get the URL to download it">
      <input type="dict">
        <param name="output_type" type="choice" comment="">
          <choice value="csv" comment="" />
          <choice value="pdf" comment="" />
        </param>
        <param name="conds" type="dict" comment="the same as searchExpiredUsers, at least one condition is necessary" />
        <param name="order_by" type="choice" comment="">
          <choice value="user_id" comment="" />
          <choice value="isp_id" comment="" />
          <choice value="group_id" comment="" />
          <choice value="creation_date" comment="" />
          <choice value="credit" comment="" />
          <choice value="Deposit" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
        <param name="basic" type="list" length="-1" comment="the same as user.saveSearchUser" />
        <param name="attrs" type="list" length="-1" comment="the same as user.saveSearchUser" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="searchUser" auth_type="ADMIN" requires_perm="SEARCH USER" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="abs_exp_date_from" type="str_datetime, float" optional="true" requires_param="abs_exp_date_from_unit" comment="" />
          <param name="abs_exp_date_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="abs_exp_date_to" type="str_datetime, float" optional="true" requires_param="abs_exp_date_to_unit" comment="" />
          <param name="abs_exp_date_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="allow_recharge_by_voucher" type="true_if_exists" optional="true" requires_param="" comment="User Info: Flags: Allow Recharge By Voucher" />
          <param name="allow_user_disconnect" type="true_if_exists" optional="true" requires_param="User Info: Flags: Allow User Disconnect" comment="" />
          <param name="assign_dns" type="str" optional="true" requires_param="assign_dns_op" comment="User Info: Internet: Assign DNS To User" />
          <param name="assign_dns_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="has_assign_ip" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="assign_ip" type="str" optional="true" requires_param="assign_ip_op" comment="" />
          <param name="assign_ip_op" type="choice" optional="true" requires_param="" comment="">
          <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="has_assign_netmask" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="assign_netmask" type="str" optional="true" requires_param="assign_netmask_op" comment="" />
          <param name="assign_netmask_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="has_assign_route_ip" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="assign_route_ip" type="str" optional="true" requires_param="assign_route_ip_op" comment="" />
          <param name="assign_route_ip_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="asterisk_did_number" type="str" optional="true" requires_param="" comment="" />
          <param name="asterisk_did_destination" type="str" optional="true" requires_param="" comment="" />
          <param name="asterisk_did_peer_address" type="str" optional="true" requires_param="" comment="" />
          <param name="auto_recharge" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="auto_renew" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="auto_renew_do_not_reset_credit" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="caller_id" type="str" optional="true" requires_param="caller_id_op" comment="" />
          <param name="caller_id_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="charge" type="list, str" optional="true" requires_param="" comment="list of charge names, or string of one charge name" />
          <param name="comment" type="str" optional="true" requires_param="comment_op" comment="" />
          <param name="comment_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="name" type="str" optional="true" requires_param="name_op" comment="" />
          <param name="name_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="postal_code" type="str" optional="true" requires_param="postal_code_op" comment="" />
          <param name="postal_code_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="phone" type="str" optional="true" requires_param="phone_op" comment="" />
          <param name="phone_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="cell_phone" type="str" optional="true" requires_param="cell_phone_op" comment="" />
          <param name="cell_phone_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="email" type="str" optional="true" requires_param="email_op" comment="" />
          <param name="email_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="birthdate" type="str" optional="true" requires_param="birthdate_unit, birthdate_op" comment="" />
          <param name="birthdate_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="birthdate_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="address" type="str" optional="true" requires_param="address_op" comment="" />
          <param name="address_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="has_connection_log_archive" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="creation_date_from" type="str_datetime, float" optional="true" requires_param="creation_date_from_unit" comment="" />
          <param name="creation_date_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="creation_date_to" type="str_datetime, float" optional="true" requires_param="creation_date_to_unit" comment="" />
          <param name="creation_date_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="credit" type="float" optional="true" requires_param="credit_op" comment="" />
          <param name="credit_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="credit_limit" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="custom_field_test_integer" type="int" optional="true" requires_param="custom_field_test_integer_op" comment="sample cutom field with name 'test_integer' and type 'Integer'" />
          <param name="custom_field_test_integer_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="custom_field_test_string" type="str" optional="true" requires_param="custom_field_test_string_op" comment="sample cutom field with name 'test_string' and type 'String'" />
          <param name="custom_field_test_string_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="deny_change_password" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="deposit" type="float" optional="true" requires_param="deposit_op" comment="" />
          <param name="deposit_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="deposit_recharge" type="float" optional="true" requires_param="deposit_recharge_op" comment="" />
          <param name="deposit_recharge_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="email_address" type="str" optional="true" requires_param="email_address_op" comment="" />
          <param name="email_address_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="user_value_exp_from_creation_date_from" type="str_datetime, float" optional="true" requires_param="user_value_exp_from_creation_date_from_unit" comment="" />
          <param name="user_value_exp_from_creation_date_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="user_value_exp_from_creation_date_to" type="str_datetime, float" optional="true" requires_param="user_value_exp_from_creation_date_to_unit" comment="" />
          <param name="user_value_exp_from_creation_date_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="user_value_exp_from_first_login_from" type="str_datetime, float" optional="true" requires_param="user_value_exp_from_first_login_from_unit" comment="" />
          <param name="user_value_exp_from_first_login_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="user_value_exp_from_first_login_to" type="str_datetime, float" optional="true" requires_param="user_value_exp_from_first_login_to_unit" comment="" />
          <param name="user_value_exp_from_first_login_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="exp_from_renew_user_value_from" type="str_datetime, float" optional="true" requires_param="exp_from_renew_user_value_from_unit" comment="" />
          <param name="exp_from_renew_user_value_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="exp_from_renew_user_value_to" type="str_datetime, float" optional="true" requires_param="exp_from_renew_user_value_to_unit" comment="" />
          <param name="exp_from_renew_user_value_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="exp_monthly_user_value_from" type="str_datetime, float" optional="true" requires_param="exp_monthly_user_value_from_unit" comment="" />
          <param name="exp_monthly_user_value_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="exp_monthly_user_value_to" type="str_datetime, float" optional="true" requires_param="exp_monthly_user_value_to_unit" comment="" />
          <param name="exp_monthly_user_value_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="first_login_from" type="str_datetime, float" optional="true" requires_param="first_login_from_unit" comment="" />
          <param name="first_login_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="first_login_to" type="str_datetime, float" optional="true" requires_param="first_login_to_unit" comment="" />
          <param name="first_login_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="real_first_login_from" type="str_datetime, float" optional="true" requires_param="real_first_login_from_unit" comment="" />
          <param name="real_first_login_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="real_first_login_to" type="str_datetime, float" optional="true" requires_param="real_first_login_to_unit" comment="" />
          <param name="real_first_login_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="group_name" type="list, str" optional="true" requires_param="" comment="list of group names or string of one group name" />
          <param name="in_ras_ippool" type="str" optional="true" requires_param="in_ras_ippool_op" comment="" />
          <param name="in_ras_ippool_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="ippool" type="list, str" optional="true" requires_param="" comment="list of ippool names, or string of one ippool name" />
          <param name="is_deposit_transferee" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="is_deposit_transferer" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="isp_names" type="list, str" optional="true" requires_param="" comment="list of isp names, or string of one isp name" />
          <param name="isp_id" type="list, int" optional="true" requires_param="" comment="list of ISP IDs, or integer of one ISP ID" />
          <param name="limit_caller_id" type="str" optional="true" requires_param="limit_caller_id_op" comment="" />
          <param name="limit_caller_id_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="limit_mac" type="str" optional="true" requires_param="limit_mac_op" comment="" />
          <param name="limit_mac_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="limit_port" type="str" optional="true" requires_param="limit_port_op" comment="" />
          <param name="limit_port_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="has_limit_ras" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="limit_ras" type="str" multi_str="true" optional="true" requires_param="limit_ras_op" comment="" />
          <param name="limit_ras_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="and" comment="" />
            <choice value="or" comment="" />
          </param>
          <param name="limit_station_ip" type="str" multi_str="true" optional="true" requires_param="limit_station_ip_op" comment="" />
          <param name="limit_station_ip_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="limit_usage_days" type="int, list" optional="true" requires_param="" comment="integer (number of days), or list of integers (number of days)" />
          <param name="lock" type="true_if_exists" optional="true" requires_param="" comment="user is locked" />
          <param name="no_lock" type="true_if_exists" optional="true" requires_param="" comment="user is not locked" />
          <param name="lock_reason" type="str" optional="true" requires_param="lock_reason_op" comment="" />
          <param name="lock_reason_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="mail_quota" type="int" optional="true" requires_param="mail_quota_op" comment="" />
          <param name="mail_quota_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="activation_required" type="true_if_exists" optional="true" requires_param="" comment="User Info: Message Center: MC Activation Required" />
          <param name="mikrotik_address_list" type="list, str" optional="true" requires_param="" comment="list of many string (to match according to given operator), or just a string" />
          <param name="mikrotik_address_list_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="multi_login" type="int" optional="true" requires_param="multi_login_op" comment="" />
          <param name="multi_login_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="never_expire_users" type="true_if_exists" optional="true" requires_param="" comment="users without any kind of expiration date (will never expire)" />
          <param name="never_logged_in_users" type="true_if_exists" optional="true" requires_param="" comment="users that have never logged in" />
          <param name="not_logged_in_from" type="str_datetime, float" optional="true" requires_param="not_logged_in_from_unit" comment="" />
          <param name="not_logged_in_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="not_logged_in_to" type="str_datetime, float" optional="true" requires_param="not_logged_in_to_unit" comment="" />
          <param name="not_logged_in_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="normal_username" type="str" optional="true" requires_param="normal_username_op" comment="" />
          <param name="normal_username_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="no_normal_username" type="true_if_exists" optional="true" requires_param="" comment="user has no internet username" />
          <param name="has_notification_profile" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="notification_profile" type="str, list" optional="true" requires_param="" comment="list of notification profile names. or string of one profile name" />
          <param name="online_payment" type="true_if_exists" optional="true" requires_param="" comment="user has online payment (enabled in User Info: Online Payment: Online Payment)" />
          <param name="daily_periodic_credit_change_reset" type="str" optional="true" requires_param="" comment="datetime string or epoch time" />
          <param name="daily_periodic_credit_change_reset_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="epoch" />
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="daily_periodic_credit_change_reset_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="monthly_periodic_credit_change_reset" type="str" optional="true" requires_param="" comment="datetime string or epoch time" />
          <param name="monthly_periodic_credit_change_reset_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="epoch" />
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="monthly_periodic_credit_change_reset_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="periodic_reset_rule_usage" type="str" optional="true" requires_param="periodic_reset_rule_usage_op" comment="day of week" />
          <param name="periodic_reset_rule_usage_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="persistent_lan_mac" type="str" multi_str="true" optional="true" requires_param="" comment="" />
          <param name="persistent_lan_ip" type="str" multi_str="true" optional="true" requires_param="" comment="" />
          <param name="persistent_lan_ras_ip" type="str" multi_str="true" optional="true" requires_param="" comment="" />
          <param name="postpaid" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="prevent_web_login" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="rel_exp_date_from" type="str_datetime, float" optional="true" requires_param="" comment="" />
          <param name="rel_exp_date_from_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="rel_exp_date_to" type="str_datetime, float" optional="true" requires_param="" comment="" />
          <param name="rel_exp_date_to_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="rel_exp_date_negative_credit" type="str_datetime, float" optional="true" requires_param="rel_exp_date_negative_credit_unit, rel_exp_date_negative_credit_op" comment="" />
          <param name="rel_exp_date_negative_credit_unit" type="choice" optional="true" requires_param="" comment="">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="rel_exp_date_negative_credit_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="renew_do_not_reset_credit" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="reset_negative_credit_on_renew" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="renew_do_not_reset_credit_on_state_package" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="renew_do_not_reset_credit_on_state_recharged" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="renew_next_group" type="list, str" optional="true" requires_param="" comment="list of group names, or string of group name" />
          <param name="save_bw_usage" type="true_if_exists" optional="true" requires_param="" comment="" />
          <param name="second_normal_username" type="str" multi_str="true" optional="true" requires_param="second_normal_username_op" comment="" />
          <param name="second_normal_username_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="serial" type="str" multi_str="true" optional="true" requires_param="serial_op" comment="" />
          <param name="serial_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="sms_charge" type="float" optional="true" requires_param="sms_charge_op" comment="" />
          <param name="sms_charge_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="user_id" type="str" multi_str="true" optional="true" requires_param="user_id_op" comment="" />
          <param name="user_id_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="=" />
            <choice value="&gt;" />
            <choice value="&lt;" />
            <choice value="&gt;=" />
            <choice value="&lt;=" />
          </param>
          <param name="user_status" type="str_int" multi_str="true" optional="true" requires_param=""
                 comment="pass '0' for Package, '0,1' for Package and Recharged, '0,2' for Package and Temporary Extended">
            <choice value="0" type="str" comment="Package" />
            <choice value="1" type="str" comment="Recharged" />
            <choice value="2" type="str" comment="Temporary Extended" />
          </param>
          <param name="voip_preferred_language" type="str" optional="true" requires_param="voip_preferred_language_op" comment="" />
          <param name="voip_preferred_language_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
          <param name="voip_username" type="str" optional="true" requires_param="voip_username_op" comment="" />
          <param name="voip_username_op" type="choice" optional="true" requires_param="" comment="">
            <choice value="like" comment="" />
            <choice value="ilike" comment="" />
            <choice value="starts_with" comment="" />
            <choice value="ends_with" comment="" />
            <choice value="equals" comment="" />
          </param>
        </param>
        <param name="from" type="int" comment="start index, for pagination" />
        <param name="to" type="int" comment="end index, for pagination" />
        <param name="order_by" type="choice" comment="">
          <choice value="normal_username" comment="" />
          <choice value="voip_username" comment="" />
          <choice value="user_id" comment="" />
          <choice value="group_id" comment="" />
          <choice value="creation_date" comment="" />
          <choice value="owner_id" comment="" />
          <choice value="credit" comment="" />
          <choice value="deposit" comment="" />
          <choice value="first_login" comment="" />
          <choice value="serial" comment="" />
          <choice value="serial_numeric" comment="" />
        </param>
        <param name="desc" type="bool" comment="" />
      </input>
      <output type="list" length="3" comment="">
        <item index="0" type="int" comment="number of all matched users"></item>
        <item index="1" type="float" comment="sum of credit of all matched users"></item>
        <item index="2" type="list" length="-1" item_type="int" comment="list of User IDs"></item>
      </output>
    </method>
    <method name="delUser" auth_type="ADMIN" requires_perm="DELETE USER" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="comma-seperated User IDs" />
        <param name="delete_comment" type="str" comment="" />
        <param name="del_connection_logs" type="bool" comment="pass true if you want users' connection logs to be deleted too" />
        <param name="del_audit_logs" type="bool" comment="pass true if you want users' audit logs to be deleted too" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="killUser" auth_type="ADMIN" requires_perm=""
        comment="requires KILL USER permission if kill=true, and CLEAR USER permission is kill=false">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="comma-seperated User IDs" />
        <param name="ras_ip" type="str" multi_str="true" comment="comma-seperated RAS IPs" />
        <param name="unique_id_val" type="str" comment="Unique ID Value (for exmaple Port, Caller ID, etc)" />
        <param name="kill" type="bool" optional="true" default="true" comment="true means Kill User, false means Clear User" />
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="killUserByID" auth_type="ADMIN" requires_perm="KILL USER" comment="by admin, disconnects all instances of given users">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
        <param name="kill" type="bool" optional="true" default="true" comment="true means Kill User, false means Clear User" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="killUserByID" auth_type="USER" comment="by user, disconnects all instances of user himself">
      <input type="dict">
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getRemainingDurationAndBytes" auth_type="ADMIN" requires_perm="" comment="by admin">
      <input type="dict">
        <param name="user_id" type="int" comment="" />
      </input>
      <output type="dict" comment="">
        <key type="str" comment="charge_rule_desc" />
        <value type="list" length="3, 4" comment="">
          <item index="0" type="str" comment="duration" />
          <item index="1" type="str" comment="bytes" />
          <item index="2" type="int" comment="state">
          </item>
          <item index="3" optional="true" type="dict" comment="">
            <item name="max_rule_time_usage" type="list" length="2" comment="">
              <item index="0" type="str" comment="" />
              <item index="1" type="str" comment="" />
            </item>
            <item name="max_rule_traffic_usage" type="list" length="2" comment="">
              <item index="0" type="str" comment="" />
              <item index="1" type="str" comment="" />
            </item>
            <item name="max_rule_usage" type="list" length="2" comment="">
              <item index="0" type="str" comment="" />
              <item index="1" type="str" comment="" />
            </item>
          </item>
        </value>
      </output>
    </method>
    <method name="getRemainingDurationAndBytes" auth_type="USER" comment="by user">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <key type="str" comment="charge_rule_desc" />
        <value type="list" length="3, 4" comment="">
          <item index="0" type="str" comment="duration" />
          <item index="1" type="str" comment="bytes" />
          <item index="2" type="int" comment="state">
          </item>
          <item index="3" optional="true" type="dict" comment="">
            <item name="max_rule_time_usage" type="list" length="2" comment="">
              <item index="0" type="str" comment="" />
              <item index="1" type="str" comment="" />
            </item>
            <item name="max_rule_traffic_usage" type="list" length="2" comment="">
              <item index="0" type="str" comment="" />
              <item index="1" type="str" comment="" />
            </item>
            <item name="max_rule_usage" type="list" length="2" comment="">
              <item index="0" type="str" comment="" />
              <item index="1" type="str" comment="" />
            </item>
          </item>
        </value>
      </output>
    </method>
    <method name="renewUsers" auth_type="ADMIN" requires_perm="RENEW USER" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="list" item_type="int" comment="list of log ids">
      </output>
    </method>
    <method name="rechargeUsers" auth_type="ADMIN" requires_perm="RECHARGE USER" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="comment" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="temporaryExtendUsers" auth_type="ADMIN" requires_perm="TEMPORARY EXTEND" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="temporary_extend_hours" type="int" comment="hours" />
        <param name="temporary_extend_credit" type="float" comment="credit" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="updateUserComments" auth_type="USER" comment="">
      <input type="dict">
        <param name="update_dic" type="dict" comment="">
          <param name="name" type="str" optional="true" comment="Comment: Name (user's real name)" />
          <param name="phone" type="str" optional="true" comment="Comment: Phone" />
          <param name="cell_phone" type="str" optional="true" comment="Comment: Cell Phone Number" />
          <param name="email" type="str" optional="true" comment="Comment: Email" />
          <param name="address" type="str" optional="true" comment="Comment: Address" />
          <param name="birthdate" type="str" optional="true" comment="Comment: Date of Birth" />
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="reloadUsers" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="saveSearchUser" auth_type="ADMIN" requires_perm="SEARCH USER"
            comment="use SystemNotification.getNotifications() method to see if the report is finished and get the URL to download it">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as user.searchUser method" />
        <param name="order_by" type="choice" comment="">
          <choice value="normal_username" comment="" />
          <choice value="voip_username" comment="" />
          <choice value="user_id" comment="" />
          <choice value="group_id" comment="" />
          <choice value="creation_date" comment="" />
          <choice value="owner_id" comment="" />
          <choice value="credit" comment="" />
          <choice value="deposit" comment="" />
          <choice value="first_login" comment="" />
          <choice value="serial" comment="" />
          <choice value="serial_numeric" comment="" />
        </param>
        <param name="desc" type="bool" comment="" />
        <param name="basic" type="list" length="-1" comment="">
          <item value="choice" comment="">
            <choice value="user_id" type="str" comment="" />
            <choice value="creation_date" type="str" comment="" />
            <choice value="credit" type="str" comment="" />
            <choice value="deposit" type="str" comment="" />
            <choice value="group_id" type="str" comment="" />
            <choice value="group_name" type="str" comment="" />
            <choice value="isp_id" type="str" comment="" />
            <choice value="isp_name" type="str" comment="" />
            <choice value="nearest_exp_date" type="str" comment="" />
            <choice value="recharge_deposit" type="str" comment="" />
            <choice value="status" type="str" comment="" />
          </item>
        </param>
        <param name="attrs" type="list" length="-1" comment="">
          <item type="choice" comment="see output of getUserInfo for complete list of attributes">
            <choice value="normal_username" />
            <choice value="normal_password" />
            <choice value="first_login" />
            <choice value="real_first_login" />
            <choice value="nearest_exp_date" />
            <choice value="nearest_exp_date_epoch" />
            <choice value="time_to_nearest_exp_date" />
            <choice value="charge_rule_usage" />
            <choice value="charge" comment="charge name" />
            <choice value="last_renew" comment="epoch time (float)" />
            <choice value="abs_exp_date" comment="gregorian datetime string" />
            <choice value="assign_dns" comment="User Info: Internet: Assign DNS To User: (First and Second DNSs, comma-seperated)" />
            <choice value="assign_dns_1" comment="User Info: Internet: Assign DNS To User: (First DNS)"/>
            <choice value="assign_dns_2" comment="User Info: Internet: Assign DNS To User: (Second DNS)"/>
            <choice value="assign_ip" comment="User Info: Internet: Assign IP Address To User: (comma-seperated values)" />
            <choice value="assign_netmask" />
            <choice value="assign_route_ip" comment="comma-seperated values" />
            <choice value="caller_id" comment="User Info: VoIP: Caller ID: VoIP Caller ID" />
            <choice value="fast_dial" comment="User Info: VoIP: Fast Dial" />
            <choice value="forward_number" comment="User Info: VoIP: Forward Number" />
            <choice value="asterisk_extension" comment="User Info: VoIP: Asterisk: Asterisk Extension" />
            <choice value="asterisk_ras_ip" comment="User Info: VoIP: Asterisk: Astersik Ras IP" />
            <choice value="asterisk_ras_id" comment="User Info: VoIP: Asterisk:  Astersik Ras IP (ras_id)" />
            <choice value="asterisk_ext_details" comment="User Info: VoIP: Asterisk" />
            <choice value="asterisk_sip_details" comment="User Info: VoIP: Asterisk: SIP Details" />
            <choice value="asterisk_iax_details" comment="User Info: VoIP: Asterisk: IAX Details" />
            <choice value="asterisk_did_ras_ip" comment="User Info: VoIP: Asterisk DID: Astersik DID Ras IP" />
            <choice value="asterisk_did_ras_id" comment="User Info: VoIP: Asterisk DID: Astersik DID Ras IP (ras_id)" />
            <choice value="comment" comment="Comment: Comment" />
            <choice value="name" comment="Comment: Name" />
            <choice value="email" comment="Comment: Email" />
            <choice value="phone" comment="Comment: Phone" />
            <choice value="cell_phone" comment="Comment: Cell Phone Number" />
            <choice value="birthdate" comment="Comment: Date of Birth" />
            <choice value="address" comment="Comment: Address" />
            <choice value="postal_code" comment="Comment: Postal Code" />
            <choice value="credit_limit" comment="Limitations: Credit Limit" />
            <choice value="exp_date_temp_extend" />
            <choice value="temp_extend_log_id" />
            <choice value="exp_from_creation_date" />
            <choice value="exp_from_first_login" />
            <choice value="exp_from_renew" />
            <choice value="exp_monthly" />
            <choice value="extra_charge_profile" />
            <choice value="fast_dial" comment="User Info: VoIP: Fast Dial" />
            <choice value="forward_number" />
            <choice value="idle_threshold_timespan" />
            <choice value="idle_bytes_threshold" />
            <choice value="idle_timeout" />
            <choice value="bw_send_rate" />
            <choice value="bw_receive_rate" />
            <choice value="in_ras_bw" />
            <choice value="in_ras_ippool" comment="User Info: Internet: In Ras IPPool: (ippool name)" />
            <choice value="ippool" comment="User Info: Internet: IPpool: (ippool name)" />
            <choice value="limit_caller_id" comment="value is Caller ID" />
            <choice value="limit_mac" comment="value is MAC address" />
            <choice value="limit_port" comment="value is port" />
            <choice value="limit_ras" />
            <choice value="limit_ras" comment="value is list of allowed RAS Descriptions" />
            <choice value="limit_station_ip" comment="value is Station IP" />
            <choice value="limit_usage_days" comment="number of days" />
            <choice value="lock" comment="user is locked if this key in present, value shows the lock reason" />
            <choice value="assigned_endpoint" comment="Message Center: End Point" />
            <choice value="mc_charge" comment="Message Center: Message Charge, format: 'send_latin,send_unicode,receive'" />
            <choice value="mc_charge_send_latin" comment="Message Center: Message Charge: Send Charge: Latin" />
            <choice value="mc_charge_send_unicode" comment="Message Center: Message Charge: Send Charge: Unicode" />
            <choice value="mc_charge_recv" comment="Message Center: Message Charge: Receive Charge" />
            <choice value="mc_min_user_credit" comment="Message Center: Message Charge: Minimum User Credit" />
            <choice value="email_address" comment="MailBox: Email Address" />
            <choice value="mail_quota" comment="MailBox: MailBox Quota" />
            <choice value="mail_usage" comment="MailBox: MailBox Usage" />
            <choice value="mikrotik_address_list" />
            <choice value="mikrotik_bw"
              comment="Mikrotik BW Control (Burst), format: GuaranteeReceiveRate/GuaranteeSendRate ReceiveBurst/SendBurst ReceiveBurstThreshold/SendBurstThreshold ReceiveBurstTime/SendBurstTime Priority MinReceiveRate/MinSendRate" />
            <choice value="mikrotik_bw_recv_rate" comment="Guarantee Receive Rate" />
            <choice value="mikrotik_bw_send_rate" comment="Guarantee Send Rate" />
            <choice value="mikrotik_bw_recv_burst" />
            <choice value="mikrotik_bw_send_burst" />
            <choice value="mikrotik_bw_recv_burst_threshold" />
            <choice value="mikrotik_bw_send_burst_threshold" />
            <choice value="mikrotik_bw_recv_burst_time" />
            <choice value="mikrotik_bw_send_burst_time" />
            <choice value="mikrotik_bw_priority" />
            <choice value="mikrotik_bw_min_recv_rate" />
            <choice value="mikrotik_bw_min_send_rate" />
            <choice value="multi_login" comment="Limitations: Multi Login, value is maximum number of instances" />
            <choice value="notification_profile" comment="notification profile name" />
            <choice value="time_periodic_accounting_monthly" comment="Monthly Time: Monthly Reset Type" />
            <choice value="time_periodic_accounting_monthly_limit" comment="Monthly Time: Monthly Time Limit" />
            <choice value="time_periodic_accounting_monthly_usage" comment="Monthly Time: This Period Usage" />
            <choice value="time_periodic_accounting_monthly_reset" comment="Monthly Time: Next Reset" />
            <choice value="traffic_periodic_accounting_monthly" comment="Monthly Traffic: Monthly Reset Type" />
            <choice value="traffic_periodic_accounting_monthly_limit" comment="Monthly Traffic: Monthly Traffic Limit" />
            <choice value="traffic_periodic_accounting_monthly_usage" comment="Monthly Traffic: This Period Usage" />
            <choice value="traffic_periodic_accounting_monthly_reset" comment="Monthly Traffic: Next Reset" />
            <choice value="time_periodic_accounting_daily" comment="Daily Time: Number of days in period" />
            <choice value="time_periodic_accounting_daily_limit" comment="Daily Time: Time Limit" />
            <choice value="time_periodic_accounting_daily_usage" comment="Daily Time: This Period Usage" />
            <choice value="time_periodic_accounting_daily_reset" comment="Daily Time: Next Reset" />
            <choice value="traffic_periodic_accounting_daily" comment="Daily Traffic: Number of days in period" />
            <choice value="traffic_periodic_accounting_daily_limit" comment="Daily Traffic: Time Limit" />
            <choice value="traffic_periodic_accounting_daily_usage" comment="Daily Traffic: This Period Usage" />
            <choice value="traffic_periodic_accounting_daily_reset" comment="Daily Traffic: Next Reset" />
            <choice value="time_periodic_accounting_weekly" comment="Daily Time: Number of days in period" />
            <choice value="time_periodic_accounting_weekly_limit" comment="Daily Time: Time Limit" />
            <choice value="time_periodic_accounting_weekly_usage" comment="Daily Time: This Period Usage" />
            <choice value="time_periodic_accounting_weekly_reset" comment="Daily Time: Next Reset" />
            <choice value="traffic_periodic_accounting_weekly" comment="Weeklyy Traffic: Number of days in period" />
            <choice value="traffic_periodic_accounting_weekly_limit" comment="Weekly Traffic: Time Limit" />
            <choice value="traffic_periodic_accounting_weekly_usage" comment="Weekly Traffic: This Period Usage" />
            <choice value="traffic_periodic_accounting_weekly_reset" comment="Weekly Traffic: Next Reset" />
            <choice value="monthly_periodic_credit_change" comment="Monthly Credit Change: Monthly Reset Type" />
            <choice value="monthly_periodic_credit_change_day" comment="Monthly Credit Change: Monthly Reset Type: Day" />
            <choice value="monthly_periodic_credit_change_type" comment="Monthly Credit Change: Credit Change Type" />
            <choice value="monthly_periodic_credit_change_amount" comment="Monthly Credit Change: Credit Change Amount" />
            <choice value="monthly_periodic_credit_change_after_first_login" comment="Monthly Credit Change: Effective After First Login" />
            <choice value="monthly_periodic_credit_change_negate_credit" comment="Monthly Credit Change: Negate Credit" />
            <choice value="monthly_periodic_credit_change_do_on_first_login" comment="Monthly Credit Change: Do On First Login" />
            <choice value="monthly_periodic_credit_change_reset" comment="Monthly Credit Change: Next Reset" />
            <choice value="daily_periodic_credit_change" comment="Monthly Credit Change: Number of days in period" />
            <choice value="daily_periodic_credit_change_type" comment="Daily Credit Change: Credit Change Type" />
            <choice value="daily_periodic_credit_change_amount" comment="Daily Credit Change: Credit Change Amount" />
            <choice value="daily_periodic_credit_change_after_first_login" comment="Daily Credit Change: Effective After First Login" />
            <choice value="daily_periodic_credit_change_negate_credit" comment="Daily Credit Change: Negate Credit" />
            <choice value="daily_periodic_credit_change_do_on_first_login" comment="Daily Credit Change: Do On First Login" />
            <choice value="daily_periodic_credit_change_reset" comment="Daily Credit Change: Next Reset" />
            <choice value="persistent_lan_ip" />
            <choice value="persistent_lan_mac" />
            <choice value="persistent_lan_ras_ip" />
            <choice value="plan" />
            <choice value="radius_attrs" comment="User Info: Misc: Radius Attributes" />
            <choice value="rel_exp_date" />
            <choice value="rel_exp_date_unit" comment="" />
            <choice value="rel_exp_date_negative_credit" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Relative Expiration Date" />
            <choice value="rel_exp_date_negative_credit_unit" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Relative Expiration Date" />
            <choice value="renew_next_group" comment="group_name" />
            <choice value="second_normal_username" comment="Second Internet Username" />
            <choice value="serial" comment="User Info: Username: Serial ID" />
            <choice value="session_timeout" comment="User Info: Limitations: Session Timeout" />
            <choice value="voip_preferred_language" comment="preferred language code for VoIP telephony support" />
            <choice value="voip_username" comment="VoIP Username" />
            <choice value="negative_credit_start" comment="User Info: Exp Dates: Negative Credit Expiration Date: Negative Credit Start" />
            <choice value="save_bw_usage" comment="User Info: Flags: Save Bandwidth Usage" /><!--true_if_exists!-->
            <choice value="allow_user_disconnect" comment="User Info: Flags: Allow User Disconnect" /><!--true_if_exists!-->
            <choice value="deny_change_password" comment="User Info: Flags: Deny Change Password" /><!--true_if_exists!-->
            <choice value="auto_renew" comment="User Info: Flags: Auto Renew" /><!--true_if_exists!-->
            <choice value="reset_negative_credit_on_renew" comment="User Info: Flags: Reset Negative Credit On Renew" /><!--true_if_exists!-->
            <choice value="renew_do_not_reset_credit" comment="User Info: Flags: Renew Do Not Reset Credit" /><!--true_if_exists!-->
            <choice value="renew_do_not_reset_credit_on_state_package" comment="User Info: Flags: Renew Do Not Reset Credit On Package State" /><!--true_if_exists!-->
            <choice value="renew_do_not_reset_credit_on_state_recharged" comment="User Info: Flags: Renew Do Not Reset Credit On Recharged State" /><!--true_if_exists!-->
            <choice value="auto_renew_on_credit_finish" comment="User Info: Flags: Auto Renew On Credit Finish"/><!--true_if_exists!-->
            <choice value="auto_renew_do_not_reset_credit" comment="User Info: Flags: Auto Renew No Not Reset Credit" /><!--true_if_exists!-->
            <choice value="auto_recharge" comment="User Info: Flags: Auto Recharge" /><!--true_if_exists!-->
            <choice value="allow_recharge_by_voucher" comment="User Info: Flags: Allow Recharge By Voucher" /><!--true_if_exists!-->
            <choice value="prevent_web_login" comment="User Info: Flags: Prevent Web Login" /><!--true_if_exists!-->
            <choice value="enable_failed_login" comment="User Info: Flags: Enable Failed Login" /><!--true_if_exists!-->
            <choice value="ignore_idle_threshold_static_ip" comment="User Info: Flags: Ignore Idle Threshold on static IP" /><!--true_if_exists!-->
            <choice value="ignore_idle_threshold" comment="User Info: Flags: Ignore Idle Threshold" /><!--true_if_exists!-->
            <choice value="caller_id_bind_on_login" comment="User Info: VoIP: VoIP Caller ID Bind On Next Login" /><!--true_if_exists!-->
            <choice value="limit_mac_bind_on_login" /><!--true_if_exists!-->
            <choice value="limit_port_ibind_on_login" /><!--true_if_exists!-->
            <choice value="limit_ras_bind_on_login" /><!--true_if_exists!-->
            <choice value="limit_station_ip_bind_on_login" /><!--true_if_exists!-->
            <choice value="limit_caller_id_allow_not_defined" comment="Allow users with no Caller ID, 0=No, 1=Yes" /><!--true_if_exists!-->
            <!-- "is_deposit_transferee" and "is_deposit_transferer" are disabled in C
            <choice value="is_deposit_transferee" />
            <choice value="is_deposit_transferer" />
            !-->
          </item>
        </param>
        <param name="output_type" type="choice" comment="">
          <choice value="csv" comment="" />
          <choice value="pdf" comment="" />
        </param>
      </input>
      <output type="null" comment="">
      </output>
    </method>
    <method name="changeStatus" auth_type="ADMIN" requires_perm="CHANGE USER ATTRIBUTES" comment="">
      <input type="dict">
        <param name="user_id" type="str" multi_str="true" comment="" />
        <param name="status" type="choice" comment="">
          <choice value="Package" />
          <choice value="Recharged" />
          <choice value="Temporary Extended" />
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getBulkActionsForAdmin" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION"
            comment="get list of performed or running Bulk Actions, which admin has access to see them">
      <input type="dict">
      </input>
      <output type="list" length="-1" comment="">
        <item type="dict" comment="">
          <param name="action_id" type="int" comment="" />
          <param name="action_name" type="str" comment="" />
          <param name="conds" type="dict" comment="" />
          <param name="requester_id" type="Admin ID" comment="" />
          <param name="requester_username" type="Admin Username" comment="" />
          <param name="remote_ip" type="str" comment="Admin's Remote IP" />
          <param name="action_timing" type="list" length="2" comment="">
            <item index="0" type="int" comment="epoch time of start" />
            <item index="1" type="int" comment="epoch time of end" />
          </param>
          <param name="formated_start_date" type="str" comment="start datetime string, depending on input date_type" />
          <param name="formated_end_date" type="str" comment="end datetime string, depending on input date_type" />
          <param name="matched_users_count" type="int" comment="number of all matched users" />
          <param name="checked_users_count" type="int" comment="number of done users" />
          <param name="action_progress" type="int" comment="percentage of progress (0 to 100)" />
          <param name="canceled" type="bool" comment="true if the action is canceled" />
          <param name="failed" type="bool" comment="true if the action is failed" />
          <param name="messages" type="list" item_type="str" comment="list of messages (strings)" />
        </item>
      </output>
    </method>
    <method name="viewBulkActionStatus" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION"
            comment="get status of a Bulk Action (that has been started by the admin himself)">
      <input type="dict">
        <param name="action_id" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="action_id" type="str" comment="" />
        <param name="action_name" type="str" comment="" />
        <param name="conds" type="dict" comment="" />
        <param name="requester_id" type="Admin ID" comment="" />
        <param name="requester_username" type="Admin Username" comment="" />
        <param name="remote_ip" type="str" comment="Admin's Remote IP" />
        <param name="action_timing" type="list" length="2" comment="">
          <item index="0" type="int" comment="epoch time of start" />
          <item index="1" type="int" comment="epoch time of end" />
        </param>
        <param name="formated_start_date" type="str" comment="start datetime string, depending on input date_type" />
        <param name="formated_end_date" type="str" comment="end datetime string, depending on input date_type" />
        <param name="matched_users_count" type="int" comment="number of all matched users" />
        <param name="checked_users_count" type="int" comment="number of done users" />
        <param name="action_progress" type="int" comment="percentage of progress (0 to 100)" />
        <param name="canceled" type="bool" comment="true if the action is canceled" />
        <param name="failed" type="bool" comment="true if the action is failed" />
        <param name="messages" type="list" item_type="str" comment="list of messages (strings)" />
      </output>
    </method>
    <method name="cancelBulkAction" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION"
            comment="cancel a Bulk Action (that has been started by the admin himself)">
      <input type="dict">
        <param name="action_id" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="clearBulkAction" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION"
            comment="clear (remove from list) a Bulk Action (that has been started by the admin himself), and is finished">
      <input type="dict">
        <param name="action_id" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="bulkUpdateUserAttrs" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION, SEARCH USER"
            comment="combines methods 'user.searchUser' and 'user.updateUserAttrs'">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as method 'user.searchUser', parameter 'conds'" />
        <param name="attrs_to_update" type="list" item_type="str" comment="the same as method 'user.updateUserAttrs', parameter 'attrs'" />
        <param name="attrs_to_del" type="list" item_type="str" comment="the same as method 'user.updateUserAttrs', parameter 'to_del_attrs'" />
      </input>
      <output type="str" comment="action_id (string)" />
    </method>
    <method name="bulkChangeUserCredit" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION, BULK CHANGE USER CREDIT"
            comment="combines methods 'user.searchUser' and 'user.changeCreditExtended'">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as method 'user.searchUser', parameter 'conds'" />
        <param name="credit" type="float" comment="the same as method 'user.changeCreditExtended'" />
        <param name="change_type" type="choice" comment="the same as method 'user.changeCreditExtended'">
          <choice value="ADD" comment="" />
          <choice value="SET" comment="" />
          <choice value="MULTIPLY" comment="" />
        </param>
        <param name="credit_comment" type="str" comment="the same as method 'user.changeCreditExtended'" />
      </input>
      <output type="str" comment="action_id (string)" />
    </method>
    <method name="bulkChangeUserDeposit" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION, BULK CHANGE USER DEPOSIT"
            comment="combines methods 'user.searchUser' and 'user.changeDepositExtended'">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as method 'user.searchUser', parameter 'conds'" />
        <param name="deposit" type="float" comment="the same as method 'user.changeDepositExtended'" />
        <param name="change_type" type="choice" comment="the same as method 'user.changeDepositExtended'">
          <choice value="ADD" comment="" />
          <choice value="SET" comment="" />
          <choice value="MULTIPLY" comment="" />
        </param>
        <param name="deposit_comment" type="str" comment="the same as method 'user.changeDepositExtended'" />
      </input>
      <output type="str" comment="action_id (string)" />
    </method>
    <method name="bulkDeleteUser" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION, BULK DELETE USER"
            comment="combines methods 'user.searchUser' and 'user.delUser'">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as method 'user.searchUser', parameter 'conds'" />
        <param name="delete_comment" type="str" comment="the same as method 'user.delUser'" />
        <param name="del_connection_logs" type="bool" comment="the same as method 'user.delUser'" />
        <param name="del_audit_logs" type="bool" comment="the same as method 'user.delUser'" />
      </input>
      <output type="str" comment="action_id (string)" />
    </method>
    <method name="bulkRenewUsers" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION, RENEW USER"
            comment="combines methods 'user.searchUser' and 'user.renewUsers'">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as method 'user.searchUser', parameter 'conds'" />
        <param name="renew_comment" type="str" comment="the same as method 'user.renewUsers', parameter 'comment'" />
      </input>
      <output type="str" comment="action_id (string)" />
    </method>
    <method name="bulkKillUsers" auth_type="ADMIN" requires_perm="PERFORM BULK ACTION, RENEW USER"
            comment="combines methods 'user.searchUser' and 'user.renewUsers'">
      <input type="dict">
        <param name="conds" type="dict" comment="the same as method 'user.searchUser', parameter 'conds'" />
        <param name="kill" type="bool" optional="true" default="true" comment="true means Kill User, false means Clear User" />
      </input>
      <output type="str" comment="action_id (string)" />
    </method>
    <method name="getUsersExpDateFirstLogin" auth_type="ADMIN" requires_perm="GOD"
      comment="returns username, expiration date and first login for ALL USERS
               returns a large amount of data
               for use by CRM only">
      <input type="dict">
      </input>
      <output type="dict" dynamic_keys="true"
        comment="">
        <key type="str_int" comment="user_id (string, because of XML-RPC compatibility)" />
        <value type="list" length="3" comment="">
          <item index="0" type="str" comment="internet username" />
          <item index="1" type="int" comment="epoch time for nearest expiration date" />
          <item index="2" type="int" comment="epoch time for first login" />
        </value>
      </output>
    </method>
    <method name="setOneChargeRuleUsage" auth_type="ADMIN" requires_perm="CHANGE USER ATTRIBUTES"
        comment="set or clear charge rule usage of one rule for one user">
      <input type="dict">
        <param name="user_id" type="int" comment=""></param>
        <param name="charge_rule_id" type="int" comment=""></param>
        <param name="credit_usage" type="int" comment="pass 0 if you want to reset"></param>
        <param name="time_usage" type="int" comment="in seconds, pass 0 if you want to reset"></param>
        <param name="traffic_usage" type="int" comment="in bytes, pass 0 if you want to reset"></param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="setFeshfesheParams" auth_type="ADMIN" requires_perm="CHANGE USER ATTRIBUTES"
        comment="Added in tag 320, See: http://wiki.parspooyesh.com/index.php/Feshfeshe">
      <input type="dict">
        <param name="user_id" type="int" comment=""></param>
        <param name="traffic" type="int" comment="Traffic, in Mega Bytes"></param>
        <param name="date_from" type="str_datetime" comment="start date and time, format '%Y-%m-%d %H:%M'"></param>
        <param name="date_to" type="str_datetime" comment="end date and time, format '%Y-%m-%d %H:%M'"></param>
      </input>
      <output type="null" comment="" />
    </method>
  </handler>
  <handler name="user_custom_field" comment="">
    <method name="addNewCustomField" auth_type="ADMIN" requires_perm="CHANGE USER CUSTOM FIELDS" comment="">
      <input type="dict">
        <param name="name" type="str" comment="" />
        <param name="description" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="value_type" type="choice" comment="">
          <choice value="string" comment="" />
          <choice value="integer" comment="" />
          <choice value="float" comment="" />
        </param>
        <param name="interface_type" type="choice" comment="">
          <choice value="text_field" comment="" />
          <choice value="single_select" comment="" />
          <choice value="radio_button" comment="" />
          <choice value="checkbox" comment="" />
        </param>
        <param name="allowable_values" type="list" length="-1" comment="type of items depends on value_type param" />
        <param name="mandatory" type="bool" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="updateCustomField" auth_type="ADMIN" requires_perm="CHANGE USER CUSTOM FIELDS" comment="">
      <input type="dict">
        <param name="custom_field_id" type="int" comment="" />
        <param name="name" type="str" comment="" />
        <param name="description" type="str" comment="" />
        <param name="comment" type="str" comment="" />
        <param name="value_type" type="choice" comment="">
          <choice value="string" comment="" />
          <choice value="integer" comment="" />
          <choice value="float" comment="" />
        </param>
        <param name="interface_type" type="choice" comment="">
          <choice value="text_field" comment="" />
          <choice value="single_select" comment="" />
          <choice value="radio_button" comment="" />
          <choice value="checkbox" comment="" />
        </param>
        <param name="allowable_values" type="list" length="-1" comment="type of items depends on value_type param" />
        <param name="mandatory" type="bool" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="deleteCustomField" auth_type="ADMIN" requires_perm="CHANGE USER CUSTOM FIELDS" comment="">
      <input type="dict">
        <param name="name" type="str" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getAllCustomFields" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <key type="str" comment="custom field name" />
        <value type="dict" comment="">
          <param name="custom_field_id" type="int" comment="" />
          <param name="name" type="str" comment="" />
          <param name="description" type="str" comment="" />
          <param name="comment" type="str" comment="" />
          <param name="value_type" type="choice" comment="">
            <choice value="string" comment="" />
            <choice value="integer" comment="" />
            <choice value="float" comment="" />
          </param>
          <param name="interface_type" type="choice" comment="">
            <choice value="text_field" comment="" />
            <choice value="single_select" comment="" />
            <choice value="radio_button" comment="" />
            <choice value="checkbox" comment="" />
          </param>
          <param name="allowable_values" type="list" length="-1" comment="type of items depends on value_type param" />
          <param name="mandatory" type="bool" comment="" />
        </value>
      </output>
    </method>
  </handler>
  <handler name="util" comment="">
    <method name="multiStrGetAll" auth_type="ADMIN, USER" requires_perm="" comment="">
      <input type="dict">
        <param name="str" type="str" mult_str="true" comment="" />
        <param name="left_pad" type="bool" comment="" />
      </input>
      <output type="list" item_type="str" comment="" />
    </method>
    <method name="runDebugCode" auth_type="ADMIN" requires_perm="GOD" comment="">
      <input type="dict">
        <param name="command" type="str" comment="" />
      </input>
      <output type="bool" value="true" comment="" />
    </method>
    <method name="getStartOfMonth" auth_type="ADMIN, USER" requires_perm=""
      comment="returns date string of the begining of current month (jalali / gregorian month, depending of input date_type)" >
      <input type="dict">
      </input>
      <output type="str" comment="date string with format '%Y-%m-%d'" />
    </method>
    <method name="getNow" auth_type="USER, ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="str_datetime" comment="formatted datetime of current time" />
    </method>
    <method name="afeGetUserInfo" auth_type="ADMIN" requires_perm="AFE REMOTE ADMIN" comment="">
      <input type="dict">
        <param name="username" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="password" type="str" comment="internet password" />
        <param name="group" type="str" comment="group name" />
        <param name="credit" type="float" comment="" />
      </output>
    </method>
    <method name="afeGetAllGroups" auth_type="ADMIN" requires_perm="AFE REMOTE ADMIN" comment="">
      <input type="dict">
      </input>
      <output type="list" item_type="str" comment="list of group names" />
    </method>
    <method name="afeChangeUserCredit" auth_type="ADMIN" requires_perm="AFE REMOTE ADMIN" comment="">
      <input type="dict">
        <param name="username" type="str" comment="" />
        <param name="amount" type="float" comment="" />
        <param name="comment" type="comment" comment="" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getUsernameForIP" auth_type="ADMIN" requires_perm="SEE ONLINE USERS"
        comment="returns internet username for an online user with given remote ip">
      <input type="dict">
        <param name="ip" type="str" comment="" />
      </input>
      <output type="str" comment="a username, or 'No User Found'" />
    </method>
    <method name="createSessionForFailedUserByIP" auth_type="" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="str" comment="Session ID" />
    </method>
    <method name="createSessionForUserByIP" auth_type="" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="str" comment="Session ID" />
    </method>
    <method name="getErrorForFailedUser" auth_type="" requires_perm=""
      comment="returns error_key and error_description for failed user that is calling this handler
               raises an error if session for user is not found">
      <input type="dict">
      </input>
      <output type="list" length="2" comment="">
        <item index="0" type="str" comment="error key" />
        <item index="1" type="str" comment="error description" />
      </output>
    </method>
    <method name="kickFailedUserByIP" auth_type="" requires_perm=""
        comment="Force disconnect a failed user by using his IP address (method called by user himself)">
      <input type="dict">
      </input>
      <output type="bool" comment="returns true if online user was found and disconnected, returns false otherwise" />
    </method>
    <method name="kickIDLEUsersByIP" auth_type="" requires_perm="" comment="">
      <input type="dict">
        <param name="idle_ip_list" type="list" item_type="str" comment="list of IP string" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="echo" auth_type="ADMIN" requires_perm="GOD" comment="returns same the input string">
      <input type="dict">
        <param name="echo" type="str" comment="" />
      </input>
      <output type="str" comment="the same value of 'echo' param" />
    </method>
    <method name="getSessionISPID" auth_type="USER, ADMIN" requires_perm="" comment="use after login into user/admin panel">
      <input type="dict">
      </input>
      <output type="int" comment="ISP ID for Page Style to show to this user/admin" />
    </method>
    <method name="getSessionISPID" auth_type="ANONYMOUS" requires_perm="" comment="use in login page of user/admin panel">
      <input type="dict">
        <param name="web_domain" type="str" comment="domain of user/admin panel page that user has opened" />
      </input>
      <output type="int" comment="ISP ID for Page Style to show to this user/admin" />
    </method>
    <method name="getISPsPageStyleRevision" auth_type="" requires_perm=""
      comment="returns latest Revision Number of ISP Page Style">
      <input type="dict">
      </input>
      <output type="int" comment="Revision Number of ISP Page Style" />
    </method>
    <method name="getSessionPageStyle" auth_type="" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="">
        <param name="header_logo_ext" type="str" comment="header logo file extension, for example 'gif'" />
        <param name="header_logo_contents" type="str" comment="base64-encoded data of header logo image" />
        <param name="header_bg_color" type="str" comment="header background color, in html color format, for example 'E0DEDE'" />
        <param name="header_text_color" type="str" comment="header text color, html color format, for example 'E0DEDE'" />
        <param name="footer_logo_ext" type="str" comment="footer logo file extension, for example 'gif'" />
        <param name="footer_logo_contents" type="str" comment="base64-encoded data of footer logo image" />
        <param name="footer_bg_color" type="str" comment="footer background color, in html color format, for example 'E0DEDE'" />
        <param name="footer_text_color" type="str" comment="footer text color, in html color format, for example 'E0DEDE'" />
        <param name="footer_msg" type="str" comment="base64-encoded string of footer message" />
      </output>
    </method>
    <method name="getDRBDStatus" auth_type="ADMIN" requires_perm="GOD" comment="return status of DRBD">
      <input type="dict">
      </input>
      <output type="list" comment="see: http://www.drbd.org/en/doc/users-guide-83/ch-admin#s-drbd-overview">
        <item index="0" type="str" comment="hostname" />
        <item index="1" type="choice" comment="Connection Status">
          <choice value="StandAlone" />
          <choice value="Disconnecting" />
          <choice value="Unconnected" />
          <choice value="Timeout" />
          <choice value="BrokenPipe" />
          <choice value="NetworkFailure" />
          <choice value="ProtocolError" />
          <choice value="TearDown" />
          <choice value="WFConnection" />
          <choice value="WFReportParams" />
          <choice value="Connected" />
          <choice value="StartingSyncS" />
          <choice value="StartingSyncT" />
          <choice value="WFBitMapS" />
          <choice value="WFBitMapT" />
          <choice value="WFSyncUUID" />
          <choice value="SyncSource" />
          <choice value="SyncTarget" />
          <choice value="PausedSyncS" />
          <choice value="PausedSyncT" />
          <choice value="VerifyS" />
          <choice value="VerifyT" />
        </item>
        <item index="2" type="choice" comment="Our Role">
          <choice value="Primary" />
          <choice value="Secondary" />
          <choice value="Unknown" />
        </item>
        <item index="3" type="choice" comment="Other's Role">
          <choice value="Primary" />
          <choice value="Secondary" />
          <choice value="Unknown" />
        </item>
        <item index="4" type="choice" comment="Our State">
          <choice value="Diskless" />
          <choice value="Attaching" />
          <choice value="Failed" />
          <choice value="Negotiating" />
          <choice value="Inconsistent" />
          <choice value="Outdated" />
          <choice value="DUnknown" />
          <choice value="Consistent" />
          <choice value="UpToDate" />
        </item>
        <item index="5" type="choice" comment="Other's State">
          <choice value="Diskless" />
          <choice value="Attaching" />
          <choice value="Failed" />
          <choice value="Negotiating" />
          <choice value="Inconsistent" />
          <choice value="Outdated" />
          <choice value="DUnknown" />
          <choice value="Consistent" />
          <choice value="UpToDate" />
        </item>
      </output>
    </method>
    <method name="getSavedReportList" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" comment="">
        <item type="dict" comment="">
          <param name="filename" type="str" comment="file path" />
          <param name="size" type="int" comment="file size, in Bytes" />
        </item>
      </output>
    </method>
    <method name="deleteSavedReport" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="report_auth" type="str" comment="admin username" />
        <param name="report_type" type="str" comment="" />
        <param name="report_date" type="str" comment="format: YYYYMMDD" />
        <param name="report_status" type="choice" comment="">
          <choice value="started" comment="" />
          <choice value="finished" comment="" />
        </param>
        <param name="report_format" type="choice" comment="">
          <choice value="csv" />
          <choice value="pdf" />
        </param>
      </input>
      <output value="true" comment="" />
    </method>
    <method name="version" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
      </input>
      <output type="dict" comment="return version,tag,branch">
        <param name="current_tag" type="str" comment="current tag"/>
        <param name="version" type="str" comment="version"/>
        <param name="branch" type="str" comment="branch"/>
      </output>
    </method>
  </handler>
  <handler name="voip_provider" comment="">
    <method name="listRoutingProfiles" auth_type="ADMIN" requires_perm="SEE VOIP PROVIDER" comment="">
      <input type="dict">
      </input>
      <output type="list" item_type="str" comment="list of profile names" />
    </method>
    <method name="listVoIPProviders" auth_type="ADMIN" requires_perm="SEE VOIP PROVIDER" comment="">
      <input type="dict">
      </input>
      <output type="list" item_type="str" comment="list of provider names" />
    </method>
  </handler>
  <handler name="voucher" comment="">
    <method name="searchVoucher" auth_type="ADMIN" requires_perm="SEE VOUCHER" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="voucher_ids" type="str" mult_str="true" optional="true" comment="" />
          <param name="batch_ids" type="str" mult_str="true" optional="true" comment="" />
          <param name="pins" type="str" mult_str="true" optional="true" comment="" />
          <param name="is_used" type="bool" optional="true" comment="true means voucher is used" />
          <param name="isp_names" type="list, str" optional="true" comment="list of isp names, or string of one isp name" />
        </param>
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="sort_by" type="choice" comment="">
          <choice value="pin" comment="" />
          <choice value="voucher_id" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="number of total rows" />
        <param name="report" type="list" length="-1" comment="">
          <item type="dict" comment="">
            <param name="voucher_id" type="int" comment="" />
            <param name="voucher_pin" type="str" comment="" />
            <param name="voucher_serial" type="str" comment="" />
            <param name="voucher_is_used" type="bool" comment="" />
            <param name="voucher_used_date" type="str_datetime" comment="" />
            <param name="voucher_user_id" type="int" comment="" />
            <param name="batch_id" type="int" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="searchBatch" auth_type="ADMIN" requires_perm="SEE VOUCHER" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
          <param name="isp_names" type="list, str" optional="true" comment="list of isp names, or string of one isp name" />
          <param name="batch_ids" type="str" mult_str="true" optional="true" comment="" />
          <param name="batch_names" type="str" mult_str="true" optional="true" comment="" />
          <param name="is_locked" type="bool" optional="true" comment="true means batch is locked" />
          <param name="can_recharge_user" type="bool" optional="true" comment="true means batch can be used to recharge user" />
          <param name="can_create_user" type="bool" optional="true" comment="true means batch can be used to create user" />
          <param name="credit_from" type="float" optional="true" comment="" />
          <param name="credit_to" type="float" optional="true" comment="" />
        </param>
        <param name="from" type="int" comment="" />
        <param name="to" type="int" comment="" />
        <param name="sort_by" type="choice" comment="">
          <choice value="batch_id" comment="" />
          <choice value="batch_name" comment="" />
          <choice value="batch_credit" comment="" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="number of total rows" />
        <param name="report" type="list" length="-1" comment="">
          <item type="dict" comment="">
            <param name="batch_id" type="int" comment="" />
            <param name="batch_name" type="str" comment="" />
            <param name="batch_is_locked" type="bool" comment="" />
            <param name="batch_credit" type="float" comment="" />
            <param name="batch_can_create_user" type="bool" comment="" />
            <param name="batch_can_recharge_user" type="bool" comment="" />
            <param name="batch_change_target" type="text" comment="" />
            <param name="batch_comment" type="text" comment="" />
            <param name="batch_creation_date" type="str_datetime" comment="" />
            <param name="batch_isp_id" type="int" comment="int" />
            <param name="batch_allow_use_by_children_isp" type="bool" comment="" />
          </item>
        </param>
      </output>
    </method>
    <method name="voucherRechargeUser" auth_type="ADMIN" requires_perm="USE VOUCHER ON USERS" comment="by admin">
      <input type="dict">
        <param name="voucher_pin" type="str" comment="" />
        <param name="user_id" type="int" comment="" />
      </input>
      <output type="float" comment="voucher credit" />
    </method>
    <method name="voucherRechargeUser" auth_type="USER" comment="user needs 'allow_recharge_by_voucher' flag">
      <input type="dict">
        <param name="voucher_pin" type="str" comment="" />
      </input>
      <output type="float" comment="voucher credit" />
    </method>
    <method name="voucherAddNewUser" auth_type="ADMIN" requires_perm="USE VOUCHER ON USERS, ADD NEW USER" comment="">
      <input type="dict">
        <param name="voucher_pin" type="str" comment="" />
        <param name="isp_name" type="str" comment="" />
        <param name="group_name" type="str" comment="" />
      </input>
      <output type="int" comment="User ID of newly created user" />
    </method>
    <method name="getBatchVoucherAttrs" auth_type="ADMIN, USER" requires_perm=""
      comment="admin needs 'SEE VOUCHER' permission, user needs 'allow_recharge_by_voucher' flag">
      <input type="dict">
        <param name="voucher_pin" type="str" comment="" />
      </input>
      <output type="dict" comment="">
        <param name="voucher_id" type="int" comment="" />
        <param name="voucher_pin" type="str" comment="" />
        <param name="voucher_serial" type="str" comment="" />
        <param name="voucher_is_used" type="bool" comment="" />
        <param name="voucher_used_date" type="str_datetime" comment="" />
        <param name="voucher_user_id" type="int" comment="" />
        <param name="batch_id" type="int" comment="" />
        <param name="batch_name" type="str" comment="" />
        <param name="batch_is_locked" type="bool" comment="" />
        <param name="batch_credit" type="float" comment="" />
        <param name="batch_can_create_user" type="bool" comment="" />
        <param name="batch_can_recharge_user" type="bool" comment="" />
        <param name="batch_change_target" type="text" comment="" />
        <param name="batch_comment" type="text" comment="" />
        <param name="batch_creation_date" type="str_datetime" comment="" />
        <param name="batch_isp_id" type="int" comment="int" />
        <param name="batch_allow_use_by_children_isp" type="bool" comment="" />
      </output>
    </method>
    <method name="voucherAddBatch" auth_type="ADMIN" requires_perm="CHANGE VOUCHER"
        comment="">
      <input type="dict">
        <param name="batch_dict" type="dict" comment="">
          <param name="batch_name" type="str" comment="" />
          <param name="is_locked" type="bool" default="False" comment="" />
          <param name="credit" type="float" comment="" />
          <param name="can_recharge_user" type="bool" comment="" />
          <param name="can_create_user" type="bool" comment="" />
          <param name="change_target" type="choice" comment="">
            <choice value="credit" comment="Credit" />
            <choice value="deposit" comment="Renew Deposit" />
            <choice value="deposit_recharge" comment="Recharge Deposit" />
          </param>
          <param name="allow_use_by_children_isp" type="bool" comment="" />
          <param name="comment" type="str" comment="" />
        </param>
        <param name="pin_prefix" type="str" comment="" />
        <param name="pin_len" type="int" comment="" />
        <param name="serial_prefix" type="str" comment="" />
        <param name="serial_start" type="int" comment="" />
        <param name="count" type="int" comment="" />
      </input>
      <output type="int" comment="batch_id" />
    </method>
    <method name="voucherChangeBatchLockStatus" auth_type="ADMIN" requires_perm="CHANGE VOUCHER"
        comment="">
      <input type="dict">
        <param name="batch_id" type="int" />
        <param name="lock" type="bool" />
      </input>
      <output type="null" />
    </method>
    <method name="voucherGetBatchByID" auth_type="ADMIN" requires_perm="SEE VOUCHER"
        comment="">
      <input type="dict">
        <param name="batch_id" type="int" />
      </input>
      <output type="dict" comment="batch info dict">
        <param name="batch_id" type="int" comment="" />
        <param name="batch_name" type="str" comment="" />
        <param name="is_locked" type="bool" comment="" />
        <param name="credit" type="float" comment="" />
        <param name="can_recharge_user" type="bool" comment="" />
        <param name="can_create_user" type="bool" comment="" />
        <param name="change_target" type="choice" comment="">
          <choice value="credit" comment="Credit" />
          <choice value="deposit" comment="Renew Deposit" />
          <choice value="deposit_recharge" comment="Recharge Deposit" />
        </param>
        <param name="isp_name" type="str" />
        <param name="creation_date" type="str_datetime" />
        <param name="allow_use_by_children_isp" type="bool" comment="" />
        <param name="comment" type="str" comment="" />
      </output>
    </method>
    <method name="getVoucherByID" auth_type="ADMIN" requires_perm="SEE VOUCHER"
        comment="">
      <input type="dict">
        <param name="voucher_id" type="int" />
      </input>
      <output type="dict">
        <param name="voucher_id" type="int" />
        <param name="batch_id" type="int" />
        <param name="pin" type="str" />
        <param name="serial" type="str" />
        <param name="is_used" type="bool" />
        <param name="user_id" type="int" />
        <param name="used_date" type="str_datetime" />
      </output>
    </method>
    <method name="voucherSearchBatch" auth_type="ADMIN" requires_perm="SEE VOUCHER"
        comment="">
      <input type="dict">
        <param name="conds" type="dict">
          <param name="isp_names" type="list, str" optional="true"
            comment="list of isp names, or string of one isp name" />
          <param name="batch_ids" type="str" multi_str="true" optional="true"
            comment="comma-separated Batch IDs" />
          <param name="batch_names" type="str" multi_str="true" optional="true"
            comment="comma-separated Batch Names" />
          <param name="is_locked" type="bool" optional="true" comment="" />
          <param name="can_recharge_user" type="bool" optional="true" comment="" />
          <param name="can_create_user" type="bool" optional="true" comment="" />
          <param name="credit_from" type="float" optional="true"
            comment="only batches with credit &gt;= {credit_from}" />
          <param name="credit_to" type="float" optional="true"
            comment="only batches with credit &lt;= {credit_to}" />
        </param>
        <param name="from" type="int" comment="for pagination" />
        <param name="to" type="int" comment="for pagination" />
        <param name="sort_by" type="choice">
          <choice value="batch_id" />
          <choice value="batch_name" />
          <choice value="credit" />
        </param>
        <param name="desc" type="bool" />
      </input>
      <output type="dict">
        <param name="total_rows" type="int" comment="total number of results" />
        <param name="report" type="list" item_type="dict" comment="">
          <item type="dict" comment="batch info dict">
            <param name="batch_id" type="int" />
            <param name="batch_name" type="str" />
            <param name="is_locked" type="bool" />
            <param name="credit" type="float" />
            <param name="can_create_user" type="bool" />
            <param name="can_recharge_user" type="bool" />
            <param name="change_target" type="choice">
              <choice value="credit" comment="Credit" />
              <choice value="deposit" comment="Renew Deposit" />
              <choice value="deposit_recharge" comment="Recharge Deposit" />
            </param>
            <param name="comment" type="str" />
            <param name="creation_date" type="str_datetime" />
            <param name="isp_id" type="int" />
            <param name="allow_use_by_children_isp" type="bool" />
            <param name="is_locked" type="bool" />
            <param name="isp_name" type="str" />
          </item>
        </param>
      </output>
    </method>
  </handler>
  <handler name="invoice" comment="based on branch C_invoice">
    <method name="getInvoiceProfileNames" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="conds" type="dict" comment="">
        </param>
        <param name="_from" type="int" comment="start index" />
        <param name="to" type="int" comment="end index" />
        <param name="sort_by" type="choice" comment="">
          <choice value="issue_date" />
          <choice value="user_id" />
          <choice value="total_amount" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="list" length="-1" item_type="str" comment="list of profile names">
      </output>
    </method>
    <method name="getInvoiceProfiles" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
      </input>
      <output type="list" length="-1" item_type="dict" comment="">
        <item type="dict" comment="profile info dict">
          <param name="profile_id" type="int" />
          <param name="profile_name" type="str" />
          <param name="isp_name" type="str" />
          <param name="comment" type="str" />
          <param name="rules" type="list" length="-1">
            <item type="dict" comment="rule info dict">
              <param name="rule_id" type="int" />
              <param name="description" type="str" />
              <param name="invoice_template_name" type="str" />
              <param name="pi_template_name" type="str" />
              <param name="date_type" type="choice">
                <choice value="jalali" />
                <choice value="gregorian" />
              </param>
              <param name="language" type="choice">
                <choice value="fa" />
                <choice value="en" />
              </param>
              <param name="pi_exp_days" type="int" />
              <param name="roundup_scale" type="int" />
              <param name="auto_invoice_event" type="choice">
                <choice value="null" />
                <choice value="credit_finished" />
                <choice value="exp_date" />
                <choice value="always" />
              </param>
              <param name="auto_invoice_threshold" type="int" />
              <param name="allow_user_issue_invoice" type="bool" />
              <param name="action" type="choice">
                <choice value="change_service" />
                <choice value="renew" />
                <choice value="renew_with_next_group" />
                <choice value="recharge" />
                <choice value="increase_deposit" />
                <choice value="increase_deposit_by_group_credit" />
                <choice value="increase_recharge_deposit" />
                <choice value="increase_credit" />
                <choice value="increase_deposit_constant" />
                <choice value="increase_recharge_deposit_constant" />
                <choice value="increase_credit_constant" />
                <choice value="set_deposit_constant" />
                <choice value="set_credit_constant" />
              </param>
              <param name="action_args" type="str" comment="" />
              <param name="disabled" type="bool" />
              <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
                <item type="dict" comment="rule item info dict">
                  <param name="rule_item_id" type="int" />
                  <param name="description" type="str" />
                  <param name="formula" type="str" />
                  <param name="is_bonus" type="bool" />
                  <param name="none_effective" type="bool" />
                </item>
              </param>
            </item>
          </param>
        </item>
      </output>
    </method>
    <method name="getInvoiceProfileByName" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="profile_name" type="str" />
      </input>
      <output type="dict" comment="">
        <param name="profile_id" type="int" />
        <param name="profile_name" type="str" />
        <param name="isp_name" type="str" />
        <param name="comment" type="str" />
        <param name="rules" type="list" length="-1">
          <item type="dict" comment="rule info dict">
            <param name="rule_id" type="int" />
            <param name="description" type="str" />
            <param name="invoice_template_name" type="str" />
            <param name="pi_template_name" type="str" />
            <param name="date_type" type="choice">
              <choice value="jalali" />
              <choice value="gregorian" />
            </param>
            <param name="language" type="choice">
              <choice value="fa" />
              <choice value="en" />
            </param>
            <param name="pi_exp_days" type="int" />
            <param name="roundup_scale" type="int" />
            <param name="auto_invoice_event" type="choice">
              <choice value="null" />
              <choice value="credit_finished" />
              <choice value="exp_date" />
              <choice value="always" />
            </param>
            <param name="auto_invoice_threshold" type="int" />
            <param name="allow_user_issue_invoice" type="bool" />
            <param name="action" type="choice">
              <choice value="change_service" />
              <choice value="renew" />
              <choice value="renew_with_next_group" />
              <choice value="recharge" />
              <choice value="increase_deposit" />
              <choice value="increase_deposit_by_group_credit" />
              <choice value="increase_recharge_deposit" />
              <choice value="increase_credit" />
              <choice value="increase_deposit_constant" />
              <choice value="increase_recharge_deposit_constant" />
              <choice value="increase_credit_constant" />
              <choice value="set_deposit_constant" />
              <choice value="set_credit_constant" />
            </param>
            <param name="action_args" type="str" comment="" />
            <param name="disabled" type="bool" />
            <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
              <item type="dict" comment="rule item info dict">
                <param name="rule_item_id" type="int" />
                <param name="description" type="str" />
                <param name="formula" type="str" />
                <param name="is_bonus" type="bool" />
                <param name="none_effective" type="bool" />
              </item>
            </param>
          </item>
        </param>
      </output>
    </method>
    <method name="getInvoiceProfileByID" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="profile_id" type="int" />
      </input>
      <output type="dict" comment="">
        <param name="profile_id" type="int" />
        <param name="profile_name" type="str" />
        <param name="isp_name" type="str" />
        <param name="comment" type="str" />
        <param name="rules" type="list" length="-1">
          <item type="dict" comment="rule info dict">
            <param name="rule_id" type="int" />
            <param name="description" type="str" />
            <param name="invoice_template_name" type="str" />
            <param name="pi_template_name" type="str" />
            <param name="date_type" type="choice">
              <choice value="jalali" />
              <choice value="gregorian" />
            </param>
            <param name="language" type="choice">
              <choice value="fa" />
              <choice value="en" />
            </param>
            <param name="pi_exp_days" type="int" />
            <param name="roundup_scale" type="int" />
            <param name="auto_invoice_event" type="choice">
              <choice value="null" />
              <choice value="credit_finished" />
              <choice value="exp_date" />
              <choice value="always" />
            </param>
            <param name="auto_invoice_threshold" type="int" />
            <param name="allow_user_issue_invoice" type="bool" />
            <param name="action" type="choice">
              <choice value="change_service" />
              <choice value="renew" />
              <choice value="renew_with_next_group" />
              <choice value="recharge" />
              <choice value="increase_deposit" />
              <choice value="increase_deposit_by_group_credit" />
              <choice value="increase_recharge_deposit" />
              <choice value="increase_credit" />
              <choice value="increase_deposit_constant" />
              <choice value="increase_recharge_deposit_constant" />
              <choice value="increase_credit_constant" />
              <choice value="set_deposit_constant" />
              <choice value="set_credit_constant" />
            </param>
            <param name="action_args" type="str" comment="" />
            <param name="disabled" type="bool" />
            <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
              <item type="dict" comment="rule item info dict">
                <param name="rule_item_id" type="int" />
                <param name="description" type="str" />
                <param name="formula" type="str" />
                <param name="is_bonus" type="bool" />
                <param name="none_effective" type="bool" />
              </item>
            </param>
          </item>
        </param>
      </output>
    </method>
    <method name="getInvoiceProfileByUserID" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="user_id" type="int" />
      </input>
      <output type="dict" comment="">
        <param name="profile_id" type="int" />
        <param name="profile_name" type="str" />
        <param name="isp_name" type="str" />
        <param name="comment" type="str" />
        <param name="rules" type="list" length="-1">
          <item type="dict" comment="rule info dict">
            <param name="rule_id" type="int" />
            <param name="description" type="str" />
            <param name="invoice_template_name" type="str" />
            <param name="pi_template_name" type="str" />
            <param name="date_type" type="choice">
              <choice value="jalali" />
              <choice value="gregorian" />
            </param>
            <param name="language" type="choice">
              <choice value="fa" />
              <choice value="en" />
            </param>
            <param name="pi_exp_days" type="int" />
            <param name="roundup_scale" type="int" />
            <param name="auto_invoice_event" type="choice">
              <choice value="null" />
              <choice value="credit_finished" />
              <choice value="exp_date" />
              <choice value="always" />
            </param>
            <param name="auto_invoice_threshold" type="int" />
            <param name="allow_user_issue_invoice" type="bool" />
            <param name="action" type="choice">
              <choice value="change_service" />
              <choice value="renew" />
              <choice value="renew_with_next_group" />
              <choice value="recharge" />
              <choice value="increase_deposit" />
              <choice value="increase_deposit_by_group_credit" />
              <choice value="increase_recharge_deposit" />
              <choice value="increase_credit" />
              <choice value="increase_deposit_constant" />
              <choice value="increase_recharge_deposit_constant" />
              <choice value="increase_credit_constant" />
              <choice value="set_deposit_constant" />
              <choice value="set_credit_constant" />
            </param>
            <param name="action_args" type="str" comment="" />
            <param name="disabled" type="bool" />
            <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
              <item type="dict" comment="rule item info dict">
                <param name="rule_item_id" type="int" />
                <param name="description" type="str" />
                <param name="formula" type="str" />
                <param name="is_bonus" type="bool" />
                <param name="none_effective" type="bool" />
              </item>
            </param>
          </item>
        </param>
      </output>
    </method>
    <method name="getInvoiceProfileByGroupName" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="group_name" type="str" />
      </input>
      <output type="dict" comment="">
        <param name="profile_id" type="int" />
        <param name="profile_name" type="str" />
        <param name="isp_name" type="str" />
        <param name="comment" type="str" />
        <param name="rules" type="list" length="-1">
          <item type="dict" comment="rule info dict">
            <param name="rule_id" type="int" />
            <param name="description" type="str" />
            <param name="invoice_template_name" type="str" />
            <param name="pi_template_name" type="str" />
            <param name="date_type" type="choice">
              <choice value="jalali" />
              <choice value="gregorian" />
            </param>
            <param name="language" type="choice">
              <choice value="fa" />
              <choice value="en" />
            </param>
            <param name="pi_exp_days" type="int" />
            <param name="roundup_scale" type="int" />
            <param name="auto_invoice_event" type="choice">
              <choice value="null" />
              <choice value="credit_finished" />
              <choice value="exp_date" />
              <choice value="always" />
            </param>
            <param name="auto_invoice_threshold" type="int" />
            <param name="allow_user_issue_invoice" type="bool" />
            <param name="action" type="choice">
              <choice value="change_service" />
              <choice value="renew" />
              <choice value="renew_with_next_group" />
              <choice value="recharge" />
              <choice value="increase_deposit" />
              <choice value="increase_deposit_by_group_credit" />
              <choice value="increase_recharge_deposit" />
              <choice value="increase_credit" />
              <choice value="increase_deposit_constant" />
              <choice value="increase_recharge_deposit_constant" />
              <choice value="increase_credit_constant" />
              <choice value="set_deposit_constant" />
              <choice value="set_credit_constant" />
            </param>
            <param name="action_args" type="str" comment="" />
            <param name="disabled" type="bool" />
            <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
              <item type="dict" comment="rule item info dict">
                <param name="rule_item_id" type="int" />
                <param name="description" type="str" />
                <param name="formula" type="str" />
                <param name="is_bonus" type="bool" />
                <param name="none_effective" type="bool" />
              </item>
            </param>
          </item>
        </param>
      </output>
    </method>
    <method name="getInvoiceRuleByID" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="rule_id" type="int" />
      </input>
      <output type="dict" comment="">
        <param name="rule_id" type="int" />
        <param name="description" type="str" />
        <param name="invoice_template_name" type="str" />
        <param name="pi_template_name" type="str" />
        <param name="date_type" type="choice">
          <choice value="jalali" />
          <choice value="gregorian" />
        </param>
        <param name="language" type="choice">
          <choice value="fa" />
          <choice value="en" />
        </param>
        <param name="pi_exp_days" type="int" />
        <param name="roundup_scale" type="int" />
        <param name="auto_invoice_event" type="choice">
          <choice value="null" />
          <choice value="credit_finished" />
          <choice value="exp_date" />
          <choice value="always" />
        </param>
        <param name="auto_invoice_threshold" type="int" />
        <param name="allow_user_issue_invoice" type="bool" />
        <param name="action" type="choice">
          <choice value="change_service" />
          <choice value="renew" />
          <choice value="renew_with_next_group" />
          <choice value="recharge" />
          <choice value="increase_deposit" />
          <choice value="increase_deposit_by_group_credit" />
          <choice value="increase_recharge_deposit" />
          <choice value="increase_credit" />
          <choice value="increase_deposit_constant" />
          <choice value="increase_recharge_deposit_constant" />
          <choice value="increase_credit_constant" />
          <choice value="set_deposit_constant" />
          <choice value="set_credit_constant" />
        </param>
        <param name="action_args" type="str" comment="" />
        <param name="disabled" type="bool" />
        <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
          <item type="dict" comment="rule item info dict">
            <param name="rule_item_id" type="int" />
            <param name="description" type="str" />
            <param name="formula" type="str" />
            <param name="is_bonus" type="bool" />
            <param name="none_effective" type="bool" />
          </item>
        </param>
      </output>
    </method>
    <method name="addInvoiceProfile" auth_type="ADMIN" requires_perm="CHANGE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="profile_name" type="str" />
        <param name="isp_name" type="str" optional="true" />
        <param name="comment" type="str" />
      </input>
      <output type="int" comment="Invoice Profile ID" />
    </method>
    <method name="updateInvoiceProfile" auth_type="ADMIN" requires_perm="CHANGE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="profile_id" type="int" />
        <param name="profile_name" type="str" />
        <param name="isp_name" type="str" />
        <param name="comment" type="str" />
        <param name="rules" type="list" item_type="dict" length="-1">
          <item type="dict" comment="rule info dict">
            <param name="rule_id" type="int" />
            <param name="description" type="str" />
            <param name="invoice_template_name" type="str" />
            <param name="pi_template_name" type="str" />
            <param name="date_type" type="choice">
              <choice value="jalali" />
              <choice value="gregorian" />
            </param>
            <param name="language" type="choice">
              <choice value="fa" />
              <choice value="en" />
            </param>
            <param name="pi_exp_days" type="int" />
            <param name="roundup_scale" type="int" />
            <param name="auto_invoice_event" type="choice">
              <choice value="null" />
              <choice value="credit_finished" />
              <choice value="exp_date" />
              <choice value="always" />
            </param>
            <param name="auto_invoice_threshold" type="int" />
            <param name="allow_user_issue_invoice" type="bool" />
            <param name="action" type="choice">
              <choice value="change_service" />
              <choice value="renew" />
              <choice value="renew_with_next_group" />
              <choice value="recharge" />
              <choice value="increase_deposit" />
              <choice value="increase_deposit_by_group_credit" />
              <choice value="increase_recharge_deposit" />
              <choice value="increase_credit" />
              <choice value="increase_deposit_constant" />
              <choice value="increase_recharge_deposit_constant" />
              <choice value="increase_credit_constant" />
              <choice value="set_deposit_constant" />
              <choice value="set_credit_constant" />
            </param>
            <param name="action_args" type="str" comment="" />
            <param name="disabled" type="bool" />
            <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
              <item type="dict" comment="rule item info dict">
                <param name="rule_item_id" type="int" />
                <param name="description" type="str" />
                <param name="formula" type="str" />
                <param name="is_bonus" type="bool" />
                <param name="none_effective" type="bool" />
              </item>
            </param>
          </item>
        </param>
      </input>
      <output type="null" comment="" />
    </method>
    <method name="deleteInvoiceProfile" auth_type="ADMIN" requires_perm="CHANGE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="profile_id" type="int" />
      </input>
      <output type="null" comment="" />
    </method>
    <method name="getInvoiceRulesDescByProfileName" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="profile_name" type="str" />
      </input>
      <output type="dict" dynamic_keys="true" comment="">
        <key type="int" comment="rule_id" />
        <value type="str" comment="rule_description" />
      </output>
    </method>
    <method name="getAllTemplateNames" auth_type="ADMIN" requires_perm="SEE INVOICE PROFILE" comment="">
      <input type="dict">
      </input>
      <output type="list" item_type="str" length="-1"
          comment="list of all invoice template names" />
    </method>
    <method name="addInvoiceTemplate" auth_type="ADMIN" requires_perm="CHANGE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="template_name" type="str" />
      </input>
      <output type="null " comment="" />
    </method>
    <method name="deleteInvoiceTemplate" auth_type="ADMIN" requires_perm="CHANGE INVOICE PROFILE" comment="">
      <input type="dict">
        <param name="template_name" type="str" />
      </input>
      <output type="null " comment="" />
    </method>
    <method name="searchInvoices" auth_type="ADMIN, USER"
        requires_perm="user can only see his own invoices,
        admin must have permission 'SEE INVOICE'" comment="">
      <input type="dict">
        <param name="conds" type="dict">
          <param name="isp_names" type="list, str" multi_str="false" optional="true"
              comment="for admins, list of isp names, or string one isp name" />
          <param name="user_ids" type="str" multi_str="true" optional="true" />
          <param name="invoice_ids" type="str" multi_str="true" optional="true" />
          <param name="is_active" type="bool" optional="true" />
          <param name="is_paid" type="bool" optional="true" />
          <param name="total_amount_from" type="float" optional="true" />
          <param name="total_amount_to" type="float" optional="true" />
          <param name="issue_date_from" type="str_datetime" optional="true" requires_param="issue_date_from_unit" />
          <param name="issue_date_from_unit" type="choice" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="issue_date_to" type="str_datetime" optional="true" requires_param="issue_date_to_unit" />
          <param name="issue_date_to_unit" type="" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
        </param>
        <param name="_from" type="int" comment="pagination start" />
        <param name="to" type="int" comment="pagination end" />
        <param name="sort_by" type="choice">
          <choice value="issue_date" />
          <choice value="user_id" />
          <choice value="total_amount" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="total number of results" />
        <param name="report" type="list" item_type="dict" length="-1">
          <item type="dict" comment="">
            <param name="invoice_id" type="int" />
            <param name="invoice_issue_date" type="str_datetime" />
            <param name="is_active" type="bool" />
            <param name="is_paid" type="bool" />
            <param name="pi_issue_date" type="str_datetime" />
            <param name="rule_id" type="int" />
            <param name="rule_description" type="str" />
            <param name="period_end" type="str_datetime, null" comment="str or null" />
            <param name="period_start" type="str_datetime, null" comment="str or null" />
            <param name="comment" type="str" />
            <param name="sum_up_amount" type="float" />
            <param name="previous_due" type="float" />
            <param name="roundup_amount" type="float" />
            <param name="effective_amount" type="float" />
            <param name="paid_amount" type="float" />
            <param name="user_id" type="int" />
            <param name="owner_name" type="str" />
            <param name="user_address" type="str" />
            <param name="user_email" type="str" />
            <param name="user_name" type="str" />
            <param name="user_phone" type="str" />
            <param name="user_postal_code" type="str" />
          </item>
        </param>
      </output>
    </method>
    <method name="searchProformaInvoices" auth_type="ADMIN"
        requires_perm="user can only see his own proforma invoices,
        admin must have permission 'SEE INVOICE'" comment="">
      <input type="dict">
        <param name="conds" type="dict">
          <param name="isp_names" type="list, str" multi_str="false" optional="true"
              comment="for admins, list of isp names, or string one isp name" />
          <param name="user_ids" type="str" multi_str="true" optional="true" />
          <param name="pi_ids" type="str" multi_str="true" optional="true" />
          <param name="is_expired" type="bool" optional="true" />
          <param name="total_amount_from" type="float" optional="true" />
          <param name="total_amount_to" type="float" optional="true" />
          <param name="issue_date_from" type="str_datetime" optional="true" requires_param="issue_date_from_unit" />
          <param name="issue_date_from_unit" type="choice" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
          <param name="issue_date_to" type="str_datetime" optional="true" requires_param="issue_date_to_unit" />
          <param name="issue_date_to_unit" type="" optional="true">
            <choice value="jalali" />
            <choice value="gregorian" />
            <choice value="years" />
            <choice value="months" />
            <choice value="days" />
            <choice value="hours" />
            <choice value="minutes" />
          </param>
        </param>
        <param name="_from" type="int" comment="pagination start" />
        <param name="to" type="int" comment="pagination end" />
        <param name="sort_by" type="choice">
          <choice value="issue_date" />
          <choice value="user_id" />
          <choice value="total_amount" />
        </param>
        <param name="desc" type="bool" comment="descending" />
      </input>
      <output type="dict" comment="">
        <param name="total_rows" type="int" comment="total number of results" />
        <param name="report" type="list" item_type="dict" length="-1">
          <item type="dict" comment="">
            <param name="pi_id" type="int" />
            <param name="rule_id" type="int" />
            <param name="rule_description" type="str" />
            <param name="add_user" type="bool" />
            <param name="issue_date" type="str_datetime" />
            <param name="expired" type="bool" />
            <param name="sum_up_amount" type="float" />
            <param name="previous_due" type="float" />
            <param name="roundup_amount" type="float" />
            <param name="effective_amount" type="float" />
            <param name="comment" type="str" />
            <param name="owner_name" type="str" />
            <param name="user_id" type="int" />
            <param name="user_name" type="str" />
            <param name="user_address" type="str" />
            <param name="user_email" type="str" />
            <param name="user_phone" type="str" />
            <param name="user_postal_code" type="str" />
          </item>
        </param>
      </output>
    </method>
    <!--
      Undocumented methods:
          "deleteProformaInvoices"
          "payInvoiceByVoucher"
          "payProformaInvoiceByVoucher"
          "issuePIAutomaicallyForUser"
          "issuePIAutomaicallyForFailedUser"
          "issuePIByRuleDesc"
          "issuePIForRenew"
          "issuePIForChangeService"
    !-->
    <method name="issueProformaInvoice" auth_type="ADMIN" requires_perm="" comment="">
      <input type="dict">
        <param name="attrs_list" type="list" item_type="dict" length="-1">
          <item type="dict" comment="">
            <param name="comment" type="str" />
            <param name="user_id" type="int" />
            <param name="rule_id" type="int" />
            <param name="add_user" type="bool" />
            <param name="add_user_details" type="dict" />
          </item>
        </param>
        <param name="arbitrary_amount" type="float" />
      </input>
      <output type="dict" comment="">
        <param name="issued_pis" type="list" item_type="dict" length="-1">
          <item type="dict" comment="">
            <param name="pi_id" type="int" comment="Proforma Invoice ID" />
            <param name="rule_id" type="int" />
            <param name="rule_description" type="str" />
            <param name="issue_date" type="str_datetime" />
            <param name="expired" type="bool" />
            <param name="sum_up_amount" type="float" />
            <param name="roundup_amount" type="float" />
            <param name="previous_due" type="float" />
            <param name="effective_amount" type="float" />
            <param name="user_id" type="int" />
            <param name="user_name" type="str" />
            <param name="owner_name" type="str" />
            <param name="email" type="str" />
            <param name="address" type="str" />
            <param name="phone" type="str" />
            <param name="postal_code" type="str" />
            <param name="add_user" type="bool" />
            <param name="add_user_details_dict" type="dict" />
            <param name="comment" type="str" />
            <param name="pi_items" type="list" item_type="dict" length="-1">
              <item type="dict">
                <param name="amount" type="float" />
                <param name="description" type="str" />
              </item>
            </param>
          </item>
        </param>
        <param name="failed_users" type="list" item_type="dict" length="">
          <item type="dict">
            <param name="user_id" type="int" />
            <param name="failure_msg" type="error message" />
          </item>
        </param>
      </output>
    </method>
    <method name="invoicePutUserOnDept" auth_type="ADMIN" requires_perm="PAY INVOICE" comment="">
      <input type="dict">
        <param name="pi_id_list" type="list" item_type="int"
            comment="list of Proforma Invoice IDs" />
      </input>
      <output type="dict" comment="">
        <param name="failed_user_ids" type="list" item_type="str_int" length="-1"
            comment="list of User IDs" />
        <param name="successful_user_ids" type="list" item_type="str_int" length="-1"
            comment="list of User IDs" />
      </output>
    </method>
    <method name="proformaInvoicePaid" auth_type="ADMIN" requires_perm="PAY INVOICE" comment="">
      <input type="dict">
        <param name="pi_id_list" type="list" item_type="int"
          comment="list of Proforma Invoice IDs" />
        <param name="paid_amount_list" type="list" item_type="float"
          comment="list of paid amounts, length of list must be the same as `pi_id_list`" />
        <param name="payment_comment_list" type="list" item_type="str"
          comment="list of comment strings, length of list must be the same as `pi_id_list`" />
      </input>
      <output type="dict">
        <param name="user_ids" type="list" length="-1" item_type="str_int" comment="list of User IDs" />
      </output>
    </method>
    <method name="invoicePaid" auth_type="ADMIN" requires_perm="PAY INVOICE" comment="">
      <input type="dict">
        <param name="invoice_id_list" type="list" item_type="int"
            comment="list of Invoice IDs" />
        <param name="paid_amount_list" type="list" item_type="float"
            comment="list of paid amounts, length of list must be the same as `invoice_id_list`" />
        <param name="payment_comment_list" type="list" item_type="str"
            comment="list of comment strings, length of list must be the same as `invoice_id_list`" />
      </input>
      <output type="dict" comment="">
        <param name="user_ids" type="list" length="-1" item_type="str_int" comment="list of User IDs" />
      </output>
    </method>
    <method name="getPIByID" auth_type="ADMIN, USER" requires_perm=""
        comment="user must own the proforma invoice,
                 admin must have access to owner user and have permission 'SEE INVOICE'">
      <input type="dict">
        <param name="pi_id" type="int" />
      </input>
      <output type="dict" comment="">
        <param name="pi_id" type="int" comment="Proforma Invoice ID" />
        <param name="rule_id" type="int" />
        <param name="rule_description" type="str" />
        <param name="issue_date" type="str_datetime" />
        <param name="expired" type="bool" />
        <param name="sum_up_amount" type="float" />
        <param name="roundup_amount" type="float" />
        <param name="previous_due" type="float" />
        <param name="effective_amount" type="float" />
        <param name="user_id" type="int" />
        <param name="user_name" type="str" />
        <param name="owner_name" type="str" />
        <param name="email" type="str" />
        <param name="address" type="str" />
        <param name="phone" type="str" />
        <param name="postal_code" type="str" />
        <param name="add_user" type="bool" />
        <param name="add_user_details_dict" type="dict" />
        <param name="comment" type="str" />
        <param name="pi_items" type="list" item_type="dict" length="-1">
          <item type="dict">
            <param name="amount" type="float" />
            <param name="description" type="str" />
          </item>
        </param>
      </output>
    </method>
    <method name="getInvoiceByID" auth_type="ADMIN, USER" requires_perm=""
        comment="user must own the invoice,
                 admin must have access to owner user and have permission 'SEE INVOICE'">
      <input type="dict">
        <param name="invoice_id" type="int" />
      </input>
      <output type="dict" comment="">
        <param name="invoice_id" type="int" />
        <param name="rule_id" type="int" />
        <param name="rule_description" type="str" />
        <param name="is_active" type="bool" />
        <param name="is_paid" type="bool" />
        <param name="pi_issue_date" type="str_datetime" />
        <param name="invoice_issue_date" type="str_datetime" />
        <param name="period_end" type="str_datetime" />
        <param name="period_start" type="str_datetime" />
        <param name="previous_due" type="float" />
        <param name="sum_up_amount" type="float" />
        <param name="roundup_amount" type="float" />
        <param name="effective_amount" type="float" />
        <param name="paid_amount" type="float" />
        <param name="user_id" type="int" />
        <param name="user_name" type="str" />
        <param name="owner_name" type="str" />
        <param name="address" type="str" />
        <param name="comment" type="str" />
        <param name="email" type="str" />
        <param name="phone" type="str" />
        <param name="postal_code" type="str" />
        <param name="invoice_items" type="list" item_type="dict" length="-1">
          <item type="dict" comment="invoice item">
            <param name="invoice_item_id" type="int" />
            <param name="description" type="str" />
            <param name="amount" type="float" />
          </item>
        </param>
      </output>
    </method>
    <method name="getPIWithRuleByPIID" auth_type="ADMIN" requires_perm=""
        comment="user must own the proforma invoice,
                 admin must have access to owner user and have permission 'SEE INVOICE'">
      <input type="dict">
        <param name="pi_id" type="int" />
      </input>
      <output type="dict" comment="">
        <param name="pi" type="dict">
          <param name="pi_id" type="int" comment="Proforma Invoice ID" />
          <param name="rule_id" type="int" />
          <param name="rule_description" type="str" />
          <param name="issue_date" type="str_datetime" />
          <param name="expired" type="bool" />
          <param name="sum_up_amount" type="float" />
          <param name="roundup_amount" type="float" />
          <param name="previous_due" type="float" />
          <param name="effective_amount" type="float" />
          <param name="user_id" type="int" />
          <param name="user_name" type="str" />
          <param name="owner_name" type="str" />
          <param name="email" type="str" />
          <param name="address" type="str" />
          <param name="phone" type="str" />
          <param name="postal_code" type="str" />
          <param name="add_user" type="bool" />
          <param name="add_user_details_dict" type="dict" />
          <param name="comment" type="str" />
          <param name="pi_items" type="list" item_type="dict" length="-1">
            <item type="dict">
              <param name="amount" type="float" />
              <param name="description" type="str" />
            </item>
          </param>
        </param>
        <param name="rule" type="dict">
          <param name="rule_id" type="int" />
          <param name="description" type="str" />
          <param name="invoice_template_name" type="str" />
          <param name="pi_template_name" type="str" />
          <param name="date_type" type="choice">
            <choice value="jalali" />
            <choice value="gregorian" />
          </param>
          <param name="language" type="choice">
            <choice value="fa" />
            <choice value="en" />
          </param>
          <param name="pi_exp_days" type="int" />
          <param name="roundup_scale" type="int" />
          <param name="auto_invoice_event" type="choice">
            <choice value="null" />
            <choice value="credit_finished" />
            <choice value="exp_date" />
            <choice value="always" />
          </param>
          <param name="auto_invoice_threshold" type="int" />
          <param name="allow_user_issue_invoice" type="bool" />
          <param name="action" type="choice">
            <choice value="change_service" />
            <choice value="renew" />
            <choice value="renew_with_next_group" />
            <choice value="recharge" />
            <choice value="increase_deposit" />
            <choice value="increase_deposit_by_group_credit" />
            <choice value="increase_recharge_deposit" />
            <choice value="increase_credit" />
            <choice value="increase_deposit_constant" />
            <choice value="increase_recharge_deposit_constant" />
            <choice value="increase_credit_constant" />
            <choice value="set_deposit_constant" />
            <choice value="set_credit_constant" />
          </param>
          <param name="action_args" type="str" comment="" />
          <param name="disabled" type="bool" />
          <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
            <item type="dict" comment="rule item info dict">
              <param name="rule_item_id" type="int" />
              <param name="description" type="str" />
              <param name="formula" type="str" />
              <param name="is_bonus" type="bool" />
              <param name="none_effective" type="bool" />
            </item>
          </param>
        </param>
      </output>
    </method>
    <method name="getInvoiceWithRuleByInvoiceID" auth_type="ADMIN" requires_perm=""
        comment="user must own the invoice,
                 admin must have access to owner user and have permission 'SEE INVOICE'">
      <input type="dict">
        <param name="invoice_id" type="int" />
      </input>
      <output type="dict" comment="">
        <param name="invoice" type="dict">
          <param name="invoice_id" type="int" />
          <param name="rule_id" type="int" />
          <param name="rule_description" type="str" />
          <param name="is_active" type="bool" />
          <param name="is_paid" type="bool" />
          <param name="pi_issue_date" type="str_datetime" />
          <param name="invoice_issue_date" type="str_datetime" />
          <param name="period_end" type="str_datetime" />
          <param name="period_start" type="str_datetime" />
          <param name="previous_due" type="float" />
          <param name="sum_up_amount" type="float" />
          <param name="roundup_amount" type="float" />
          <param name="effective_amount" type="float" />
          <param name="paid_amount" type="float" />
          <param name="user_id" type="int" />
          <param name="user_name" type="str" />
          <param name="owner_name" type="str" />
          <param name="address" type="str" />
          <param name="comment" type="str" />
          <param name="email" type="str" />
          <param name="phone" type="str" />
          <param name="postal_code" type="str" />
          <param name="invoice_items" type="list" item_type="dict" length="-1">
            <item type="dict" comment="invoice item">
              <param name="invoice_item_id" type="int" />
              <param name="description" type="str" />
              <param name="amount" type="float" />
            </item>
          </param>
        </param>
        <param name="rule" type="dict">
          <param name="rule_id" type="int" />
          <param name="description" type="str" />
          <param name="invoice_template_name" type="str" />
          <param name="pi_template_name" type="str" />
          <param name="date_type" type="choice">
            <choice value="jalali" />
            <choice value="gregorian" />
          </param>
          <param name="language" type="choice">
            <choice value="fa" />
            <choice value="en" />
          </param>
          <param name="pi_exp_days" type="int" />
          <param name="roundup_scale" type="int" />
          <param name="auto_invoice_event" type="choice">
            <choice value="null" />
            <choice value="credit_finished" />
            <choice value="exp_date" />
            <choice value="always" />
          </param>
          <param name="auto_invoice_threshold" type="int" />
          <param name="allow_user_issue_invoice" type="bool" />
          <param name="action" type="choice">
            <choice value="change_service" />
            <choice value="renew" />
            <choice value="renew_with_next_group" />
            <choice value="recharge" />
            <choice value="increase_deposit" />
            <choice value="increase_deposit_by_group_credit" />
            <choice value="increase_recharge_deposit" />
            <choice value="increase_credit" />
            <choice value="increase_deposit_constant" />
            <choice value="increase_recharge_deposit_constant" />
            <choice value="increase_credit_constant" />
            <choice value="set_deposit_constant" />
            <choice value="set_credit_constant" />
          </param>
          <param name="action_args" type="str" comment="" />
          <param name="disabled" type="bool" />
          <param name="invoice_rule_items" type="list" item_type="dict" length="-1">
            <item type="dict" comment="rule item info dict">
              <param name="rule_item_id" type="int" />
              <param name="description" type="str" />
              <param name="formula" type="str" />
              <param name="is_bonus" type="bool" />
              <param name="none_effective" type="bool" />
            </item>
          </param>
        </param>
      </output>
    </method>
  </handler>
</web_service>
